<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Matthew X. Curinga">
  <meta name="author" content="Peter Wentworth">
  <meta name="author" content="Jeffrey Elkner">
  <meta name="author" content="Allen B. Downey">
  <meta name="author" content="and Chris Meyers">
  <title>How to Think Like a Computer Scientist</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #303030; color: #cccccc; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #cccccc; background-color: #303030; }
code > span.kw { color: #f0dfaf; }
code > span.dt { color: #dfdfbf; }
code > span.dv { color: #dcdccc; }
code > span.bn { color: #dca3a3; }
code > span.fl { color: #c0bed1; }
code > span.ch { color: #dca3a3; }
code > span.st { color: #cc9393; }
code > span.co { color: #7f9f7f; }
code > span.ot { color: #efef8f; }
code > span.al { color: #ffcfaf; }
code > span.fu { color: #efef8f; }
code > span.er { color: #c3bf9f; }
  </style>
  <!-- this css file gets inlined by the build script to make standalone html5 output
  that is why it has a style tag... -->
  
  <style type="text/css">
  body
  {
      background-color: white;
      margin: 0;
      padding: 0;
      font-size: 14px;
  }
  
  body, p, ul, ol, li, span, div
  {
       font-family: "FreeSans", "Helvetica", sans-serif; 
  }
  
  pre, code, tt, code span, pre span
  {
      font-family: "Ubuntu Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace;
  }
  
  p code
  {
      padding: 0 .25em; 
  }
  
  aside
  {
      border: medium solid gray;
      border-radius: 8px;
      padding: .5em;
      margin: 3em .5em;
      background-color: #F6CCDA;
  }
  
  h1,h2,h3,h4,h5, .header-section-number
  { 
      font-family: "Gil Sans", Futura, Ubuntu, "Century Gothic", sans-serif; 
  }
  
  h1
  {
      font-size: 350%; 
      border-bottom: medium solid black;
      text-transform: uppercase;
      padding: 0;
      padding-top: 3em;
  }
  
  
  
  #foreword, #the-way-of-the-program {
      counter-reset: section;
  }
  
  section.level1 {
      counter-increment: section;
      counter-reset: subsection;
  }
  
  
  h1:before
  {
      content: "Part " counter(section) ": ";
  }
  
  /*section h1:nth-child(-n+):before
  {
      content: counter(section, lower-roman) ". ";
  }
  */
  
  h2:before {
      counter-increment: subsection;
      content: counter(section) "." counter(subsection) " ";
  }
  
  
  h1.title:before, h2.author:before, nav#TOC h2:before, #forward h2:before, #preface h2:before {
      content: "";
  }
  
  
  h1 a, h2 a, h3 a, h4 a
  {
      color: black;
  }
  
  
  h2{ font-size: 130%; margin:0; margin-top: 1em; }
  h3{ font-size: 120%; font-weight: bold; }
  h4{ font-size: 110%; font-weight: bold; }
  h5 { padding: 0; margin: 0; font-size: 100%; font-style: italic; }
  
  h1.title 
  {
      margin:0;
      padding:0;
      padding-top: 80px;
      border-style: none;
      background-color: transparent;
      color: black;
      clear: both;
      color: #ab1c19;
  }
  
  h2.author
  {
      font-size: 100%;
      line-height: 1;
      padding: 0;
  }
  
  
  pre
  {
      padding: .5em;
  }
  
  dl { margin-left: 2em; }
  dt
  { 
      font-weight: bold; 
      font-size: 115%; 
      margin-top: .5em;
  }
  dd p {padding: 0; margin: 0; }
  
  
  a { text-decoration: none; }
  a img { border-style: none; }
  
  tr.odd { background-color: #d3d3d3; }
  
  p
  {
      margin: .5em 0;
      line-height: 1.5em;
  }
  
  blockquote
  {
      line-height: 120%;
      font-size: 90%;
      border-left: 3px solid gray;
      padding-left: 1em;
  }
  
  nav#TOC
  {
      background: none repeat scroll 0 0 white;
      counter-reset: toccount;
  }
  
  nav#TOC li
  {
      list-style-type: none;
      font-weight: normal;
  }
  
  nav#TOC>ul>li
  {
      font-weight: bold;
      padding-top: 1em;
      margin-bottom: .5em;
  }
  
  
  
  nav#TOC>ul>li:nth-child(3)
  {
      counter-reset: toccount;
  }
  
  nav#TOC>ul>li:before
  {
      counter-reset: tocsub;
      counter-increment: toccount;
      content: counter(toccount) ". ";
  }
  
  nav#TOC>ul>li:nth-child(-n+2):before
  {
      content: counter(toccount, lower-roman) ". ";
  }
  
  nav#TOC>ul>li>ul>li:first-child
  {
      padding-top: .5em;
  }
  
  nav#TOC>ul>li>ul>li:before
  {
      counter-increment: tocsub;
      content: counter(toccount) "." counter(tocsub) " ";
  }
  
  ol li ol li
  {
      list-style-type: lower-alpha;
  }
  
  
  /** code highlighting stuff **/
  
  table.sourceCode, pre.sourceCode
  {
      line-height: 125%;
  }
  
  td.lineNumbers {
      border-right: 0px none;
      padding-right: 0px;
      margin-right: 0px;
      width: 2em;
      text-align: right;
  }
  
  
  p code, li code
  {
      background-color: #ededed;
      color: black;
  }
  
  .sourceCode pre, pre.sourceCode, li table .sourceCode
  {
      color: inherit;
      border-style: none;
      background-color: #303030;
  }
  
  
  /** code listings/case studies **/
  
  section[id*="case-study"]
  {
      padding-left: 40%;
      position: relative;
      border-top: 1px solid gray;
  }
  
  section[id*="case-study"] h2, section[id*="case-study"] h3
  {
      text-align: right;
      margin: 2em 0;
  
  }
  
  section[id*="case-study"] aside
  {
      background: white;
      border-style: none;
      border-radius: 0px;
      position: absolute;
      left: 0;
      width: 39%;
      text-align: justify;
      padding: 0;
      margin: 0;
      font-size: 90%;
  }
  
  section[id*="case-study"] aside p
  {
      margin: 0;
      padding: 0;
      padding-right: .5em;
      line-height: 1.1em;
      margin-bottom: .5em;
  }
  
  section[id*="case-study"] aside code, h1 code, h2 code, h3 code, h4 code
  {
      background-color: #ededed;
      color: black;
  }
  
  #neighbor-details table { border-collapse:collapse; }
  
  #neighbor-details table, #neighbor-details th, #neighbor-details td
  {
      border: 1px solid black;
      background-color: white;
      padding: .25em;
  }
  
  @media screen
  {
      body
      {
          font-size: 14px;
          width: 720px;
          margin: 0 auto;
      }
  
  }
  
  </style>
</head>
<body>
<header>
<h1 class="title">How to Think Like a Computer Scientist</h1>
<h2 class="author">Matthew X. Curinga</h2>
<h2 class="author">Peter Wentworth</h2>
<h2 class="author">Jeffrey Elkner</h2>
<h2 class="author">Allen B. Downey</h2>
<h2 class="author">and Chris Meyers</h2>
</header>
<nav id="TOC">
<h2>Contents</h2>
<ul>
<li><a href="#foreword">Foreword</a><ul>
<li><a href="#contributor-list">Contributor List</a></li>
</ul></li>
<li><a href="#preface">Preface</a><ul>
<li><a href="#how-and-why-i-came-to-use-python">How and why I came to use Python</a></li>
<li><a href="#finding-a-textbook">Finding a textbook</a></li>
<li><a href="#introducing-programming-with-python">Introducing programming with Python</a></li>
<li><a href="#building-a-community">Building a community</a></li>
<li><a href="#the-rhodes-local-edition-rle-version-of-august-2012">The Rhodes Local Edition (RLE) (Version of August, 2012)</a></li>
</ul></li>
<li><a href="#the-way-of-the-program">The way of the program</a><ul>
<li><a href="#the-python-programming-language">The Python programming language</a></li>
<li><a href="#what-is-a-program">What is a program?</a></li>
<li><a href="#what-is-debugging">What is debugging?</a></li>
<li><a href="#syntax-errors">Syntax errors</a></li>
<li><a href="#runtime-errors">Runtime errors</a></li>
<li><a href="#semantic-errors">Semantic errors</a></li>
<li><a href="#experimental-debugging">Experimental debugging</a></li>
<li><a href="#formal-and-natural-languages">Formal and natural languages</a></li>
<li><a href="#glossary">Glossary</a></li>
<li><a href="#the-first-program">The first program</a></li>
<li><a href="#comments">Comments</a></li>
<li><a href="#glossary-1">Glossary</a></li>
<li><a href="#exercises">Exercises</a></li>
</ul></li>
<li><a href="#variables-expressions-and-statements">Variables, expressions and statements</a><ul>
<li><a href="#values-and-data-types">Values and data types</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#variable-names-and-keywords">Variable names and keywords</a></li>
<li><a href="#statements">Statements</a></li>
<li><a href="#evaluating-expressions">Evaluating expressions</a></li>
<li><a href="#operators-and-operands">Operators and operands</a></li>
<li><a href="#type-converter-functions">Type converter functions</a></li>
<li><a href="#order-of-operations">Order of operations</a></li>
<li><a href="#operations-on-strings">Operations on strings</a></li>
<li><a href="#input">Input</a></li>
<li><a href="#composition">Composition</a></li>
<li><a href="#the-modulus-operator">The modulus operator</a></li>
<li><a href="#glossary-2">Glossary</a></li>
<li><a href="#exercises-1">Exercises</a></li>
</ul></li>
<li><a href="#functions">Functions</a><ul>
<li><a href="#functions-1">Functions</a></li>
<li><a href="#composition-functions-can-call-other-functions">Composition: Functions can call other functions</a></li>
<li><a href="#flow-of-execution">Flow of execution</a></li>
<li><a href="#functions-that-require-arguments">Functions that require arguments</a></li>
<li><a href="#functions-that-return-values">Functions that return values</a></li>
<li><a href="#tips-revisited">Tips Revisited</a></li>
<li><a href="#glossary-3">Glossary</a></li>
<li><a href="#exercises-2">Exercises</a></li>
</ul></li>
<li><a href="#iteration">Iteration</a><ul>
<li><a href="#the-for-loop">The <code>for</code> loop</a></li>
<li><a href="#flow-of-execution-of-the-for-loop">Flow of Execution of the for loop</a></li>
<li><a href="#assignment">Assignment</a></li>
<li><a href="#updating-variables">Updating variables</a></li>
<li><a href="#the-for-loop-revisited">The <code>for</code> loop revisited</a></li>
<li><a href="#abbreviated-assignment">Abbreviated assignment</a></li>
<li><a href="#help-and-meta-notation">Help and meta-notation</a></li>
<li><a href="#tables">Tables</a></li>
<li><a href="#two-dimensional-tables">Two-dimensional tables</a></li>
<li><a href="#encapsulation-and-generalization">Encapsulation and generalization</a></li>
<li><a href="#more-encapsulation">More encapsulation</a></li>
<li><a href="#local-variables">Local variables</a></li>
<li><a href="#the-break-statement">The <code>break</code> statement</a></li>
<li><a href="#the-continue-statement">The <code>continue</code> statement</a></li>
<li><a href="#more-generalization">More generalization</a></li>
<li><a href="#functions-2">Functions</a></li>
<li><a href="#paired-data">Paired Data</a></li>
<li><a href="#nested-loops-for-nested-data">Nested Loops for Nested Data</a></li>
<li><a href="#glossary-4">Glossary</a></li>
<li><a href="#exercises-3">Exercises</a></li>
</ul></li>
<li><a href="#lists">Lists</a><ul>
<li><a href="#list-values">List values</a></li>
<li><a href="#accessing-elements">Accessing elements</a></li>
<li><a href="#list-length">List length</a></li>
<li><a href="#list-membership">List membership</a></li>
<li><a href="#list-operations">List operations</a></li>
<li><a href="#list-slices">List slices</a></li>
<li><a href="#lists-are-mutable">Lists are mutable</a></li>
<li><a href="#list-deletion">List deletion</a></li>
<li><a href="#objects-and-references">Objects and references</a></li>
<li><a href="#aliasing">Aliasing</a></li>
<li><a href="#cloning-lists">Cloning lists</a></li>
<li><a href="#lists-and-for-loops">Lists and <code>for</code> loops</a></li>
<li><a href="#list-parameters">List parameters</a></li>
<li><a href="#list-methods">List methods</a></li>
<li><a href="#pure-functions-and-modifiers">Pure functions and modifiers</a></li>
<li><a href="#functions-that-produce-lists">Functions that produce lists</a></li>
<li><a href="#list-comprehensions">List Comprehensions</a></li>
<li><a href="#strings-and-lists">Strings and lists</a></li>
<li><a href="#list-and-range"><code>list</code> and <code>range</code></a></li>
<li><a href="#nested-lists">Nested lists</a></li>
<li><a href="#matrices">Matrices</a></li>
<li><a href="#glossary-5">Glossary</a></li>
<li><a href="#exercises-4">Exercises</a></li>
</ul></li>
<li><a href="#tuples">Tuples</a><ul>
<li><a href="#tuples-are-used-for-grouping-data">Tuples are used for grouping data</a></li>
<li><a href="#tuple-assignment">Tuple assignment</a></li>
<li><a href="#tuples-as-return-values">Tuples as return values</a></li>
<li><a href="#composability-of-data-structures">Composability of Data Structures</a></li>
<li><a href="#glossary-6">Glossary</a></li>
<li><a href="#exercises-5">Exercises</a></li>
</ul></li>
<li><a href="#dictionaries">Dictionaries</a><ul>
<li><a href="#dictionary-operations">Dictionary operations</a></li>
<li><a href="#dictionary-methods">Dictionary methods</a></li>
<li><a href="#aliasing-and-copying">Aliasing and copying</a></li>
<li><a href="#counting-letters">Counting letters</a></li>
<li><a href="#word-frequencies">Word Frequencies</a></li>
<li><a href="#glossary-7">Glossary</a></li>
<li><a href="#exercises-6">Exercises</a></li>
</ul></li>
<li><a href="#content-analysis-of-ny-times-school-related-articles">Content Analysis of NY Times school-related articles</a><ul>
<li><a href="#case-study-dictionaries-tuples-lists-more">Case Study: Dictionaries, tuples, lists &amp; more</a></li>
<li><a href="#neighbor-details">Neighbor details</a></li>
</ul></li>
<li><a href="#while-loops">While loops</a><ul>
<li><a href="#the-while-statement">The <code>while</code> statement</a></li>
<li><a href="#the-collatz-3n-1-sequence">The Collatz 3n + 1 sequence</a></li>
<li><a href="#tracing-a-program">Tracing a program</a></li>
<li><a href="#counting-digits">Counting digits</a></li>
<li><a href="#newtons-method-for-finding-square-roots">Newton’s method for finding square roots</a></li>
<li><a href="#algorithms">Algorithms</a></li>
</ul></li>
</ul>
</nav>
<p><strong>Adelphi University Mod</strong></p>
<p>Copyright (C) Matthew X. Curinga.</p>
<p>This version of <em>Think Python</em> is based on the <a href="http://openbookproject.net/thinkcs/python/english3e/"><em>Learning with Python 3 (RLE)</em> by Peter Wentworth</a></p>
<p><strong>Copyright Notice</strong></p>
<p>Copyright (C) Peter Wentworth.</p>
<p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with Invariant Sections being Foreword, Preface, and Contributor List, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the section entitled “GNU Free Documentation License”.</p>
<section id="foreword" class="level1">
<h1>Foreword</h1>
<p>By David Beazley</p>
<p>As an educator, researcher, and book author, I am delighted to see the completion of this book. Python is a fun and extremely easy-to-use programming language that has steadily gained in popularity over the last few years. Developed over ten years ago by Guido van Rossum, Python’s simple syntax and overall feel is largely derived from ABC, a teaching language that was developed in the 1980’s. However, Python was also created to solve real problems and it borrows a wide variety of features from programming languages such as C++, Java, Modula-3, and Scheme. Because of this, one of Python’s most remarkable features is its broad appeal to professional software developers, scientists, researchers, artists, and educators.</p>
<p>Despite Python’s appeal to many different communities, you may still wonder why Python? or why teach programming with Python? Answering these questions is no simple task—especially when popular opinion is on the side of more masochistic alternatives such as C++ and Java. However, I think the most direct answer is that programming in Python is simply a lot of fun and more productive.</p>
<p>When I teach computer science courses, I want to cover important concepts in addition to making the material interesting and engaging to students. Unfortunately, there is a tendency for introductory programming courses to focus far too much attention on mathematical abstraction and for students to become frustrated with annoying problems related to low-level details of syntax, compilation, and the enforcement of seemingly arcane rules. Although such abstraction and formalism is important to professional software engineers and students who plan to continue their study of computer science, taking such an approach in an introductory course mostly succeeds in making computer science boring. When I teach a course, I don’t want to have a room of uninspired students. I would much rather see them trying to solve interesting problems by exploring different ideas, taking unconventional approaches, breaking the rules, and learning from their mistakes. In doing so, I don’t want to waste half of the semester trying to sort out obscure syntax problems, unintelligible compiler error messages, or the several hundred ways that a program might generate a general protection fault.</p>
<p>One of the reasons why I like Python is that it provides a really nice balance between the practical and the conceptual. Since Python is interpreted, beginners can pick up the language and start doing neat things almost immediately without getting lost in the problems of compilation and linking. Furthermore, Python comes with a large library of modules that can be used to do all sorts of tasks ranging from web-programming to graphics. Having such a practical focus is a great way to engage students and it allows them to complete significant projects. However, Python can also serve as an excellent foundation for introducing important computer science concepts. Since Python fully supports procedures and classes, students can be gradually introduced to topics such as procedural abstraction, data structures, and object-oriented programming — all of which are applicable to later courses on Java or C++. Python even borrows a number of features from functional programming languages and can be used to introduce concepts that would be covered in more detail in courses on Scheme and Lisp.</p>
<p>In reading Jeffrey’s preface, I am struck by his comments that Python allowed him to see a higher level of success and a lower level of frustration and that he was able to move faster with better results. Although these comments refer to his introductory course, I sometimes use Python for these exact same reasons in advanced graduate level computer science courses at the University of Chicago. In these courses, I am constantly faced with the daunting task of covering a lot of difficult course material in a blistering nine week quarter. Although it is certainly possible for me to inflict a lot of pain and suffering by using a language like C++, I have often found this approach to be counterproductive—especially when the course is about a topic unrelated to just programming. I find that using Python allows me to better focus on the actual topic at hand while allowing students to complete substantial class projects.</p>
<p>Although Python is still a young and evolving language, I believe that it has a bright future in education. This book is an important step in that direction. David Beazley University of Chicago Author of the <em>Python Essential Reference</em></p>
<section id="contributor-list" class="level2">
<h2>Contributor List</h2>
<p>To paraphrase the philosophy of the Free Software Foundation, this book is free like free speech, but not necessarily free like free pizza. It came about because of a collaboration that would not have been possible without the GNU Free Documentation License. So we would like to thank the Free Software Foundation for developing this license and, of course, making it available to us.</p>
<p>We would also like to thank the more than 100 sharp-eyed and thoughtful readers who have sent us suggestions and corrections over the past few years. In the spirit of free software, we decided to express our gratitude in the form of a contributor list. Unfortunately, this list is not complete, but we are doing our best to keep it up to date. It was also getting too large to include everyone who sends in a typo or two. You have our gratitude, and you have the personal satisfaction of making a book you found useful better for you and everyone else who uses it. New additions to the list for the 2nd edition will be those who have made on-going contributions.</p>
<p>If you have a chance to look through the list, you should realize that each person here has spared you and all subsequent readers from the confusion of a technical error or a less-than-transparent explanation, just by sending us a note.</p>
<p>Impossible as it may seem after so many corrections, there may still be errors in this book. If you should stumble across one, we hope you will take a minute to contact us. The email address (for the Python 3 version of the book) is <script type="text/javascript">
<!--
h='&#114;&#x75;&#46;&#x61;&#x63;&#46;&#122;&#x61;';a='&#64;';n='&#112;&#46;&#x77;&#x65;&#110;&#116;&#x77;&#x6f;&#114;&#116;&#104;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+e+'<\/'+'a'+'>');
// -->
</script><noscript>&#112;&#46;&#x77;&#x65;&#110;&#116;&#x77;&#x6f;&#114;&#116;&#104;&#32;&#x61;&#116;&#32;&#114;&#x75;&#32;&#100;&#x6f;&#116;&#32;&#x61;&#x63;&#32;&#100;&#x6f;&#116;&#32;&#122;&#x61;</noscript>. Substantial changes made due to your suggestions will add you to the next version of the contributor list (unless you ask to be omitted). Thank you!</p>
<section id="second-edition" class="level3">
<h3>Second Edition</h3>
<ul>
<li>An email from Mike MacHenry set me straight on tail recursion. He not only pointed out an error in the presentation, but suggested how to correct it.</li>
<li>It wasn’t until 5th Grade student Owen Davies came to me in a Saturday morning Python enrichment class and said he wanted to write the card game, Gin Rummy, in Python that I finally knew what I wanted to use as the case study for the object oriented programming chapters.</li>
<li>A <em>special</em> thanks to pioneering students in Jeff’s Python Programming class at <a href="http://www.arlington.k12.va.us/1540108115320583/blank/browse.asp?A=383&amp;BMDRN=2000&amp;BCOB=0&amp;C=59085&gt;">GCTAA</a> during the 2009-2010 school year: Safath Ahmed, Howard Batiste, Louis Elkner-Alfaro, and Rachel Hancock. Your continual and thoughtfull feedback led to changes in most of the chapters of the book. You set the standard for the active and engaged learners that will help make the new Governor’s Academy what it is to become. Thanks to you this is truly a <em>student tested</em> text.</li>
<li>Thanks in a similar vein to the students in Jeff’s Computer Science class at the HB-Woodlawn program during the 2007-2008 school year: James Crowley, Joshua Eddy, Eric Larson, Brian McGrail, and Iliana Vazuka.</li>
<li>Ammar Nabulsi sent in numerous corrections from Chapters 1 and 2.</li>
<li>Aldric Giacomoni pointed out an error in our definition of the Fibonacci sequence in Chapter 5.</li>
<li>Roger Sperberg sent in several spelling corrections and pointed out a twisted piece of logic in Chapter 3.</li>
<li>Adele Goldberg sat down with Jeff at PyCon 2007 and gave him a list of suggestions and corrections from throughout the book.</li>
<li>Ben Bruno sent in corrections for chapters 4, 5, 6, and 7.</li>
<li>Carl LaCombe pointed out that we incorrectly used the term commutative in chapter 6 where symmetric was the correct term.</li>
<li>Alessandro Montanile sent in corrections for errors in the code examples and text in chapters 3, 12, 15, 17, 18, 19, and 20.</li>
<li>Emanuele Rusconi found errors in chapters 4, 8, and 15.</li>
<li>Michael Vogt reported an indentation error in an example in chapter 6, and sent in a suggestion for improving the clarity of the shell vs. script section in chapter 1.</li>
</ul>
</section>
<section id="first-edition" class="level3">
<h3>First Edition</h3>
<ul>
<li>Lloyd Hugh Allen sent in a correction to Section 8.4.</li>
<li>Yvon Boulianne sent in a correction of a semantic error in Chapter 5.</li>
<li>Fred Bremmer submitted a correction in Section 2.1.</li>
<li>Jonah Cohen wrote the Perl scripts to convert the LaTeX source for this book into beautiful HTML.</li>
<li>Michael Conlon sent in a grammar correction in Chapter 2 and an improvement in style in Chapter 1, and he initiated discussion on the technical aspects of interpreters.</li>
<li>Benoit Girard sent in a correction to a humorous mistake in Section 5.6.</li>
<li>Courtney Gleason and Katherine Smith wrote <code>horsebet.py</code>, which was used as a case study in an earlier version of the book. Their program can now be found on the website.</li>
<li>Lee Harr submitted more corrections than we have room to list here, and indeed he should be listed as one of the principal editors of the text.</li>
<li>James Kaylin is a student using the text. He has submitted numerous corrections.</li>
<li>David Kershaw fixed the broken <code>catTwice</code> function in Section 3.10.</li>
<li>Eddie Lam has sent in numerous corrections to Chapters 1, 2, and 3. He also fixed the Makefile so that it creates an index the first time it is run and helped us set up a versioning scheme.</li>
<li>Man-Yong Lee sent in a correction to the example code in Section 2.4.</li>
<li>David Mayo pointed out that the word unconsciously in Chapter 1 needed to be changed to subconsciously .</li>
<li>Chris McAloon sent in several corrections to Sections 3.9 and 3.10.</li>
<li>Matthew J. Moelter has been a long-time contributor who sent in numerous corrections and suggestions to the book.</li>
<li>Simon Dicon Montford reported a missing function definition and several typos in Chapter 3. He also found errors in the <code>increment</code> function in Chapter 13.</li>
<li>John Ouzts corrected the definition of return value in Chapter 3.</li>
<li>Kevin Parks sent in valuable comments and suggestions as to how to improve the distribution of the book.</li>
<li>David Pool sent in a typo in the glossary of Chapter 1, as well as kind words of encouragement.</li>
<li>Michael Schmitt sent in a correction to the chapter on files and exceptions.</li>
<li>Robin Shaw pointed out an error in Section 13.1, where the printTime function was used in an example without being defined.</li>
<li>Paul Sleigh found an error in Chapter 7 and a bug in Jonah Cohen’s Perl script that generates HTML from LaTeX.</li>
<li>Craig T. Snydal is testing the text in a course at Drew University. He has contributed several valuable suggestions and corrections.</li>
<li>Ian Thomas and his students are using the text in a programming course. They are the first ones to test the chapters in the latter half of the book, and they have make numerous corrections and suggestions.</li>
<li>Keith Verheyden sent in a correction in Chapter 3.</li>
<li>Peter Winstanley let us know about a longstanding error in our Latin in Chapter 3.</li>
<li>Chris Wrobel made corrections to the code in the chapter on file I/O and exceptions.</li>
<li>Moshe Zadka has made invaluable contributions to this project. In addition to writing the first draft of the chapter on Dictionaries, he provided continual guidance in the early stages of the book.</li>
<li>Christoph Zwerschke sent several corrections and pedagogic suggestions, and explained the difference between <em>gleich</em> and <em>selbe</em>.</li>
<li>James Mayer sent us a whole slew of spelling and typographical errors, including two in the contributor list.</li>
<li>Hayden McAfee caught a potentially confusing inconsistency between two examples.</li>
<li>Angel Arnal is part of an international team of translators working on the Spanish version of the text. He has also found several errors in the English version.</li>
<li>Tauhidul Hoque and Lex Berezhny created the illustrations in Chapter 1 and improved many of the other illustrations.</li>
<li>Dr. Michele Alzetta caught an error in Chapter 8 and sent some interesting pedagogic comments and suggestions about Fibonacci and Old Maid.</li>
<li>Andy Mitchell caught a typo in Chapter 1 and a broken example in Chapter 2.</li>
<li>Kalin Harvey suggested a clarification in Chapter 7 and caught some typos.</li>
<li>Christopher P. Smith caught several typos and is helping us prepare to update the book for Python 2.2.</li>
<li>David Hutchins caught a typo in the Foreword.</li>
<li>Gregor Lingl is teaching Python at a high school in Vienna, Austria. He is working on a German translation of the book, and he caught a couple of bad errors in Chapter 5.</li>
<li>Julie Peters caught a typo in the Preface.</li>
</ul>
</section>
</section>
</section>
<section id="preface" class="level1">
<h1>Preface</h1>
<p>By Jeffrey Elkner</p>
<p>This book owes its existence to the collaboration made possible by the Internet and the free software movement. Its three authors—a college professor, a high school teacher, and a professional programmer—never met face to face to work on it, but we have been able to collaborate closely, aided by many other folks who have taken the time and energy to send us their feedback.</p>
<p>We think this book is a testament to the benefits and future possibilities of this kind of collaboration, the framework for which has been put in place by Richard Stallman and the Free Software Foundation.</p>
<section id="how-and-why-i-came-to-use-python" class="level2">
<h2>How and why I came to use Python</h2>
<p>In 1999, the College Board’s Advanced Placement (AP) Computer Science exam was given in C++ for the first time. As in many high schools throughout the country, the decision to change languages had a direct impact on the computer science curriculum at Yorktown High School in Arlington, Virginia, where I teach. Up to this point, Pascal was the language of instruction in both our first-year and AP courses. In keeping with past practice of giving students two years of exposure to the same language, we made the decision to switch to C++ in the first year course for the 1997-98 school year so that we would be in step with the College Board’s change for the AP course the following year.</p>
<p>Two years later, I was convinced that C++ was a poor choice to use for introducing students to computer science. While it is certainly a very powerful programming language, it is also an extremely difficult language to learn and teach. I found myself constantly fighting with C++’s difficult syntax and multiple ways of doing things, and I was losing many students unnecessarily as a result. Convinced there had to be a better language choice for our first-year class, I went looking for an alternative to C++.</p>
<p>I needed a language that would run on the machines in our GNU/Linux lab as well as on the Windows and Macintosh platforms most students have at home. I wanted it to be free software, so that students could use it at home regardless of their income. I wanted a language that was used by professional programmers, and one that had an active developer community around it. It had to support both procedural and object-oriented programming. And most importantly, it had to be easy to learn and teach. When I investigated the choices with these goals in mind, Python stood out as the best candidate for the job.</p>
<p>I asked one of Yorktown’s talented students, Matt Ahrens, to give Python a try. In two months he not only learned the language but wrote an application called pyTicket that enabled our staff to report technology problems via the Web. I knew that Matt could not have finished an application of that scale in so short a time in C++, and this accomplishment, combined with Matt’s positive assessment of Python, suggested that Python was the solution I was looking for.</p>
</section>
<section id="finding-a-textbook" class="level2">
<h2>Finding a textbook</h2>
<p>Having decided to use Python in both of my introductory computer science classes the following year, the most pressing problem was the lack of an available textbook.</p>
<p>Free documents came to the rescue. Earlier in the year, Richard Stallman had introduced me to Allen Downey. Both of us had written to Richard expressing an interest in developing free educational materials. Allen had already written a first-year computer science textbook, <em>How to Think Like a Computer Scientist</em>. When I read this book, I knew immediately that I wanted to use it in my class. It was the clearest and most helpful computer science text I had seen. It emphasized the processes of thought involved in programming rather than the features of a particular language. Reading it immediately made me a better teacher.</p>
<p><em>How to Think Like a Computer Scientist</em> was not just an excellent book, but it had been released under the GNU public license, which meant it could be used freely and modified to meet the needs of its user. Once I decided to use Python, it occurred to me that I could translate Allen’s original Java version of the book into the new language. While I would not have been able to write a textbook on my own, having Allen’s book to work from made it possible for me to do so, at the same time demonstrating that the cooperative development model used so well in software could also work for educational materials.</p>
<p>Working on this book for the last two years has been rewarding for both my students and me, and my students played a big part in the process. Since I could make instant changes whenever someone found a spelling error or difficult passage, I encouraged them to look for mistakes in the book by giving them a bonus point each time they made a suggestion that resulted in a change in the text. This had the double benefit of encouraging them to read the text more carefully and of getting the text thoroughly reviewed by its most important critics, students using it to learn computer science.</p>
<p>For the second half of the book on object-oriented programming, I knew that someone with more real programming experience than I had would be needed to do it right. The book sat in an unfinished state for the better part of a year until the open source community once again provided the needed means for its completion.</p>
<p>I received an email from Chris Meyers expressing interest in the book. Chris is a professional programmer who started teaching a programming course last year using Python at Lane Community College in Eugene, Oregon. The prospect of teaching the course had led Chris to the book, and he started helping out with it immediately. By the end of the school year he had created a companion project on our Website at <a href="http://openbookproject.net">http://openbookproject.net</a> (<em>Python for Fun</em>)[http://openbookproject.net/py4fun&gt;] and was working with some of my most advanced students as a master teacher, guiding them beyond where I could take them.</p>
</section>
<section id="introducing-programming-with-python" class="level2">
<h2>Introducing programming with Python</h2>
<p>The process of translating and using <em>How to Think Like a Computer Scientist</em> for the past two years has confirmed Python’s suitability for teaching beginning students. Python greatly simplifies programming examples and makes important programming ideas easier to teach.</p>
<p>The first example from the text illustrates this point. It is the traditional hello, world program, which in the Java version of the book looks like this:</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">class</span> Hello
{
    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span> (String[] args)
    {
        System.<span class="fu">out</span>.<span class="fu">println</span> (<span class="st">&quot;Hello, world.&quot;</span>);
    }
}</code></pre>
<p>in the Python version it becomes:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="dt">print</span>(<span class="st">&quot;Hello, World!&quot;</span>)</code></pre>
<p>Even though this is a trivial example, the advantages of Python stand out. Yorktown’s Computer Science I course has no prerequisites, so many of the students seeing this example are looking at their first program. Some of them are undoubtedly a little nervous, having heard that computer programming is difficult to learn. The Java version has always forced me to choose between two unsatisfying options: either to explain the <code>class Hello</code>, <code>public static void main</code>, <code>String[] args</code>, <code>{</code>, and <code>}</code>, statements and risk confusing or intimidating some of the students right at the start, or to tell them, Just don’t worry about all of that stuff now; we will talk about it later, and risk the same thing. The educational objectives at this point in the course are to introduce students to the idea of a programming statement and to get them to write their first program, thereby introducing them to the programming environment. The Python program has exactly what is needed to do these things, and nothing more.</p>
<p>Comparing the explanatory text of the program in each version of the book further illustrates what this means to the beginning student. There are seven paragraphs of explanation of Hello, world! in the Java version; in the Python version, there are only a few sentences. More importantly, the missing six paragraphs do not deal with the big ideas in computer programming but with the minutia of Java syntax. I found this same thing happening throughout the book. Whole paragraphs simply disappear from the Python version of the text because Python’s much clearer syntax renders them unnecessary.</p>
<p>Using a very high-level language like Python allows a teacher to postpone talking about low-level details of the machine until students have the background that they need to better make sense of the details. It thus creates the ability to put first things first pedagogically. One of the best examples of this is the way in which Python handles variables. In Java a variable is a name for a place that holds a value if it is a built-in type, and a reference to an object if it is not. Explaining this distinction requires a discussion of how the computer stores data. Thus, the idea of a variable is bound up with the hardware of the machine. The powerful and fundamental concept of a variable is already difficult enough for beginning students (in both computer science and algebra). Bytes and addresses do not help the matter. In Python a variable is a name that refers to a thing. This is a far more intuitive concept for beginning students and is much closer to the meaning of variable that they learned in their math courses. I had much less difficulty teaching variables this year than I did in the past, and I spent less time helping students with problems using them.</p>
<p>Another example of how Python aids in the teaching and learning of programming is in its syntax for functions. My students have always had a great deal of difficulty understanding functions. The main problem centers around the difference between a function definition and a function call, and the related distinction between a parameter and an argument. Python comes to the rescue with syntax that is nothing short of beautiful. Function definitions begin with the keyword <code>def</code>, so I simply tell my students, When you define a function, begin with <code>def</code>, followed by the name of the function that you are defining; when you call a function, simply call (type) out its name. Parameters go with definitions; arguments go with calls. There are no return types, parameter types, or reference and value parameters to get in the way, so I am now able to teach functions in less than half the time that it previously took me, with better comprehension.</p>
<p>Using Python improved the effectiveness of our computer science program for all students. I saw a higher general level of success and a lower level of frustration than I experienced teaching with either C++ or Java. I moved faster with better results. More students left the course with the ability to create meaningful programs and with the positive attitude toward the experience of programming that this engenders.</p>
</section>
<section id="building-a-community" class="level2">
<h2>Building a community</h2>
<p>I have received email from all over the globe from people using this book to learn or to teach programming. A user community has begun to emerge, and many people have been contributing to the project by sending in materials for the companion Website at <a href="http://openbookproject.net/pybiblio">http://openbookproject.net/pybiblio</a>.</p>
<p><strong>With the continued growth of Python, I expect the growth in the user community to continue and accelerate. The emergence of this user community and the possibility it suggests for similar collaboration among educators have been the most exciting parts of working on this project for me. By working together, we can increase the quality of materials available for our use and save valuable time. I invite you to join our community and look forward to hearing from you. Please write to me at <script type="text/javascript">
<!--
h='&#x65;&#108;&#x6b;&#110;&#x65;&#114;&#46;&#110;&#x65;&#116;&#62;';a='&#64;';n='&#106;&#x65;&#102;&#102;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+'jeff@elkner.net'+'<\/'+'a'+'>');
// -->
</script><noscript>&#106;&#x65;&#102;&#102;&#64;&#x65;&#108;&#x6b;&#110;&#x65;&#114;&#46;&#110;&#x65;&#116;&#32;&#40;&#106;&#x65;&#102;&#102;&#32;&#x61;&#116;&#32;&#x65;&#108;&#x6b;&#110;&#x65;&#114;&#32;&#100;&#x6f;&#116;&#32;&#110;&#x65;&#116;&#62;&#x29;</noscript></strong>.</p>
<p>Jeffrey Elkner<br />Governor’s Career and Technical Academy in Arlington<br />Arlington, Virginia<br /></p>
</section>
<section id="the-rhodes-local-edition-rle-version-of-august-2012" class="level2">
<h2>The Rhodes Local Edition (RLE) (Version of August, 2012)</h2>
<p>By Peter Wentworth</p>
<aside>
<p><strong>A word of thanks …</strong></p>
<p>We switched from Java to Python in our introductory courses in 2010. So far we think the results look positive. More time will tell.</p>
<p>This predecessor to this book was a great starting point for us, especially because of the liberal permission to change things. Having our own in-house course notes or handouts allows us to adapt and stay fresh, rearrange, see what works, and it gives us agility. We can also ensure that every student in the course gets a copy of the handouts — something that doesn’t always happen if we prescribe costly textbooks.</p>
Many thanks to all the contributors and the authors for making their hard work available to the Python community and to our students.
</aside>

<p>A colleague and friend, Peter Warren, once made the remark that learning introductory programming is as much about the environment as it is about the programming language.</p>
<p>I’m a big fan of IDEs (Integrated Development Environments).<br />I want help to be integrated into my editor, as a first-class citizen, available at the press of a button. I want syntax highlighting. I want immediate syntax checking, and sensible autocompletion. I’d like an editor that can fold function bodies or regions of code away, because it promotes and encourages how we build mental abstractions.</p>
<p>I’m especially keen on having a single-stepping debugger and breakpoints with code inspection built in. We’re trying to build a conceptual model of program execution in the student’s mind, so I find most helpful for teaching to have the call stack and variables explicitly visible, and to be able to immediately inspect the result of executing a statement.</p>
<p>My philosophy, then, is not to look for a language to teach, but to look for a combination of IDE and language that are packaged together, and evaluated as a whole.</p>
<p>I’ve made some quite deep changes to the original book to reflect this (and various other opinionated views that I hold), and I have no doubt that more changes will follow as we mature our course.</p>
<p>Here are some of the key things I’ve approached differently:</p>
<ul>
<li>Our local situation demands that we have a large number of service course students in an introductory course of just 3 weeks, and then we get another semester of teaching with those going into our mainstream program. So the book is in two parts: we’ll do the first five chapters in the big “get your toes wet” course, and the rest of the material in a separate semester.</li>
<li>We’re using Python 3. It is cleaner, more object oriented, and has fewer ad-hoc irregularities than earlier versions of Python.</li>
<li>We’re using PyScripter as our IDE, on Windows. And it is hardwired into parts of these notes, with screenshots, etc.</li>
<li>I’ve dropped GASP.</li>
<li>For graphics we start with the Turtle module.<br /> As things move along, we use PyGame for more advanced graphics.</li>
<li>I’ve introduced some event-driven programming using the turtle.<br /></li>
<li>I have tried to push more object-oriented notions earlier, without asking students to synthesize objects or write their own classes. So, for example, in the chapter about the turtle, we create multiple instances of turtles, talk about their attributes and state (color, position, etc), and we favour method-call style to move them around, i.e. <code>tess.forward(100)</code>. Similarly, when we use random numbers, we avoid the “hidden singleton generator” in the random module — we prefer to create an instance of a generator, and invoke methods on the instance.</li>
<li>The ease of constructing lists and the <code>for</code> loop seem to be winners in Python, so rather than use the traditional command-line <code>input</code> for data, I’ve favoured using loops and lists right up front, like this:</li>
</ul>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">friends = [<span class="st">&quot;Zoe&quot;</span>, <span class="st">&quot;Joe&quot;</span>, <span class="st">&quot;Bill&quot;</span>]
<span class="kw">for</span> f in friends:
    invitation = <span class="st">&quot;Hi &quot;</span> + f + <span class="st">&quot;.  Please come to my party on Saturday!&quot;</span>
    <span class="dt">print</span>(invitation)</code></pre></td></tr></table>
<p>This also means that I bumped <code>range</code> up for early exposure.<br />I envisage that over time we’ll see more opportunities to exploit “early lists, early iteration” in its most simple form.</p>
<ul>
<li>I dumped <code>doctest</code>: it is too quirky for my liking. For example, it fails a test if the spacing between list elements is not precisely the same as the output string, or if Python prints a string with single quotes, but you wrote up the test case with double quotes. Cases like this also confused students (and instructors) quite badly:</li>
</ul>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">
<span class="kw">def</span> addlist(xs):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">    &gt;&gt;&gt; xs = [2,3,4]</span>
<span class="co">    &gt;&gt;&gt; addlist(xs)</span>
<span class="co">    9</span>
<span class="co">    &quot;&quot;&quot;</span>
    <span class="kw">return</span></code></pre></td></tr></table>
<p>If you can explain the difference in scope rules and lifetimes between the parameter <code>xs</code> and the doctest variable <code>xs</code> elegantly, please let me know. Yes, I know doctest creates its own scope behind our back, but it is exactly this black magic that we’re trying to avoid.<br />From the usual indentation rules, also looks like the doctests are nested inside the function scope, but they are not. Students thought that the parameter had been given its value by the assignment to <code>xs</code> in the doctest!</p>
<p>I also think that keeping the test suite separate from the functions under test leads to a cleaner relationship between caller and callee, and gives a better chance of getting argument passing / parameter concepts taught accurately.</p>
<p>There is a good unit testing module in Python, (and PyScripter offers integrated support for it, and automated generation of skeleton test modules), but it looked too advanced for beginners, because it requires multi-module concepts.</p>
<p>So I’ve favoured my own test scaffolding in Chapter 6 (about 10 lines of code) that the students must insert into whatever file they’re working on.</p>
<ul>
<li><p>I’ve played down command-line input / process / output where possible. Many of our students have never seen a command-line shell, and it is arguably quite intimidating.</p></li>
<li><p>We’ve gone back to a more “classic / static” approach to writing our own classes and objects. Python (in company with languages like Javascript, Ruby, Perl, PHP, etc.) don’t really emphasize notions of “sealed” classes or “private” members, or even “sealed instances”.</p></li>
</ul>
<p>So one teaching approach is to allocate each instance as an empty container, and subsequently allow the external clients of the class to poke new members (methods or attributes) into different instances as they wish to.<br /> It is a very dynamic approach, but perhaps not one that encourages thinking in abstractions, layers, contracts, decoupling, etc. It might even be the kind of thing that one could write one of those <em>“x,y,z … considered harmful”</em> papers about.</p>
<p>In our more conservative approach, we put an initializer into every class, we determine at object instantiation time what members we want, and we initialize the instances from within the class. So we’ve moved closer in philosophy to C# / Java on this one.</p>
<ul>
<li><p>We’re moving towards introducing more algorithms earlier into the course. Python is an efficient teaching language — we can make fast progress. But the gains we make there we’d like to invest into deeper problem solving, and more complex algorithms with the basics, rather than cover “more Python features”. Some of these changes have started to find their way in this version, and I’m sure we’ll see more in future.</p></li>
<li><p>We’re interested in issues around teaching and learning. Some research indicates that “intellectual playfulness” is important. The study referenced in the Odds-and-ends workbook at the end just didn’t seem to have anywhere sensible to go in the book, yet I wanted it included. It is quite likely that we’ll allow more issues like this to creep into the book, to try to make it more than just about programming in Python.</p></li>
</ul>
</section>
</section>
<section id="the-way-of-the-program" class="level1">
<h1>The way of the program</h1>
<p>The goal of this book is to teach you to think like a computer scientist. This way of thinking combines some of the best features of mathematics, engineering, and natural science. Like mathematicians, computer scientists use formal languages to denote ideas (specifically computations). Like engineers, they design things, assembling components into systems and evaluating tradeoffs among alternatives. Like scientists, they observe the behavior of complex systems, form hypotheses, and test predictions.</p>
<p>The single most important skill for a computer scientist is <strong>problem solving</strong>. Problem solving means the ability to formulate problems, think creatively about solutions, and express a solution clearly and accurately. As it turns out, the process of learning to program is an excellent opportunity to practice problem-solving skills. That’s why this chapter is called, The way of the program.</p>
<p>On one level, you will be learning to program, a useful skill by itself. On another level, you will use programming as a means to an end. As we go along, that end will become clearer.</p>
<section id="the-python-programming-language" class="level2">
<h2>The Python programming language</h2>
<p>The programming language you will be learning is Python. Python is an example of a <strong>high-level language</strong>; other high-level languages you might have heard of are C++, PHP, Pascal, C#, and Java.</p>
<p>As you might infer from the name high-level language, there are also <strong>low-level languages</strong>, sometimes referred to as machine languages or assembly languages. Loosely speaking, computers can only execute programs written in low-level languages. Thus, programs written in a high-level language have to be translated into something more suitable before they can run.</p>
<p>Almost all programs are written in high-level languages because of their advantages. It is much easier to program in a high-level language so programs take less time to write, they are shorter and easier to read, and they are more likely to be correct. Second, high-level languages are <strong>portable</strong>, meaning that they can run on different kinds of computers with few or no modifications.</p>
<p>The engine that translates and runs Python is called the <strong>Python Interpreter</strong>: There are two ways to use it: <em>interactive or immediate mode</em> and <em>script mode</em>. In immediate mode, you type Python expressions into the Python Interpreter window, and the interpreter immediately shows the result:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">
<span class="kw">Python</span> 3.4.1 (v3.4.1:c0e311e010fc, May 18 2014, 00:54:21) 
[<span class="kw">GCC</span> 4.2.1 (Apple Inc. build 5666) <span class="kw">(dot</span> 3<span class="kw">)</span>] <span class="kw">on</span> darwin
<span class="kw">Type</span> <span class="st">&quot;help&quot;</span>, <span class="st">&quot;copyright&quot;</span>, <span class="st">&quot;credits&quot;</span> or <span class="st">&quot;license&quot;</span> for more information.
<span class="kw">&gt;&gt;&gt;</span> <span class="kw">2+2</span>
<span class="kw">4</span></code></pre>
<p>The <code>&gt;&gt;&gt;</code> is called the <strong>Python prompt</strong>. The interpreter uses the prompt to indicate that it is ready for instructions. We typed <code>2 + 2</code>, and the interpreter evaluated our expression, and replied <code>4</code>, and on the next line it gave a new prompt, indicating that it is ready for more input.</p>
<p>Alternatively, you can write a program in a file and use the interpreter to execute the contents of the file. Such a file is called a <strong>script</strong>. Scripts have the advantage that they can be saved to disk, printed, and so on.</p>
<p>For example, we created a file named <code>firstprogram.py</code> using our text editor. By convention, files that contain Python programs have names that end with <code>.py</code></p>
<p>To execute the program, we can run the command <code>python firstprogram.py</code> from the commnand prompt. Alternatively, our text editor or development environment (e.g. IDLE, PyCharm, or Sublime Text) may have a “run” command to execute the script:</p>
<figure>
<img src="figs/first-program.png" alt="firstprogram.py run in Sublime Text" /><figcaption>firstprogram.py run in Sublime Text</figcaption>
</figure>
<p>Most programs are more interesting than this one.</p>
<p>Working directly in the interpreter is convenient for testing short bits of code because you get immediate feedback. Think of it as scratch paper used to help you work out problems. Anything longer than a few lines should be put into a script.</p>
</section>
<section id="what-is-a-program" class="level2">
<h2>What is a program?</h2>
<p>A <strong>program</strong> is a sequence of instructions that specifies how to perform a computation. The computation might be something mathematical, such as solving a system of equations or finding the roots of a polynomial, but it can also be a symbolic computation, such as searching and replacing text in a document or (strangely enough) compiling a program.</p>
<p>The details look different in different languages, but a few basic instructions appear in just about every language:</p>
<dl>
<dt>input</dt>
<dd><p>Get data from the keyboard, a file, or some other device.</p>
</dd>
<dt>output</dt>
<dd><p>Display data on the screen or send data to a file or other device.</p>
</dd>
<dt>math</dt>
<dd><p>Perform basic mathematical operations like addition and multiplication.</p>
</dd>
<dt>conditional execution</dt>
<dd><p>Check for certain conditions and execute the appropriate sequence of statements.</p>
</dd>
<dt>repetition</dt>
<dd><p>Perform some action repeatedly, usually with some variation.</p>
</dd>
</dl>
<p>Believe it or not, that’s pretty much all there is to it. Every program you’ve ever used, no matter how complicated, is made up of instructions that look more or less like these. Thus, we can describe programming as the process of breaking a large, complex task into smaller and smaller subtasks until the subtasks are simple enough to be performed with sequences of these basic instructions.</p>
<p>That may be a little vague, but we will come back to this topic later when we talk about <strong>algorithms</strong>.</p>
</section>
<section id="what-is-debugging" class="level2">
<h2>What is debugging?</h2>
<p>Programming is a complex process, and because it is done by human beings, it often leads to errors. Programming errors are called <strong>bugs</strong> and the process of tracking them down and correcting them is called <strong>debugging</strong>. Use of the term <em>bug</em> to describe small engineering difficulties dates back to at least 1889, when Thomas Edison had a bug with his phonograph.</p>
<p>Three kinds of errors can occur in a program: <a href="http://en.wikipedia.org/wiki/Syntax_error">syntax errors</a>, <a href="http://en.wikipedia.org/wiki/Runtime_error">runtime errors</a>, and <a href="http://en.wikipedia.org/wiki/Logic_error">semantic errors</a>. It is useful to distinguish between them in order to track them down more quickly.</p>
</section>
<section id="syntax-errors" class="level2">
<h2>Syntax errors</h2>
<p>Python can only execute a program if the program is syntactically correct; otherwise, the process fails and returns an error message. <strong>Syntax</strong> refers to the structure of a program and the rules about that structure. For example, in English, a sentence must begin with a capital letter and end with a period. this sentence contains a <strong>syntax error</strong>. So does this one</p>
<p>For most readers, a few syntax errors are not a significant problem, which is why we can read the poetry of E. E. Cummings without problems. Python is not so forgiving. If there is a single syntax error anywhere in your program, Python will display an error message and quit, and you will not be able to run your program. During the first few weeks of your programming career, you will probably spend a lot of time tracking down syntax errors. As you gain experience, though, you will make fewer errors and find them faster.</p>
</section>
<section id="runtime-errors" class="level2">
<h2>Runtime errors</h2>
<p>The second type of error is a runtime error, so called because the error does not appear until you run the program. These errors are also called <strong>exceptions</strong> because they usually indicate that something exceptional (and bad) has happened.</p>
<p>Runtime errors are rare in the simple programs you will see in the first few chapters, so it might be a while before you encounter one.</p>
</section>
<section id="semantic-errors" class="level2">
<h2>Semantic errors</h2>
<p>The third type of error is the <strong>semantic error</strong>. If there is a semantic error in your program, it will run successfully, in the sense that the computer will not generate any error messages, but it will not do the right thing. It will do something else. Specifically, it will do what you told it to do.</p>
<p>The problem is that the program you wrote is not the program you wanted to write. The meaning of the program (its semantics) is wrong. Identifying semantic errors can be tricky because it requires you to work backward by looking at the output of the program and trying to figure out what it is doing.</p>
</section>
<section id="experimental-debugging" class="level2">
<h2>Experimental debugging</h2>
<p>One of the most important skills you will acquire is debugging. Although it can be frustrating, debugging is one of the most intellectually rich, challenging, and interesting parts of programming.</p>
<p>In some ways, debugging is like detective work. You are confronted with clues, and you have to infer the processes and events that led to the results you see.</p>
<p>Debugging is also like an experimental science. Once you have an idea what is going wrong, you modify your program and try again. If your hypothesis was correct, then you can predict the result of the modification, and you take a step closer to a working program. If your hypothesis was wrong, you have to come up with a new one. As Sherlock Holmes pointed out, When you have eliminated the impossible, whatever remains, however improbable, must be the truth. (A. Conan Doyle, <em>The Sign of Four</em>)</p>
<p>For some people, programming and debugging are the same thing. That is, programming is the process of gradually debugging a program until it does what you want. The idea is that you should start with a program that does <em>something</em> and make small modifications, debugging them as you go, so that you always have a working program.</p>
<p>For example, Linux is an operating system kernel that contains millions of lines of code, but it started out as a simple program Linus Torvalds used to explore the Intel 80386 chip. According to Larry Greenfield, one of Linus’s earlier projects was a program that would switch between displaying AAAA and BBBB. This later evolved to Linux (<em>The Linux Users’ Guide</em> Beta Version 1).</p>
<p>Later chapters will make more suggestions about debugging and other programming practices.</p>
</section>
<section id="formal-and-natural-languages" class="level2">
<h2>Formal and natural languages</h2>
<p><strong>Natural languages</strong> are the languages that people speak, such as English, Spanish, and French. They were not designed by people (although people try to impose some order on them); they evolved naturally.</p>
<p><strong>Formal languages</strong> are languages that are designed by people for specific applications. For example, the notation that mathematicians use is a formal language that is particularly good at denoting relationships among numbers and symbols. Chemists use a formal language to represent the chemical structure of molecules. And most importantly:</p>
<blockquote>
<p><em>Programming languages are formal languages that have been designed to express computations.</em></p>
</blockquote>
<p>Formal languages tend to have strict rules about syntax. For example, <code>3+3=6</code> is a syntactically correct mathematical statement, but <code>3=+6$</code> is not. H<sub>2</sub>O is a syntactically correct chemical name, but <sub>2</sub>Zz is not.</p>
<p>Syntax rules come in two flavors, pertaining to <strong>tokens</strong> and structure. Tokens are the basic elements of the language, such as words, numbers, parentheses, commas, and so on. In Python, a statement like <code>print(&quot;Happy New Year for &quot;, 2013)</code> has 6 tokens: a function name, an open parenthesis (round bracket), a string, a comma, a number, and a close parenthesis.</p>
<p>It is possible to make errors in the way one constructs tokens.<br />One of the problems with <code>3=+6$</code> is that <code>$</code> is not a legal token in mathematics (at least as far as we know). Similarly, <sub>2</sub>Zz is not a legal token in chemistry notation because there is no element with the abbreviation <code>Zz</code>.</p>
<p>The second type of syntax rule pertains to the <strong>structure</strong> of a statement—that is, the way the tokens are arranged. The statement <code>3=+6$</code> is structurally illegal because you can’t place a plus sign immediately after an equal sign. Similarly, molecular formulas have to have subscripts <em>after</em> the element name, not before. And in our Python example, if we omitted the comma, or if we changed the two parentheses around to say <code>print)&quot;Happy New Year for &quot;,2013(</code> our statement would still have six legal and valid tokens, but the structure is illegal.</p>
<p>When you read a sentence in English or a statement in a formal language, you have to figure out what the structure of the sentence is (although in a natural language you do this subconsciously). This process is called <strong>parsing</strong>.</p>
<p>For example, when you hear the sentence, “The other shoe fell”, you understand that the other shoe is the subject and fell is the verb. Once you have parsed a sentence, you can figure out what it means, or the <strong>semantics</strong> of the sentence. Assuming that you know what a shoe is and what it means to fall, you will understand the general implication of this sentence.</p>
<p>Although formal and natural languages have many features in common—tokens, structure, syntax, and semantics—there are many differences:</p>
</section>
<section id="glossary" class="level2">
<h2>Glossary</h2>
<dl>
<dt>ambiguity</dt>
<dd><p>Natural languages are full of ambiguity, which people deal with by using contextual clues and other information. Formal languages are designed to be nearly or completely unambiguous, which means that any statement has exactly one meaning, regardless of context.</p>
</dd>
<dt>redundancy</dt>
<dd><p>In order to make up for ambiguity and reduce misunderstandings, natural languages employ lots of redundancy. As a result, they are often verbose. Formal languages are less redundant and more concise.</p>
</dd>
<dt>literalness</dt>
<dd><p>Formal languages mean exactly what they say. On the other hand, natural languages are full of idiom and metaphor. If someone says, “The other shoe fell”, there is probably no shoe and nothing falling.<br />You’ll need to find the original joke to understand the idiomatic meaning of the other shoe falling. <em>Yahoo! Answers</em> thinks it knows!</p>
</dd>
</dl>
<p>People who grow up speaking a natural language—everyone—often have a hard time adjusting to formal languages. In some ways, the difference between formal and natural language is like the difference between poetry and prose, but more so:</p>
<dl>
<dt>poetry</dt>
<dd><p>Words are used for their sounds as well as for their meaning, and the whole poem together creates an effect or emotional response. Ambiguity is not only common but often deliberate.</p>
</dd>
<dt>prose</dt>
<dd><p>The literal meaning of words is more important, and the structure contributes more meaning. Prose is more amenable to analysis than poetry but still often ambiguous.</p>
</dd>
<dt>program</dt>
<dd><p>The meaning of a computer program is unambiguous and literal, and can be understood entirely by analysis of the tokens and structure.</p>
</dd>
</dl>
<p>Here are some suggestions for reading programs (and other formal languages). First, remember that formal languages are much more dense than natural languages, so it takes longer to read them. Also, the structure is very important, so it is usually not a good idea to read from top to bottom, left to right. Instead, learn to parse the program in your head, identifying the tokens and interpreting the structure. Finally, the details matter. Little things like spelling errors and bad punctuation, which you can get away with in natural languages, can make a big difference in a formal language.</p>
</section>
<section id="the-first-program" class="level2">
<h2>The first program</h2>
<p>Traditionally, the first program written in a new language is called <em>Hello, World!</em> because all it does is display the words, Hello, World! In Python, the script looks like this: (For scripts, we’ll show line numbers to the left of the Python statements.)</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="dt">print</span>(<span class="st">&quot;Hello, World!&quot;</span>)</code></pre></td></tr></table>
<p>This is an example of using the <strong>print function</strong>, which doesn’t actually print anything on paper. It displays a value on the screen. In this case, the result shown is</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">Hello</span>, World!</code></pre>
<p>The quotation marks in the program mark the beginning and end of the value; they don’t appear in the result.</p>
<p>Some people judge the quality of a programming language by the simplicity of the Hello, World! program. By this standard, Python does about as well as possible.</p>
</section>
<section id="comments" class="level2">
<h2>Comments</h2>
<p>As programs get bigger and more complicated, they get more difficult to read. Formal languages are dense, and it is often difficult to look at a piece of code and figure out what it is doing, or why.</p>
<p>For this reason, it is a good idea to add notes to your programs to explain in natural language what the program is doing.</p>
<p>A <strong>comment</strong> in a computer program is text that is intended only for the human reader — it is completely ignored by the interpreter.</p>
<p>In Python, the <code>#</code> token starts a comment. The rest of the line is ignored. Here is a new version of <em>Hello, World!</em>.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="co">#---------------------------------------------------</span>
<span class="co"># This demo program shows off how elegant Python is!</span>
<span class="co"># Written by Joe Soap, December 2010.</span>
<span class="co"># Anyone may freely copy or modify this program.</span>
<span class="co">#---------------------------------------------------</span>

<span class="dt">print</span>(<span class="st">&quot;Hello, World!&quot;</span>)     <span class="co"># Isn&#39;t this easy! </span>
      </code></pre></td></tr></table>
<p>You’ll also notice that we’ve left a blank line in the program. Blank lines are also ignored by the interpreter, but comments and blank lines can make your programs much easier for humans to parse. Use them liberally!</p>
</section>
<section id="glossary-1" class="level2">
<h2>Glossary</h2>
<dl>
<dt>algorithm</dt>
<dd><p>A set of specific steps for solving a category of problems.</p>
</dd>
<dt>bug</dt>
<dd><p>An error in a program.</p>
</dd>
<dt>comment</dt>
<dd><p>Information in a program that is meant for other programmers (or anyone reading the source code) and has no effect on the execution of the program.</p>
</dd>
<dt>debugging</dt>
<dd><p>The process of finding and removing any of the three kinds of programming errors.</p>
</dd>
<dt>exception</dt>
<dd><p>Another name for a runtime error.</p>
</dd>
<dt>formal language</dt>
<dd><p>Any one of the languages that people have designed for specific purposes, such as representing mathematical ideas or computer programs; all programming languages are formal languages.</p>
</dd>
<dt>high-level language</dt>
<dd><p>A programming language like Python that is designed to be easy for humans to read and write.</p>
</dd>
<dt>immediate mode</dt>
<dd><p>A style of using Python where we type expressions at the command prompt, and the results are shown immediately. Contrast with <strong>script</strong>, and see the entry under <strong>Python shell</strong>.</p>
</dd>
<dt>interpreter</dt>
<dd><p>The engine that executes your Python scripts or expressions.</p>
</dd>
<dt>low-level language</dt>
<dd><p>A programming language that is designed to be easy for a computer to execute; also called machine language or assembly language.</p>
</dd>
<dt>natural language</dt>
<dd><p>Any one of the languages that people speak that evolved naturally.</p>
</dd>
<dt>object code</dt>
<dd><p>The output of the compiler after it translates the program.</p>
</dd>
<dt>parse</dt>
<dd><p>To examine a program and analyze the syntactic structure.</p>
</dd>
<dt>portability</dt>
<dd><p>A property of a program that can run on more than one kind of computer.</p>
</dd>
<dt>print function</dt>
<dd><p>A function used in a program or script that causes the Python interpreter to display a value on its output device.</p>
</dd>
<dt>problem solving</dt>
<dd><p>The process of formulating a problem, finding a solution, and expressing the solution.</p>
</dd>
<dt>program</dt>
<dd><p>a sequence of instructions that specifies to a computer actions and computations to be performed.</p>
</dd>
<dt>Python shell</dt>
<dd><p>An interactive user interface to the Python interpreter. The user of a Python shell types commands at the prompt (&gt;&gt;&gt;), and presses the return key to send these commands immediately to the interpreter for processing. The word <em>shell</em> comes from Unix. In the PyScripter used in this RLE version of the book, the Interpreter Window is where we’d do the immediate mode interaction.</p>
</dd>
<dt>runtime error</dt>
<dd><p>An error that does not occur until the program has started to execute but that prevents the program from continuing.</p>
</dd>
<dt>script</dt>
<dd><p>A program stored in a file (usually one that will be interpreted).</p>
</dd>
<dt>semantic error</dt>
<dd><p>An error in a program that makes it do something other than what the programmer intended.</p>
</dd>
<dt>semantics</dt>
<dd><p>The meaning of a program.</p>
</dd>
<dt>source code</dt>
<dd><p>A program in a high-level language before being compiled.</p>
</dd>
<dt>syntax</dt>
<dd><p>The structure of a program.</p>
</dd>
<dt>syntax error</dt>
<dd><p>An error in a program that makes it impossible to parse — and therefore impossible to interpret.</p>
</dd>
<dt>token</dt>
<dd><p>One of the basic elements of the syntactic structure of a program, analogous to a word in a natural language.</p>
</dd>
</dl>
</section>
<section id="exercises" class="level2">
<h2>Exercises</h2>
<ol>
<li>Write an English sentence with understandable semantics but incorrect syntax. Write another English sentence which has correct syntax but has semantic errors.</li>
<li>Using the Python interpreter, type <code>1 + 2</code> and then hit return. Python <em>evaluates</em> this <em>expression</em>, displays the result, and then shows another prompt. <code>*</code> is the <em>multiplication operator</em>, and <code>**</code> is the <em>exponentiation operator</em>. Experiment by entering different expressions and recording what is displayed by the Python interpreter.</li>
<li>Type <code>1 2</code> and then hit return. Python tries to evaluate the expression, but it can’t because the expression is not syntactically legal. Instead, it shows the error message:</li>
</ol>
<pre class="sourceCode python"><code class="sourceCode python">File <span class="st">&quot;&lt;interactive input&gt;&quot;</span>, line <span class="dv">1</span>
<span class="dv">1</span> <span class="dv">2</span>
^
<span class="ot">SyntaxError</span>: invalid syntax</code></pre>
<p>In many cases, Python indicates where the syntax error occurred, but it is not always right, and it doesn’t give you much information about what is wrong.</p>
<p>So, for the most part, the burden is on you to learn the syntax rules.</p>
<p>In this case, Python is complaining because there is no operator between the numbers.</p>
<p>See if you can find a few more examples of things that will produce error messages when you enter them at the Python prompt. Write down what you enter at the prompt and the last line of the error message that Python reports back to you.</p>
<ol>
<li><p>Type <code>print(&quot;hello&quot;)</code>. Python executes this, which has the effect of printing the letters h-e-l-l-o. Notice that the quotation marks that you used to enclose the string are not part of the output. Now type <code>&quot;hello&quot;</code> and describe your result. Make notes of when you see the quotation marks and when you don’t.</p></li>
<li><p>Type <code>cheese</code> without the quotation marks. The output will look something like this::</p>
<pre><code>Traceback (most recent call last):
  File &quot;&lt;interactive input&gt;&quot;, line 1, in ?
NameError: name &#39;cheese&#39; is not defined</code></pre></li>
</ol>
<p>This is a run-time error; specifically, it is a NameError, and even more specifically, it is an error because the name <code>cheese</code> is not defined. If you don’t know what that means yet, you will soon. #. Type <code>6 + 4 * 9</code> at the Python prompt and hit enter. Record what happens.</p>
<p>Now create a Python script with the following contents:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">       <span class="dv">6</span> + <span class="dv">4</span> * <span class="dv">9</span>
</code></pre></td></tr></table>
<p>What happens when you run this script? Now change the script contents to:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">       <span class="dt">print</span>(<span class="dv">6</span> + <span class="dv">4</span> * <span class="dv">9</span>)
</code></pre></td></tr></table>
<p>and run it again.</p>
<p>What happened this time?</p>
<p>Whenever an <em>expression</em> is typed at the Python prompt, it is evaluated and the result is <em>automatically</em> shown on the line below. (Like on your calculator, if you type this expression you’ll get the result 42.)</p>
<p>A script is different, however. Evaluations of expressions are not automatically displayed, so it is necessary to use the <strong>print</strong> function to make the answer show up.</p>
<p>It is hardly ever necessary to use the print function in immediate mode at the command prompt.</p>
<p>.. Copyright (C) Peter Wentworth, Jeffrey Elkner, Allen B. Downey and Chris Meyers. Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with Invariant Sections being Foreword, Preface, and Contributor List, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the section entitled “GNU Free Documentation License”.</p>
<p>|</p>
</section>
</section>
<section id="variables-expressions-and-statements" class="level1">
<h1>Variables, expressions and statements</h1>
<section id="values-and-data-types" class="level2">
<h2>Values and data types</h2>
<p>A <strong>value</strong> is one of the fundamental things — like a letter or a number — that a program manipulates. The values we have seen so far are <code>4</code> (the result when we added <code>2 + 2</code>), and <code>&quot;Hello, World!&quot;</code>.</p>
<p>These values are classified into different <strong>classes</strong>, or <strong>data types</strong>: <code>4</code> is an <em>integer</em>, and <code>&quot;Hello, World!&quot;</code> is a <em>string</em>, so-called because it contains a string of letters. You (and the interpreter) can identify strings because they are enclosed in quotation marks.</p>
<p>If you are not sure what class a value falls into, Python has a function called <strong>type</strong> which can tell you.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">type</span>(<span class="st">&quot;Hello, World!&quot;</span>)
&lt;<span class="kw">class</span> <span class="st">&#39;str&#39;</span>&gt;
&gt;&gt;&gt; <span class="dt">type</span>(<span class="dv">17</span>)
&lt;<span class="kw">class</span> <span class="st">&#39;int&#39;</span>&gt;</code></pre>
<p>Not surprisingly, strings belong to the class <strong>str</strong> and integers belong to the class <strong>int</strong>. Less obviously, numbers with a decimal point belong to a class called <strong>float</strong>, because these numbers are represented in a format called <em>floating-point</em>. At this stage, you can treat the words <em>class</em> and <em>type</em> interchangeably. We’ll come back to a deeper understanding of what a class is in later chapters.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">type</span>(<span class="fl">3.2</span>)
&lt;<span class="kw">class</span> <span class="st">&#39;float&#39;</span>&gt;</code></pre>
<p>What about values like <code>&quot;17&quot;</code> and <code>&quot;3.2&quot;</code>? They look like numbers, but they are in quotation marks like strings.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">type</span>(<span class="st">&quot;17&quot;</span>)
&lt;<span class="kw">class</span> <span class="st">&#39;str&#39;</span>&gt;
&gt;&gt;&gt; <span class="dt">type</span>(<span class="st">&quot;3.2&quot;</span>)
&lt;<span class="kw">class</span> <span class="st">&#39;str&#39;</span>&gt;</code></pre>
<p>They’re strings!</p>
<p>Strings in Python can be enclosed in either single quotes (<code>'</code>) or double quotes (<code>&quot;</code>), or three of each (<code>'''</code> or <code>&quot;&quot;&quot;</code>)</p>
<pre class="sourceCode python"><code class="sourceCode python">        
&gt;&gt;&gt; <span class="dt">type</span>(<span class="st">&#39;This is a string.&#39;</span>)
&lt;<span class="kw">class</span> <span class="st">&#39;str&#39;</span>&gt;
&gt;&gt;&gt; <span class="dt">type</span>(<span class="st">&quot;And so is this.&quot;</span>)
&lt;<span class="kw">class</span> <span class="st">&#39;str&#39;</span>&gt;
&gt;&gt;&gt; <span class="dt">type</span>(<span class="st">&quot;&quot;&quot;and this.&quot;&quot;&quot;</span>)
&lt;<span class="kw">class</span> <span class="st">&#39;str&#39;</span>&gt;
&gt;&gt;&gt; <span class="dt">type</span>(<span class="st">&#39;&#39;&#39;and even this...&#39;&#39;&#39;</span>)
&lt;<span class="kw">class</span> <span class="st">&#39;str&#39;</span>&gt;</code></pre>
<p>Double quoted strings can contain single quotes inside them, as in <code>&quot;Bruce's beard&quot;</code>, and single quoted strings can have double quotes inside them, as in <code>'The knights who say &quot;Ni!&quot;'</code>.</p>
<p>Strings enclosed with three occurrences of either quote symbol are called triple quoted strings. They can contain either single or double quotes:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">print</span>(<span class="st">&#39;&#39;&#39;&quot;Oh no&quot;, she exclaimed, &quot;Ben&#39;s bike is broken!&quot;&#39;&#39;&#39;</span>)
<span class="co">&quot;Oh no&quot;</span>, she exclaimed, <span class="st">&quot;Ben&#39;s bike is broken!&quot;</span>
&gt;&gt;&gt;</code></pre>
<p>Triple quoted strings can even span multiple lines:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; message = <span class="st">&quot;&quot;&quot;This message will</span>
<span class="st">... span several</span>
<span class="st">... lines.&quot;&quot;&quot;</span>
&gt;&gt;&gt; <span class="dt">print</span>(message)
This message will
span several
lines.
&gt;&gt;&gt;</code></pre>
<p>Python doesn’t care whether you use single or double quotes or the three-of-a-kind quotes to surround your strings: once it has parsed the text of your program or command, the way it stores the value is identical in all cases, and the surrounding quotes are not part of the value. But when the interpreter wants to display a string, it has to decide which quotes to use to make it look like a string.</p>
<pre class="sourceCode python"><code class="sourceCode python">
&gt;&gt;&gt; <span class="st">&#39;This is a string.&#39;</span>
<span class="co">&#39;This is a string.&#39;</span>
&gt;&gt;&gt; <span class="st">&quot;&quot;&quot;And so is this.&quot;&quot;&quot;</span>
<span class="co">&#39;And so is this.&#39;</span></code></pre>
<p>So the Python language designers usually chose to surround their strings by single quotes. What do think would happen if the string already contained single quotes?</p>
<p>When you type a large integer, you might be tempted to use commas between groups of three digits, as in <code>42,000</code>. This is not a legal integer in Python, but it does mean something else, which is legal:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dv">42000</span>
<span class="dv">42000</span>
&gt;&gt;&gt; <span class="dv">42</span>,<span class="dv">000</span>
(<span class="dv">42</span>, <span class="dv">0</span>)</code></pre>
<p>Well, that’s not what we expected at all! Because of the comma, Python chose to treat this as a <em>pair</em> of values. We’ll come back to learn about pairs later.<br />But, for the moment, remember not to put commas or spaces in your integers, no matter how big they are. Also revisit what we said in the previous chapter: formal languages are strict, the notation is concise, and even the smallest change might mean something quite different from what you intended.</p>
</section>
<section id="variables" class="level2">
<h2>Variables</h2>
<p>One of the most powerful features of a programming language is the ability to manipulate <strong>variables</strong>. A variable is a name that refers to a value.</p>
<p>The <strong>assignment statement</strong> gives a value to a variable:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; message = <span class="st">&quot;What&#39;s up, Doc?&quot;</span>
&gt;&gt;&gt; n = <span class="dv">17</span>
&gt;&gt;&gt; pi = <span class="fl">3.14159</span></code></pre>
<p>This example makes three assignments. The first assigns the string value <code>&quot;What's up, Doc?&quot;</code> to a variable named <code>message</code>. The second gives the integer <code>17</code> to <code>n</code>, and the third assigns the floating-point number <code>3.14159</code> to a variable called <code>pi</code>.</p>
<p>The <strong>assignment token</strong>, <code>=</code>, should not be confused with <em>equals</em>, which uses the token <code>==</code>. The assignment statement binds a <em>name</em>, on the left-hand side of the operator, to a <em>value</em>, on the right-hand side. This is why you will get an error if you enter:</p>
<pre class="sourceCode python"><code class="sourceCode python">        
&gt;&gt;&gt; <span class="dv">17</span> = n
File <span class="st">&quot;&lt;interactive input&gt;&quot;</span>, line <span class="dv">1</span>
<span class="ot">SyntaxError</span>: can<span class="st">&#39;t assign to literal</span></code></pre>
<p><em><strong>Tip:</strong> When reading or writing code, say to yourself “n is assigned 17” or “n gets the value 17”. Don’t say “n equals 17”.</em></p>
<p>A common way to represent variables on paper is to write the name with an arrow pointing to the variable’s value. This kind of figure is called a <strong>state snapshot</strong> because it shows what state each of the variables is in at a particular instant in time. (Think of it as the variable’s state of mind). This diagram shows the result of executing the assignment statements:</p>
<figure>
<img src="figs/state.png" alt="State snapshot" /><figcaption>State snapshot</figcaption>
</figure>
<p>If you ask the interpreter to evaluate a variable, it will produce the value that is currently linked to the variable:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; message
<span class="co">&#39;What&#39;</span>s up, Doc?<span class="st">&#39;</span>
<span class="st">&gt;&gt;&gt; n</span>
<span class="st">17</span>
<span class="st">&gt;&gt;&gt; pi</span>
<span class="st">3.14159</span></code></pre>
<p>We use variables in a program to “remember” things, perhaps the current score at the football game. But variables are <em>variable</em>. This means they can change over time, just like the scoreboard at a football game. You can assign a value to a variable, and later assign a different value to the same variable.<br />(<em>This is different from maths. In maths, if you give <code>x</code> the value 3, it cannot change to link to a different value half-way through your calculations!</em>)</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; day = <span class="st">&quot;Thursday&quot;</span>
&gt;&gt;&gt; day
<span class="co">&#39;Thursday&#39;</span>
&gt;&gt;&gt; day = <span class="st">&quot;Friday&quot;</span>
&gt;&gt;&gt; day
<span class="co">&#39;Friday&#39;</span>
&gt;&gt;&gt; day = <span class="dv">21</span>
&gt;&gt;&gt; day
<span class="dv">21</span></code></pre>
<p>You’ll notice we changed the value of <code>day</code> three times, and on the third assignment we even made it refer to a value that was of a different type.</p>
<p>A great deal of programming is about having the computer remember things, e.g. <em>The number of missed calls on your phone</em>, and then arranging to update or change the variable when you miss another call.</p>
</section>
<section id="variable-names-and-keywords" class="level2">
<h2>Variable names and keywords</h2>
<p><strong>Variable names</strong> can be arbitrarily long. They can contain both letters and digits, but they have to begin with a letter or an underscore. Although it is legal to use uppercase letters, by convention we don’t. If you do, remember that case matters. <code>Bruce</code> and <code>bruce</code> are different variables.</p>
<p>The underscore character (<code>_</code>) can appear in a name. It is often used in names with multiple words, such as <code>my_name</code> or <code>price_of_tea_in_china</code>.</p>
<p>There are some situations in which names beginning with an underscore have special meaning, so a safe rule for beginners is to start all names with a letter.</p>
<p>If you give a variable an illegal name, you get a syntax error:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; 76trombones = <span class="st">&quot;big parade&quot;</span>
<span class="ot">SyntaxError</span>: invalid syntax
&gt;&gt;&gt; more$ = <span class="dv">1000000</span>
<span class="ot">SyntaxError</span>: invalid syntax
&gt;&gt;&gt; <span class="kw">class</span> = <span class="st">&quot;Computer Science 101&quot;</span>
<span class="ot">SyntaxError</span>: invalid syntax</code></pre>
<p><code>76trombones</code> is illegal because it does not begin with a letter. <code>more$</code> is illegal because it contains an illegal character, the dollar sign. But what’s wrong with <code>class</code>?</p>
<p>It turns out that <code>class</code> is one of the Python <strong>keywords</strong>. Keywords define the language’s syntax rules and structure, and they cannot be used as variable names.</p>
<p><a href="https://docs.python.org/3.5/reference/lexical_analysis.html#keywords">Python has thirty-something keywords</a> (and every now and again improvements to Python introduce or eliminate one or two):</p>
<pre><code>and      as       assert   break    class    continue
def      del      elif     else     except   exec
finally  for      from     global   if       import
in       is       lambda   nonlocal not      or       
pass     raise    return   try      while    with
yield    True     False    None</code></pre>
<p>You might want to keep this list handy. If the interpreter complains about one of your variable names and you don’t know why, see if it is on this list.</p>
<p>Programmers generally choose names for their variables that are meaningful to the human readers of the program—they help the programmer document, or remember, what the variable is used for.</p>
<aside id="meaningful-names">
   
<p>Beginners sometimes confuse “meaningful to the human readers” with “meaningful to the computer”. So they’ll wrongly think that because they’ve called some variable <code>average</code> or <code>pi</code>, it will somehow magically calculate an average, or magically know that the variable <code>pi</code> should have a value like 3.14159. No! The computer doesn’t understand what you intend the variable to mean.</p>
So you’ll find some instructors who deliberately don’t choose meaningful names when they teach beginners — not because we don’t think it is a good habit, but because we’re trying to reinforce the message that you — the programmer — must write the program code to calculate the average, and you must write an assignment statement to give the variable <code>pi</code> the value you want it to have.
</aside>

</section>
<section id="statements" class="level2">
<h2>Statements</h2>
<p>A <strong>statement</strong> is an instruction that the Python interpreter can execute. We have only seen the assignment statement so far. Some other kinds of statements that we’ll see shortly are <code>while</code> statements, <code>for</code> statements, <code>if</code> statements,<br />and <code>import</code> statements. (There are other kinds too!)</p>
<p>When you type a statement on the command line, Python executes it. Statements don’t produce any result.</p>
</section>
<section id="evaluating-expressions" class="level2">
<h2>Evaluating expressions</h2>
<p>An <strong>expression</strong> is a combination of values, variables, operators, and calls to functions. If you type an expression at the Python prompt, the interpreter <strong>evaluates</strong> it and displays the result:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dv">1</span> + <span class="dv">1</span>
<span class="dv">2</span>
&gt;&gt;&gt; <span class="dt">len</span>(<span class="st">&quot;hello&quot;</span>)
<span class="dv">5</span></code></pre>
<p>In this example <code>len</code> is a built-in Python function that returns the number of characters in a string. We’ve previously seen the <code>print</code> and the <code>type</code> functions, so this is our third example of a function!</p>
<p>The <em>evaluation of an expression</em> produces a value, which is why expressions can appear on the right hand side of assignment statements. A value all by itself is a simple expression, and so is a variable.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dv">17</span>
<span class="dv">17</span>
&gt;&gt;&gt; y = <span class="fl">3.14</span>
&gt;&gt;&gt; x = <span class="dt">len</span>(<span class="st">&quot;hello&quot;</span>)
&gt;&gt;&gt; x
<span class="dv">5</span>
&gt;&gt;&gt; y
<span class="fl">3.14</span></code></pre>
</section>
<section id="operators-and-operands" class="level2">
<h2>Operators and operands</h2>
<p><strong>Operators</strong> are special tokens that represent computations like addition, multiplication and division. The values the operator uses are called <strong>operands</strong>.</p>
<p>The following are all legal Python expressions whose meaning is more or less clear:</p>
<pre><code>20+32   hour-1   hour*60+minute   minute/60   5**2   (5+9)*(15-7)</code></pre>
<p>The tokens <code>+</code>, <code>-</code>, and <code>*</code>, and the use of parenthesis for grouping, mean in Python what they mean in mathematics. The asterisk (<code>*</code>) is the token for multiplication, and <code>**</code> is the token for exponentiation.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dv">2</span> ** <span class="dv">3</span>
<span class="dv">8</span>
&gt;&gt;&gt; <span class="dv">3</span> ** <span class="dv">2</span>
<span class="dv">9</span></code></pre>
<p>When a variable name appears in the place of an operand, it is replaced with its value before the operation is performed.</p>
<p>Addition, subtraction, multiplication, and exponentiation all do what you expect.</p>
<p>Example: so let us convert 645 minutes into hours:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; minutes = <span class="dv">645</span>
&gt;&gt;&gt; hours = minutes / <span class="dv">60</span>
&gt;&gt;&gt; hours
<span class="fl">10.75</span></code></pre>
<p>Oops! In Python 3, the division operator <code>/</code> always yields a floating point result. What we might have wanted to know was how many <em>whole</em> hours there are, and how many minutes remain. Python gives us two different flavors of the division operator.<br />The second, called <strong>floor division</strong> uses the token <code>//</code>.<br />Its result is always a whole number — and if it has to adjust the number it always moves it to the left on the number line. So <code>6 // 4</code> yields <code>1</code>, but <code>-6 // 4</code> might surprise you!</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dv">7</span> / <span class="dv">4</span>
<span class="fl">1.75</span>
&gt;&gt;&gt; <span class="dv">7</span> // <span class="dv">4</span>
<span class="dv">1</span>
&gt;&gt;&gt; minutes = <span class="dv">645</span>
&gt;&gt;&gt; hours = minutes // <span class="dv">60</span>
&gt;&gt;&gt; hours
<span class="dv">10</span></code></pre>
<p>Take care that you choose the correct flavor of the division operator. If you’re working with expressions where you need floating point values, use the division operator that does the division accurately.</p>
</section>
<section id="type-converter-functions" class="level2">
<h2>Type converter functions</h2>
<p>Here we’ll look at three more Python functions, <code>int</code>, <code>float</code> and <code>str</code>, which will (attempt to) convert their arguments into types <code>int</code>, <code>float</code> and <code>str</code> respectively. We call these <strong>type converter</strong> functions.</p>
<p>The <code>int</code> function can take a floating point number or a string, and turn it into an int. For floating point numbers, it <em>discards</em> the decimal portion of the number — a process we call <em>truncation towards zero</em> on the number line. Let us see this in action:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">int</span>(<span class="fl">3.14</span>)
<span class="dv">3</span>
&gt;&gt;&gt; <span class="dt">int</span>(<span class="fl">3.9999</span>)     <span class="co"># This doesn&#39;t round to the closest int! </span>
<span class="dv">3</span>
&gt;&gt;&gt; <span class="dt">int</span>(<span class="fl">3.0</span>)
<span class="dv">3</span>
&gt;&gt;&gt; <span class="dt">int</span>(-<span class="fl">3.999</span>)     <span class="co"># Note that the result is closer to zero</span>
-<span class="dv">3</span>
&gt;&gt;&gt; <span class="dt">int</span>(minutes / <span class="dv">60</span>)
<span class="dv">10</span>
&gt;&gt;&gt; <span class="dt">int</span>(<span class="st">&quot;2345&quot;</span>)     <span class="co"># Parse a string to produce an int</span>
<span class="dv">2345</span>
&gt;&gt;&gt; <span class="dt">int</span>(<span class="dv">17</span>) <span class="co"># It even works if arg is already an int</span>
<span class="dv">17</span>
&gt;&gt;&gt; <span class="dt">int</span>(<span class="st">&quot;23 bottles&quot;</span>) </code></pre>
<p>This last case doesn’t look like a number — what do we expect?</p>
<pre class="sourceCode python"><code class="sourceCode python">Traceback (most recent call last):
File <span class="st">&quot;&lt;interactive input&gt;&quot;</span>, line <span class="dv">1</span>, in &lt;module&gt;
<span class="ot">ValueError</span>: invalid literal <span class="kw">for</span> <span class="dt">int</span>() <span class="kw">with</span> base <span class="dv">10</span>: <span class="st">&#39;23 bottles&#39;</span></code></pre>
<p>The type converter <code>float</code> can turn an integer, a float, or a syntactically legal string into a float:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">float</span>(<span class="dv">17</span>)
<span class="fl">17.0</span>
&gt;&gt;&gt; <span class="dt">float</span>(<span class="st">&quot;123.45&quot;</span>)
<span class="fl">123.45</span></code></pre>
<p>The type converter <code>str</code> turns its argument into a string:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">str</span>(<span class="dv">17</span>)
<span class="co">&#39;17&#39;</span>
&gt;&gt;&gt; <span class="dt">str</span>(<span class="fl">123.45</span>)
<span class="co">&#39;123.45&#39;</span></code></pre>
</section>
<section id="order-of-operations" class="level2">
<h2>Order of operations</h2>
<p>When more than one operator appears in an expression, the order of evaluation depends on the <strong>rules of precedence</strong>. Python follows the same precedence rules for its mathematical operators that mathematics does. The acronym PEMDAS is a useful way to remember the order of operations:</p>
<ol>
<li><strong>P</strong> arentheses have the highest precedence and can be used to force an expression to evaluate in the order you want. Since expressions in parentheses are evaluated first, <code>2 * (3-1)</code> is 4, and <code>(1+1)**(5-2)</code> is</li>
<li>You can also use parentheses to make an expression easier to read, as in <code>(minute * 100) / 60</code>, even though it doesn’t change the result.</li>
<li><strong>E</strong> xponentiation has the next highest precedence, so <code>2**1+1</code> is 3 and not 4, and <code>3*1**3</code> is 3 and not 27.</li>
<li><strong>M</strong> ultiplication and both <strong>D</strong> ivision operators have the same precedence, which is higher than <strong>A</strong> ddition and <strong>S</strong> ubtraction, which also have the same precedence. So <code>2*3-1</code> yields 5 rather than 4, and <code>5-2*2</code> is 1, not 6.</li>
<li>Operators with the <em>same</em> precedence are evaluated from left-to-right. In algebra we say they are <em>left-associative</em>. So in the expression <code>6-3+2</code>, the subtraction happens first, yielding 3. We then add 2 to get the result 5. If the operations had been evaluated from right to left, the result would have been <code>6-(3+2)</code>, which is 1. (The acronym PEDMAS could mislead you to thinking that division has higher precedence than multiplication, and addition is done ahead of subtraction - don’t be misled.<br /> Subtraction and addition are at the same precedence, and the left-to-right rule applies.)</li>
</ol>
<ul>
<li>Due to some historical quirk, an exception to the left-to-right left-associative rule is the exponentiation operator <code>**</code>, so a useful hint is to always use parentheses to force exactly the order you want when exponentiation is involved:</li>
</ul>
<pre class="sourceCode python"><code class="sourceCode python">  &gt;&gt;&gt; <span class="dv">2</span> ** <span class="dv">3</span> ** <span class="dv">2</span>     <span class="co"># The right-most ** operator gets done first!</span>
  <span class="dv">512</span>
  &gt;&gt;&gt; (<span class="dv">2</span> ** <span class="dv">3</span>) ** <span class="dv">2</span>   <span class="co"># Use parentheses to force the order you want!</span>
  <span class="dv">64</span></code></pre>
<p>The immediate mode command prompt of Python is great for exploring and experimenting with expressions like this.</p>
</section>
<section id="operations-on-strings" class="level2">
<h2>Operations on strings</h2>
<p>In general, you cannot perform mathematical operations on strings, even if the strings look like numbers. The following are illegal (assuming that <code>message</code> has type string):</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; message - <span class="dv">1</span><span class="co"># Error</span>
&gt;&gt;&gt; <span class="st">&quot;Hello&quot;</span> / <span class="dv">123</span>      <span class="co"># Error</span>
&gt;&gt;&gt; message * <span class="st">&quot;Hello&quot;</span>  <span class="co"># Error </span>
&gt;&gt;&gt; <span class="st">&quot;15&quot;</span> + <span class="dv">2</span>   <span class="co"># Error</span></code></pre>
<p>Interestingly, the <code>+</code> operator does work with strings, but for strings, the <code>+</code> operator represents <strong>concatenation</strong>, not addition.<br />Concatenation means joining the two operands by linking them end-to-end. For example:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">fruit = <span class="st">&quot;banana&quot;</span>
baked_good = <span class="st">&quot; nut bread&quot;</span>
<span class="dt">print</span>(fruit + baked_good)</code></pre></td></tr></table>
<p>The output of this program is <code>banana nut bread</code>. The space before the word <code>nut</code> is part of the string, and is necessary to produce the space between the concatenated strings.</p>
<p>The <code>*</code> operator also works on strings; it performs repetition. For example, <code>'Fun'*3</code> is <code>'FunFunFun'</code>. One of the operands has to be a string; the other has to be an integer.</p>
<p>On one hand, this interpretation of <code>+</code> and <code>*</code> makes sense by analogy with addition and multiplication. Just as <code>4*3</code> is equivalent to <code>4+4+4</code>, we expect <code>&quot;Fun&quot;*3</code> to be the same as <code>&quot;Fun&quot;+&quot;Fun&quot;+&quot;Fun&quot;</code>, and it is. On the other hand, there is a significant way in which string concatenation and repetition are different from integer addition and multiplication. Can you think of a property that addition and multiplication have that string concatenation and repetition do not?</p>
</section>
<section id="input" class="level2">
<h2>Input</h2>
<p>There is a built-in function in Python for getting input from the user:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">n = <span class="dt">input</span>(<span class="st">&quot;Please enter your name: &quot;</span>)</code></pre></td></tr></table>
<p>A sample run of this script run in the terminal prompts the user to type their name, like this:</p>
<pre><code>Please enter your name: </code></pre>
<p>The user of the program can type the name and hit <code>enter</code>. When this happens the text that has been entered is returned from the <code>input</code> function, and in this case assigned to the variable <code>n</code>.</p>
<p>Even if you asked the user to enter their age, you would get back a string like <code>&quot;17&quot;</code>. It would be your job, as the programmer, to convert that string into a int or a float, using the <code>int</code> or <code>float</code> converter functions we saw earlier.</p>
</section>
<section id="composition" class="level2">
<h2>Composition</h2>
<p>So far, we have looked at the elements of a program — variables, expressions, statements, and function calls — in isolation, without talking about how to combine them.</p>
<p>One of the most useful features of programming languages is their ability to take small building blocks and <strong>compose</strong> them into larger chunks.</p>
<p>For example, we know how to get the user to enter some input, we know how to convert the string we get into a float, we know how to write a complex expression, and we know how to print values. Let’s put these together in a small four-step program that asks the user to input a value for the radius of a circle, and then computes the area of the circle from the formula</p>
<figure>
<img src="figs/circle_area.png" />
</figure>
<p>Firstly, we’ll do the four steps one at a time:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">response = <span class="dt">input</span>(<span class="st">&quot;What is your radius? &quot;</span>)
r = <span class="dt">float</span>(response)
area = <span class="fl">3.14159</span> * r**<span class="dv">2</span>
<span class="dt">print</span>(<span class="st">&quot;The area is &quot;</span>, area)</code></pre></td></tr></table>
<p>Now let’s compose the first two lines into a single line of code, and compose the second two lines into another line of code.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">r = <span class="dt">float</span>( <span class="dt">input</span>(<span class="st">&quot;What is your radius? &quot;</span>) )
<span class="dt">print</span>(<span class="st">&quot;The area is &quot;</span>, <span class="fl">3.14159</span> * r**<span class="dv">2</span>)</code></pre></td></tr></table>
<p>If we really wanted to be tricky, we could write it all in one statement:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="dt">print</span>(<span class="st">&quot;The area is &quot;</span>, <span class="fl">3.14159</span>*<span class="dt">float</span>(<span class="dt">input</span>(<span class="st">&quot;What is your radius?&quot;</span>))**<span class="dv">2</span>)</code></pre></td></tr></table>
<p>Such compact code may not be most understandable for humans, but it does illustrate how we can compose bigger chunks from our building blocks.</p>
<p>If you’re ever in doubt about whether to compose code or fragment it into smaller steps, try to make it as simple as you can for the human to follow. My choice would be the first case above, with four separate steps.</p>
</section>
<section id="the-modulus-operator" class="level2">
<h2>The modulus operator</h2>
<p>The <strong>modulus operator</strong> works on integers (and integer expressions) and gives the remainder when the first number is divided by the second. In Python, the modulus operator is a percent sign (<code>%</code>). The syntax is the same as for other operators. It has the same precedence as the multiplication operator.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; q = <span class="dv">7</span> // <span class="dv">3</span>     <span class="co"># This is integer division operator</span>
&gt;&gt;&gt; <span class="dt">print</span>(q)
<span class="dv">2</span>
&gt;&gt;&gt; r  = <span class="dv">7</span> % <span class="dv">3</span>
&gt;&gt;&gt; <span class="dt">print</span>(r)
<span class="dv">1</span></code></pre>
<p>So 7 divided by 3 is 2 with a remainder of 1.</p>
<p>The modulus operator turns out to be surprisingly useful. For example, you can check whether one number is divisible by another—if <code>x % y</code> is zero, then <code>x</code> is divisible by <code>y</code>.</p>
<p>Also, you can extract the right-most digit or digits from a number. For example, <code>x % 10</code> yields the right-most digit of <code>x</code> (in base 10). Similarly <code>x % 100</code> yields the last two digits.</p>
<p>It is also extremely useful for doing conversions, say from seconds, to hours, minutes and seconds. So let’s write a program to ask the user to enter some seconds, and we’ll convert them into hours, minutes, and remaining seconds.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">total_secs = <span class="dt">int</span>(<span class="dt">input</span>(<span class="st">&quot;How many seconds, in total?&quot;</span>))
hours = total_secs // <span class="dv">3600</span>      
secs_still_remaining = total_secs % <span class="dv">3600</span>
minutes =  secs_still_remaining // <span class="dv">60</span> 
secs_finally_remaining = secs_still_remaining  % <span class="dv">60</span>

<span class="dt">print</span>(<span class="st">&quot;Hrs=&quot;</span>, hours, <span class="st">&quot;  mins=&quot;</span>, minutes,  
 <span class="co">&quot;secs=&quot;</span>, secs_finally_remaining)</code></pre></td></tr></table>
</section>
<section id="glossary-2" class="level2">
<h2>Glossary</h2>
<dl>
<dt>assignment statement</dt>
<dd><p>A statement that assigns a value to a name (variable). To the left of the assignment operator, <code>=</code>, is a name. To the right of the assignment token is an expression which is evaluated by the Python interpreter and then assigned to the name. The difference between the left and right hand sides of the assignment statement is often confusing to new programmers. In the following assignment:<br /><code>n = n + 1</code><br /><code>n</code> plays a very different role on each side of the <code>=</code>. On the right it is a <em>value</em> and makes up part of the <em>expression</em> which will be evaluated by the Python interpreter before assigning it to the name on the left.</p>
</dd>
<dt>assignment token</dt>
<dd><p><code>=</code> is Python’s assignment token. Do not confuse it with <em>equals</em>, which is an operator for comparing values.</p>
</dd>
<dt>composition</dt>
<dd><p>The ability to combine simple expressions and statements into compound statements and expressions in order to represent complex computations concisely.</p>
</dd>
<dt>concatenate</dt>
<dd><p>To join two strings end-to-end.</p>
</dd>
<dt>data type</dt>
<dd><p>A set of values. The type of a value determines how it can be used in expressions. So far, the types you have seen are integers (<code>int</code>), floating-point numbers (<code>float</code>), and strings (<code>str</code>).</p>
</dd>
<dt>evaluate</dt>
<dd><p>To simplify an expression by performing the operations in order to yield a single value.</p>
</dd>
<dt>expression</dt>
<dd><p>A combination of variables, operators, and values that represents a single result value.</p>
</dd>
<dt>float</dt>
<dd><p>A Python data type which stores <em>floating-point</em> numbers. Floating-point numbers are stored internally in two parts: a <em>base</em> and an <em>exponent</em>. When printed in the standard format, they look like decimal numbers. Beware of rounding errors when you use <code>float</code> s, and remember that they are only approximate values.</p>
</dd>
<dt>floor division</dt>
<dd><p>An operator (denoted by the token <code>//</code>) that divides one number by another and yields an integer, or, if the result is not already an integer, it yields the next smallest integer.</p>
</dd>
<dt>int</dt>
<dd><p>A Python data type that holds positive and negative whole numbers.</p>
</dd>
<dt>keyword</dt>
<dd><p>A reserved word that is used by the compiler to parse program; you cannot use keywords like <code>if</code>, <code>def</code>, and <code>while</code> as variable names.</p>
</dd>
<dt>modulus operator</dt>
<dd><p>An operator, denoted with a percent sign ( <code>%</code>), that works on integers and yields the remainder when one number is divided by another.</p>
</dd>
<dt>operand</dt>
<dd><p>One of the values on which an operator operates.</p>
</dd>
<dt>operator</dt>
<dd><p>A special symbol that represents a simple computation like addition, multiplication, or string concatenation.</p>
</dd>
<dt>rules of precedence</dt>
<dd><p>The set of rules governing the order in which expressions involving multiple operators and operands are evaluated.</p>
</dd>
<dt>state snapshot</dt>
<dd><p>A graphical representation of a set of variables and the values to which they refer, taken at a particular instant during the program’s execution.</p>
</dd>
<dt>statement</dt>
<dd><p>An instruction that the Python interpreter can execute. So far we have only seen the assignment statement, but we will soon meet the <code>import</code> statement and the <code>for</code> statement.</p>
</dd>
<dt>str</dt>
<dd><p>A Python data type that holds a string of characters.</p>
</dd>
<dt>value</dt>
<dd><p>A number or string (or other things to be named later) that can be stored in a variable or computed in an expression.</p>
</dd>
<dt>variable</dt>
<dd><p>A name that refers to a value.</p>
</dd>
<dt>variable name</dt>
<dd><p>A name given to a variable. Variable names in Python consist of a sequence of letters (a..z, A..Z, and _) and digits (0..9) that begins with a letter. In best programming practice, variable names should be chosen so that they describe their use in the program, making the program <em>self documenting</em>.</p>
</dd>
</dl>
</section>
<section id="exercises-1" class="level2">
<h2>Exercises</h2>
<ol>
<li>Take the sentence: <em>All work and no play makes Jack a dull boy.</em> Store each word in a separate variable, then print out the sentence on one line using <code>print</code>.</li>
<li>Add parenthesis to the expression <code>6 * 1 - 2</code> to change its value from 4 to -6.</li>
<li>Place a comment before a line of code that previously worked, and record what happens when you rerun the program.</li>
<li>Start the Python interpreter and enter <code>bruce + 4</code> at the prompt. This will give you an error:</li>
</ol>
<pre class="sourceCode python"><code class="sourceCode python"><span class="ot">NameError</span>: name <span class="st">&#39;bruce&#39;</span> is not defined

Assign a value to ``bruce`` so that ``bruce + <span class="dv">4</span>`` evaluates to ``<span class="dv">10</span>``.</code></pre>
<ol>
<li>The formula for computing the final amount if one is earning compound interest is given on Wikipedia as</li>
</ol>
<p><img src="figs/compoundInterest.png" /><br /> Write a Python program that assigns the principal amount of $10000 to variable <code>P</code>, assign to <code>n</code> the value 12, and assign to <code>r</code> the interest rate of 8%. Then have the program prompt the user for the number of years <code>t</code> that the money will be compounded for. Calculate and print the final amount after <code>t</code> years.</p>
<ol>
<li><p>Evaluate the following numerical expressions in your head, then use the Python interpreter to check your results:</p>
<ol>
<li><code>&gt;&gt;&gt; 5 % 2</code></li>
<li><code>&gt;&gt;&gt; 9 % 5</code></li>
<li><code>&gt;&gt;&gt; 15 % 12</code></li>
<li><code>&gt;&gt;&gt; 12 % 15</code></li>
<li><code>&gt;&gt;&gt; 6 % 6</code></li>
<li><code>&gt;&gt;&gt; 0 % 7</code></li>
<li><code>&gt;&gt;&gt; 7 % 0</code></li>
</ol></li>
</ol>
<p>What happened with the last example? Why? If you were able to correctly anticipate the computer’s response in all but the last one, it is time to move on. If not, take time now to make up examples of your own. Explore the modulus operator until you are confident you understand how it works.</p>
<ol>
<li><p>You look at the clock and it is exactly 2pm. You set an alarm to go off in 51 hours. At what time does the alarm go off? (Hint: you could count on your fingers, but this is not what we’re after. If you are tempted to count on your fingers, change the 51 to 5100.)</p></li>
<li><p>Write a Python program to solve the general version of the above problem. Ask the user for the time now (in hours), and ask for the number of hours to wait.<br /> Your program should output what the time will be on the clock when the alarm goes off.</p></li>
</ol>
</section>
</section>
<section id="functions" class="level1">
<h1>Functions</h1>
<section id="functions-1" class="level2">
<h2>Functions</h2>
<p>In Python, a <strong>function</strong> is a named sequence of statements that belong together. Their primary purpose is to help us organize programs into chunks that match how we think about the problem.</p>
<p>The syntax for a <strong>function definition</strong> is:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> NAME( PARAMETERS ):
    STATEMENTS</code></pre>
<p>We can make up any names we want for the functions we create, except that we can’t use a name that is a Python keyword, and the names must follow the rules for legal identifiers.</p>
<p>There can be any number of statements inside the function, but they have to be indented from the <code>def</code>. In the examples in this book, we will use the standard indentation of four spaces. Function definitions are the second of several <strong>compound statements</strong> we will see, all of which have the same pattern:</p>
<ol type="1">
<li>A header line which begins with a keyword and ends with a colon.</li>
<li>A <strong>body</strong> consisting of one or more Python statements, each indented the same amount — <em>the Python style guide recommends 4 spaces</em> — from the header line.</li>
</ol>
<p>We’ve already seen the <code>for</code> loop which follows this pattern.</p>
<p>So looking again at the function definition, the keyword in the header is <code>def</code>, which is followed by the name of the function and some <em>parameters</em> enclosed in parentheses. The parameter list may be empty, or it may contain any number of parameters separated from one another by commas. In either case, the parentheses are required. The parameters specifies what information, if any, we have to provide in order to use the new function.</p>
<p>Suppose we’re working with turtles, and a common operation we need is to draw squares. “Draw a square” is an <em>abstraction</em>, or a mental chunk, of a number of smaller steps. So let’s write a function to capture the pattern of this “building block”:</p>
<p>Suppose we are writing a program to calculate the amount of tip due on a bill. We might write a function to “calculate tip”. “calculate tip” is an <em>abstraction</em>, or a mental chunk, of a number of smaller steps. So let’s write a function to capture the pattern of this “building block”:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> calculate_tip(bill, pct):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Calculate the tip on a bill, given the pct of the tip.</span>
<span class="co">    &quot;&quot;&quot;</span>
    
    tip = bill * (pct * .<span class="dv">01</span>) <span class="co"># convert pct to a decimal and calculate</span>
    tip = <span class="dt">round</span>(tip, <span class="dv">2</span>) <span class="co"># round the tip to 2 decimal places</span>
    total = tip + bill

    <span class="co"># now show the results to the user</span>
    <span class="dt">print</span>(<span class="st">&quot;Bill total: $&quot;</span> + <span class="dt">str</span>(bill))
    <span class="dt">print</span>(<span class="st">&quot;Tip percentage: &quot;</span> + <span class="dt">str</span>(pct) + <span class="st">&quot;%&quot;</span>)
    <span class="dt">print</span>(<span class="st">&quot;Tip amount due: $&quot;</span> + <span class="dt">str</span>(total))

<span class="co"># find the amount of an 18% tip on a $100 bill</span>
calculate_tip(<span class="dv">100</span>,<span class="dv">18</span>)</code></pre></td></tr></table>
<aside id="docstrings">
<p><strong>Docstrings for documentation</strong></p>
<p>If the first thing after the function header is a string, it is treated as a <strong>docstring</strong> and gets special treatment in Python and in some programming tools. For example, when we type a built-in function name with an unclosed parenthesis in PyScripter, a tooltip pops up, telling us what arguments the function takes, and it shows us any other text contained in the docstring.</p>
<p>Docstrings are the key way to document our functions in Python and the documentation part is important. Because whoever calls our function shouldn’t have to need to know what is going on in the function or how it works; they just need to know what arguments our function takes, what it does, and what the expected result is. Enough to be able to use the function without having to look underneath. This goes back to the concept of abstraction of which we’ll talk more about.</p>
<p>Docstrings are usually formed using triple-quoted strings as they allow us to easily expand the docstring later on should we want to write more than a one-liner.</p>
Just to differentiate from comments, a string at the start of a function (a docstring) is retrievable by Python tools <em>at runtime</em>. By contrast, comments are completely eliminated when the program is parsed.
</aside>

<p>This function is named <code>calculate_tip</code>. It has two parameters: one to tell the function the amount of the bill, and the other to tell it the percent tip to calculate. Make sure you know where the body of the function ends — it depends on the indentation, and the blank lines don’t count for this purpose!</p>
<p>Defining a new function does not make the function run. To do that we need a <strong>function call</strong>. We’ve already seen how to call some built-in functions like <strong>print</strong>, <strong>range</strong>, <strong>round</strong>, and <strong>int</strong>. Function calls contain the name of the function being executed followed by a list of values, called <em>arguments</em>, which are assigned to the parameters in the function definition. So in the last line of the example program above, we call the function, and pass <code>100</code> as the amount of the bill and <code>18</code> as the percentage of the tip. While the function is executing, then, the variable <code>bill</code> refers to the value 100, and the variable <code>pct</code> refers to 18.</p>
<p>Once we’ve defined a function, we can call it as often as we like, and its statements will be executed each time we call it. And we could use it to get any of our turtles to draw a square. In the next example, we calculate 3 different tip amounts for the same bill.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> calculate_tip(bill, pct):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Calculate the tip on a bill, given the pct of the tip.</span>
<span class="co">    &quot;&quot;&quot;</span>
    
    tip = bill * (pct * .<span class="dv">01</span>) <span class="co"># convert pct to a decimal and calculate</span>
    tip = <span class="dt">round</span>(tip, <span class="dv">2</span>) <span class="co"># round the tip to 2 decimal places</span>
    total = tip + bill

    <span class="co"># now show the results to the user</span>
    <span class="dt">print</span>(<span class="st">&quot;Bill total: $&quot;</span> + <span class="dt">str</span>(bill))
    <span class="dt">print</span>(<span class="st">&quot;Tip percentage: &quot;</span> + <span class="dt">str</span>(pct) + <span class="st">&quot;%&quot;</span>)
    <span class="dt">print</span>(<span class="st">&quot;Tip amount due: $&quot;</span> + <span class="dt">str</span>(total))

myBill = <span class="dv">100</span>
calculate_tip(myBill, <span class="dv">15</span>)
calculate_tip(myBill, <span class="dv">18</span>)
calculate_tip(myBill, <span class="dv">20</span>)</code></pre></td></tr></table>
<aside id="coding-style">

<p><strong>Coding Style</strong></p>
<p>Now that you are about to write longer, more complex pieces of Python, it is a good time to talk about coding style. Most languages can be written (or more concise, formatted) in different styles; some are more readable than others. Making it easy for others to read your code is always a good idea, and adopting a nice coding style helps tremendously for that.</p>
<p>For Python, <a href="http://www.python.org/dev/peps/pep-0008/">PEP 8 has emerged as the style guide</a> that most projects adhere to; it promotes a very readable and eye-pleasing coding style. Every Python developer should read it at some point; here are the most important points extracted for you:</p>
<ul>
<li>Use 4-space indentation, and no tabs.</li>
<li>4 spaces are a good compromise between small indentation (allows greater nesting depth) and large indentation (easier to read). Tabs introduce confusion, and are best left out.</li>
<li>Wrap lines so that they don’t exceed 79 characters.</li>
<li>This helps users with small displays and makes it possible to have several code files side-by-side on larger displays.</li>
<li>Use blank lines to separate functions and classes, and larger blocks of code inside functions.</li>
<li>When possible, put comments on a line of their own.</li>
<li>Use docstrings.</li>
<li>Use spaces around operators and after commas, but not directly inside bracketing constructs: a = f(1, 2) + g(3, 4).</li>
<li>Name your classes and functions consistently; the convention is to use CamelCase for classes and lower_case_with_underscores for functions and methods. Always use self as the name for the first method argument (see A First Look at Classes for more on classes and methods).</li>
<li>Don’t use fancy encodings if your code is meant to be used in international environments. Python’s default, UTF-8, or even plain ASCII work best in any case.</li>
<li>Likewise, don’t use non-ASCII characters in identifiers if there is only the slightest chance people speaking a different language will read or maintain the code.</li>
</ul>
</aside>

</section>
<section id="composition-functions-can-call-other-functions" class="level2">
<h2>Composition: Functions can call other functions</h2>
<p>So far, we have looked at the elements of a program—<code>variables</code>, <code>expressions</code>, and <code>statements</code>—in isolation, without talking about how to combine them.</p>
<p>One of the most useful features of programming languages is their ability to take small building blocks and <strong>compose</strong> them. In our calculate_tip example, we call several Python built-in functions: <code>round</code> to keep our amounts to 2 decimal places and <code>str</code> to convert numeric data (ints and floats) to strings when we print them. As we will see, we can compose our programs of many functions that we define ourselves.</p>
<p>There are some points worth noting here:</p>
<ul>
<li>Functions can call other functions.</li>
<li>A caller of this function might say <code>calculate_tip(myBill, 15)</code>. The parameters of this function, <code>bill</code> and <code>tip</code>, are assigned the values of the myBill variable, and the int literal 15, respectively.</li>
<li>In the body of the function they are just like any other variable.</li>
</ul>
<p>So far, it may not be clear why it is worth the trouble to create all of these new functions. Actually, there are a lot of reasons, but this example demonstrates two:</p>
<ol type="1">
<li>Creating a new function gives us an opportunity to name a group of statements. Functions can simplify a program by hiding a complex computation behind a single command. The function (including its name) can capture our mental chunking, or <em>abstraction</em>, of the problem.<br /></li>
<li>Creating a new function can make a program smaller by eliminating repetitive code.</li>
</ol>
<p>As we might expect, we have to create a function before we can execute it. In other words, the function definition has to be executed before the function is called.</p>
</section>
<section id="flow-of-execution" class="level2">
<h2>Flow of execution</h2>
<p>In order to ensure that a function is defined before its first use, we have to know the order in which statements are executed, which is called the <strong>flow of execution</strong>.</p>
<p>Execution always begins at the first statement of the program. Statements are executed one at a time, in order from top to bottom.</p>
<p>Function definitions do not alter the flow of execution of the program, but remember that statements inside the function are not executed until the function is called. Although it is not common, we can define one function inside another. In this case, the inner definition isn’t executed until the outer function is called.</p>
<p>Function calls are like a detour in the flow of execution. Instead of going to the next statement, the flow jumps to the first line of the called function, executes all the statements there, and then comes back to pick up where it left off.</p>
<p>That sounds simple enough, until we remember that one function can call another. While in the middle of one function, the program might have to execute the statements in another function. But while executing that new function, the program might have to execute yet another function!</p>
<p>Fortunately, Python is adept at keeping track of where it is, so each time a function completes, the program picks up where it left off in the function that called it. When it gets to the end of the program, it terminates.</p>
<p>What’s the moral of this sordid tale? When we read a program, don’t read from top to bottom. Instead, follow the flow of execution.</p>
</section>
<section id="functions-that-require-arguments" class="level2">
<h2>Functions that require arguments</h2>
<p>Most functions require arguments: the arguments provide for generalization. For example, if we want to find the absolute value of a number, we have to indicate what the number is. Python has a built-in function for computing the absolute value:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">abs</span>(<span class="dv">5</span>)
<span class="dv">5</span>
&gt;&gt;&gt; <span class="dt">abs</span>(-<span class="dv">5</span>)
<span class="dv">5</span></code></pre>
<p>In this example, the arguments to the <code>abs</code> function are 5 and -5.</p>
<p>Some functions take more than one argument. For example the built-in function <code>round</code> takes two arguments, the number to round and the (optional) number of decimal digits of precision. Inside the function, the values that are passed get assigned to variables called <strong>parameters</strong>.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">round</span>(<span class="fl">3.14159</span>)
<span class="dv">3</span>
&gt;&gt;&gt; <span class="dt">round</span>(<span class="fl">3.14159</span>,<span class="dv">3</span>)
<span class="fl">3.142</span></code></pre>
<p>Another built-in function that takes more than one argument is <code>max</code>.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">max</span>(<span class="dv">7</span>, <span class="dv">11</span>)
<span class="dv">11</span>
&gt;&gt;&gt; <span class="dt">max</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">17</span>, <span class="dv">2</span>, <span class="dv">12</span>)
<span class="dv">17</span>
&gt;&gt;&gt; <span class="dt">max</span>(<span class="dv">3</span> * <span class="dv">11</span>, <span class="dv">5</span>**<span class="dv">3</span>, <span class="dv">512</span> - <span class="dv">9</span>, <span class="dv">1024</span>**<span class="dv">0</span>)
<span class="dv">503</span></code></pre>
<p><code>max</code> can be passed any number of arguments, separated by commas, and will return the largest value passed. The arguments can be either simple values or expressions. In the last example, 503 is returned, since it is larger than 33, 125, and 1.</p>
</section>
<section id="functions-that-return-values" class="level2">
<h2>Functions that return values</h2>
<p>All the functions in the previous section return values. Furthermore, functions like <code>range</code>, <code>int</code>, <code>abs</code> all return values that can be used to build more complex expressions.</p>
<p>So an important difference between these functions and one like <code>calculate_tip</code> is that <code>calculate_tip</code> does not return a useful value — it computes a value and displays the results on the screen.</p>
<p>A function that returns a value is called a <strong>fruitful function</strong> in this book. The opposite of a fruitful function is <strong>void function</strong> — one that is not executed for its resulting value, but is executed because it does something useful. (Languages like Java, C#, C and C++ use the term “void function”, other languages like Pascal call it a <strong>procedure</strong>.) Even though void functions are not executed for their resulting value, Python always wants to return something. So if the programmer doesn’t arrange to return a value, Python will automatically return the value <code>None</code>.</p>
<p>How do we write our own fruitful function? Let’s look at the standard formula for compound interest as an example fo a fruitful function:</p>
<figure>
<img src="figs/compoundInterest.png" />
</figure>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> final_amt(p, r, n, t):
   <span class="co">&quot;&quot;&quot;</span>
<span class="co">     Apply the compound interest formula to p</span>
<span class="co">      to produce the final amount.</span>
<span class="co">   &quot;&quot;&quot;</span>
   
   a = p * (<span class="dv">1</span> + r/n) ** (n*t)
   <span class="kw">return</span> a         <span class="co"># This is new, and makes the function fruitful.</span>
             
<span class="co"># now that we have the function above, let us call it.  </span>
toInvest = <span class="dt">float</span>(<span class="dt">input</span>(<span class="st">&quot;How much do you want to invest?&quot;</span>))
fnl = final_amt(toInvest, <span class="fl">0.08</span>, <span class="dv">12</span>, <span class="dv">5</span>)
<span class="dt">print</span>(<span class="st">&quot;At the end of the period you&#39;ll have&quot;</span>, fnl)</code></pre></td></tr></table>
<ul>
<li>The <strong>return</strong> statement is followed an expression (<code>a</code> in this case). This expression will be evaluated and returned to the caller as the “fruit” of calling this function.</li>
<li>We prompted the user for the principal amount. The type of <code>toInvest</code> is a string, but we need a number before we can work with it. Because it is money, and could have decimal places, we’ve used the <code>float</code> type converter function to parse the string and return a float.</li>
<li>Notice how we entered the arguments for 8% interest, compounded 12 times per year, for 5 years.</li>
<li><p>When we run this, we get the output</p>
<p><em>At the end of the period you’ll have 14898.457083</em></p></li>
</ul>
<p>This is a bit messy with all these decimal places, but remember that Python doesn’t understand that we’re working with money: it just does the calculation to the best of its ability, without rounding. Later we’ll see how to format the string that is printed in such a way that it does get nicely rounded to two decimal places before printing. * The line <code>toInvest = float(input(&quot;How much do you want to invest?&quot;))</code> also shows yet another example of <em>composition</em> — we can call a function like <code>float</code>, and its arguments can be the results of other function calls (like <code>input</code>) that we’ve called along the way.</p>
<p>Notice something else very important here. The name of the variable we pass as an argument — <code>toInvest</code> — has nothing to do with the name of the parameter — <code>p</code>. It is as if <code>p = toInvest</code> is executed when <code>final_amt</code> is called. It doesn’t matter what the value was named in the caller, in <code>final_amt</code> its name is <code>p</code>.</p>
<p>These short variable names are getting quite tricky, so perhaps we’d prefer one of these versions instead:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> final_amt_v2(principalAmount, nominalPercentageRate, 
                                   numTimesPerYear, years):
   a = principalAmount * (<span class="dv">1</span> + nominalPercentageRate / 
                        numTimesPerYear) ** (numTimesPerYear*years)
   <span class="kw">return</span> a
   
<span class="kw">def</span> final_amt_v3(amt, rate, compounded, years):
   a = amt * (<span class="dv">1</span> + rate/compounded) ** (componded*years)
   <span class="kw">return</span> a</code></pre></td></tr></table>
<p>They all do the same thing. Use your judgement to write code that can be best understood by other humans!<br />Short variable names are more economical and sometimes make code easier to read: E = mc<sup>2</sup> would not be nearly so memorable if Einstein had used longer variable names! If you do prefer short names, make sure you also have some comments to enlighten the reader about what the variables are used for.</p>
<hr />
<p>When we create a <strong>local variable</strong> inside a function, it only exists inside the function, and we cannot use it outside. For example, consider again this function:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> final_amt(p, r, n, t):
   a = p * (<span class="dv">1</span> + r/n) ** (n*t)
   <span class="kw">return</span> a           </code></pre></td></tr></table>
<p>If we try to use <code>a</code>, outside the function, we’ll get an error:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a
<span class="ot">NameError</span>: name <span class="st">&#39;a&#39;</span> is not defined</code></pre>
<p>The variable <code>a</code> is local to <code>final_amt</code>, and is not visible outside the function.</p>
<p>Additionally, <code>a</code> only exists while the function is being executed — we call this its <strong>lifetime</strong>. When the execution of the function terminates, the local variables are destroyed.</p>
<p>Parameters are also local, and act like local variables. For example, the lifetimes of <code>p</code>, <code>r</code>, <code>n</code>, <code>t</code> begin when <code>final_amt</code> is called, and the lifetime ends when the function completes its execution.</p>
<p>So it is not possible for a function to set some local variable to a value, complete its execution, and then when it is called again next time, recover the local variable. Each call of the function creates new local variables, and their lifetimes expire when the function returns to the caller.</p>
</section>
<section id="tips-revisited" class="level2">
<h2>Tips Revisited</h2>
<p>Now that we have fruitful functions, we can focus our attention on reorganizing our code so that it fits more nicely into our mental chunks.<br />This process of rearrangement is called <strong>refactoring</strong> the code.</p>
<p>Two things we want to do in our tip calculator is to find the amount of the tip and show the results to the user. In the example below, we separate the various functions of the program to make a more complete tip calculator. As you’ll see, we’re starting to build code that is useful. Using functions allows us to make changes to one part of a program without affecting other parts of the program. For example, we can change the welcome message without worrying about breaking our calculations.</p>
<p>The trick about refactoring code is to anticipate which things we are likely to want to change each time we call the function: these should become the parameters, or changeable parts, of the functions we write.</p>
<p><a href="examples/tip2.py">Download and run the source code: tip2.py</a></p>
<section id="case-study-tip-calculator" class="level3">
<h3>Case Study: Tip Calculator</h3>
<aside id="tip_header" style="top: 110px">

<p>Brief header <strong>comments</strong> at the top of the <strong>source file</strong> identify basic information about the program and the file. Comments are messages for programmers who read the <strong>source code</strong> — they do not affect the execution of the program.</p>
</aside>

<aside id="tip_welcome" style="top: 173px">

<p><strong>weclcome</strong> is a very simple <strong>function</strong> — it does not accept any data in the form of <strong>function paramters</strong> and it does not <strong>return</strong> any data using a <strong>return statement</strong>. It simply prints out a message to the console.</p>
</aside>

<aside id="tip_calc" style="top: 354px">

<p>The <strong>calc_tip</strong> function has 2 <strong>parameters</strong>: <code>bill</code> and <code>pct</code>. These parameters become variables within the <strong>function body</strong>. Line 22 uses <strong>arithmetic operators</strong> (multiplication here) to calculate a new value and store it in the <code>tip</code> <strong>variable</strong>. <code>tip</code> is rounded to 2 decimal places using the <strong>built-in function</strong> <code>round()</code>. Finally, the rounded tip amount is returned.</p>
</aside>

<aside id="tip_get_pct" style="top: 545px">

<p><strong>get_bill_amt</strong> is a <strong>fruitful function</strong> because it has a <strong>return statement</strong>. It uses the <strong>built-in function</strong> <code>input()</code> to ask for data from the user of the program. — when it is called it returns the bill</p>
</aside>

<aside id="tip_get_amt" style="top: 710px">

<p><strong>get_tip_pct</strong> is similar to <strong>get_bill_amt</strong>. It requests user data by calling the <code>input</code> function and then returns a result. Notice that the <strong>multi-line string</strong> inside of 3 quotation marks (“”“) makes it easy to read and write formatted data.</p>
<p>This function uses a series of <strong>if statements</strong> to interpret the user’s choice from a menu. While we could use <code>elif</code> to change the conditions together, it is not needed here. Once a <code>return</code> statement is reached, no further conditions can be tested or executed. If none of the <code>if</code> conditions are met, this function returns -1 to indicate that an invalid choice was entered.</p>
</aside>

<aside id="tip_get_amt" style="top: 1125px">

<p><strong>show_results</strong> defines <strong>parameters</strong> which are used to pass in all of the data needed to show the results of the tip calculation. Notice that the <code>print</code> statements use the <strong>+ operator</strong> to <abbr title="join together">concatenate</abbr> strings. Because we are joining <strong>string literals</strong> with variables of type <code>int</code> and <code>float</code>, we need to use the <code>str()</code> function to convert the numeric data to strings.</p>
</aside>

<aside id="tip_main" style="top: 1430px">
<p>The <strong>main</strong> function is the first function called for this program. It maintains the executive control of the program, calling other functions in sequence and passing data between functions.</p>
<p>We encounter Python’s special syntax for running a program from the <strong>command line</strong>:</p>
<p><code>if __name__ == &quot;__main__&quot;:</code></p>
<p>This <strong>conditional statement</strong> allows the program to execute code if it is being run as a standalone Python program. In our case, we choose to call the <code>main</code> function which we defined. main() has no special meaning in Python — we could execute any statements we choose under that block.</p>
</aside>


<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="co"># tip2.py</span>
<span class="co"># example of an interactive tip calculator</span>
<span class="co"># by: mxc</span>

<span class="kw">def</span> welcome():
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Give the user a welcome message.</span>
<span class="co">    &quot;&quot;&quot;</span>
    <span class="dt">print</span>(<span class="st">&quot;&quot;&quot;</span>

<span class="st">-----------------------------------</span>
<span class="st">   Welcome to the Tip Calculator   </span>
<span class="st">-----------------------------------</span>
<span class="st">&quot;&quot;&quot;</span>)

<span class="kw">def</span> calc_tip(bill, pct):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Calculate the tip on a bill, given the pct of the tip.</span>
<span class="co">        Return the amount of the tip</span>
<span class="co">    &quot;&quot;&quot;</span>
    <span class="co"># convert pct to a decimal and calculate</span>
    tip = bill * (pct * .<span class="dv">01</span>)
    
    <span class="co"># round the tip to 2 decimal places</span>
    tip = <span class="dt">round</span>(tip, <span class="dv">2</span>) <span class="co"># round the tip to 2 decimal places</span>
    <span class="kw">return</span> tip

<span class="kw">def</span> get_bill_amt():
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Ask the user to enter the amount of the bill</span>
<span class="co">        and return this amount as a &lt;float&gt;</span>
<span class="co">    &quot;&quot;&quot;</span>
    amt = <span class="dt">input</span>(<span class="st">&quot;How much was your total bill: &quot;</span>)
    amt = <span class="dt">float</span>(amt)

    <span class="kw">return</span> amt

<span class="kw">def</span> get_tip_pct():
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Allow the user to choose a tip amount</span>
<span class="co">        from a menu.</span>
<span class="co">    &quot;&quot;&quot;</span>
    
    <span class="dt">print</span>(<span class="st">&quot;&quot;&quot;</span>
<span class="st">What percent tip do you want to leave?</span>
<span class="st">  1 - 10%, lousy service</span>
<span class="st">  2 - 15%, good service, but I&#39;m cheap</span>
<span class="st">  3 - 20%, the server is hard working and deserves a decent tip</span>
<span class="st">  4 - 25%, outstanding service&quot;&quot;&quot;</span>)

    menu = <span class="dt">input</span>(<span class="st">&quot;enter your choice (1-4):&quot;</span>)
    
    <span class="kw">if</span> menu == <span class="st">&quot;1&quot;</span>:
        <span class="kw">return</span> <span class="dv">10</span>
    <span class="kw">if</span> menu == <span class="st">&quot;2&quot;</span>:
        <span class="kw">return</span> <span class="dv">15</span>
    <span class="kw">if</span> menu == <span class="st">&quot;3&quot;</span>:
        <span class="kw">return</span> <span class="dv">20</span>
    <span class="kw">if</span> menu == <span class="st">&quot;4&quot;</span>:
        <span class="kw">return</span> <span class="dv">25</span>
    
    <span class="kw">return</span> -<span class="dv">1</span> <span class="co"># return -1 for any invalid choice</span>

<span class="kw">def</span> show_results(bill, tip, pct):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Prints a message to the user showing</span>
<span class="co">        the result of the calculations.</span>
<span class="co">    &quot;&quot;&quot;</span>
    
    total = tip + bill

    <span class="dt">print</span>(<span class="st">&quot;Bill amount: $&quot;</span> + <span class="dt">str</span>(bill))
    <span class="dt">print</span>(<span class="st">&quot;Tip percentage: &quot;</span> + <span class="dt">str</span>(pct) + <span class="st">&quot;%&quot;</span>)
    <span class="dt">print</span>(<span class="st">&quot;Tip amount due: $&quot;</span> + <span class="dt">str</span>(tip))
    <span class="dt">print</span>(<span class="st">&quot;Total with tip: $&quot;</span> + <span class="dt">str</span>(total))

    <span class="dt">print</span>(<span class="st">&quot;&quot;&quot;</span>
<span class="st">-----------------------------------</span>
<span class="st">             GOOD BYE      </span>
<span class="st">-----------------------------------</span>
<span class="st">&quot;&quot;&quot;</span>)

<span class="kw">def</span> main():
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Read in the basic information, calcualte the tip</span>
<span class="co">        and the share, then dispaly the results to the user.</span>
<span class="co">    &quot;&quot;&quot;</span>
    
    welcome()
    myBill = get_bill_amt()
    pct = get_tip_pct()
    tip = calc_tip(myBill, pct)
    show_results(myBill, tip, pct)


<span class="kw">if</span> <span class="ot">__name__</span> == <span class="st">&quot;__main__&quot;</span>:
    main()</code></pre></td></tr></table>
</section>
</section>
<section id="glossary-3" class="level2">
<h2>Glossary</h2>
<dl>
<dt>argument</dt>
<dd><p>A value provided to a function when the function is called. This value is assigned to the corresponding parameter in the function. The argument can be the result of an expression which may involve operators, operands and calls to other fruitful functions.</p>
</dd>
<dt>body</dt>
<dd><p>The second part of a compound statement. The body consists of a sequence of statements all indented the same amount from the beginning of the header. The standard amount of indentation used within the Python community is 4 spaces.</p>
</dd>
<dt>compound statement</dt>
<dd><p>A statement that consists of two parts:</p>
<ol type="1">
<li>header - which begins with a keyword determining the statement type, and ends with a colon.</li>
<li>body - containing one or more statements indented the same amount from the header.</li>
</ol>
<p>The syntax of a compound statement looks like this:</p>
<pre class="sourceCode python"><code class="sourceCode python">keyword ... :
    statement
    statement ...</code></pre>
</dd>
<dt>docstring</dt>
<dd><p>A special string that is attached to a function as its <code>__doc__</code> attribute. Tools like PyScripter can use docstrings to provide documentation or hints for the programmer. When we get to modules, classes, and methods, we’ll see that docstrings can also be used there.</p>
</dd>
<dt>flow of execution</dt>
<dd><p>The order in which statements are executed during a program run.</p>
</dd>
<dt>frame</dt>
<dd><p>A box in a stack diagram that represents a function call. It contains the local variables and parameters of the function.</p>
</dd>
<dt>function</dt>
<dd><p>A named sequence of statements that performs some useful operation. Functions may or may not take parameters and may or may not produce a result.</p>
</dd>
<dt>function call</dt>
<dd><p>A statement that executes a function. It consists of the name of the function followed by a list of arguments enclosed in parentheses.</p>
</dd>
<dt>function composition</dt>
<dd><p>Using the output from one function call as the input to another.</p>
</dd>
<dt>function definition</dt>
<dd><p>A statement that creates a new function, specifying its name, parameters, and the statements it executes.</p>
</dd>
<dt>fruitful function</dt>
<dd><p>A function that returns a value when it is called.</p>
</dd>
<dt>header line</dt>
<dd><p>The first part of a compound statement. A header line begins with a keyword and ends with a colon (:)</p>
</dd>
<dt>import statement</dt>
<dd><p>A statement which permits functions and variables defined in another Python module to be brought into the environment of another script. To use the features of the turtle, we need to first import the turtle module.</p>
</dd>
<dt>lifetime</dt>
<dd><p>Variables and objects have lifetimes — they are created at some point during program execution, and will be destroyed at some time.</p>
</dd>
<dt>local variable</dt>
<dd><p>A variable defined inside a function. A local variable can only be used inside its function. Parameters of a function are also a special kind of local variable.</p>
</dd>
<dt>parameter</dt>
<dd><p>A name used inside a function to refer to the value which was passed to it as an argument.</p>
</dd>
<dt>refactor</dt>
<dd><p>A fancy word to describe reorganizing our program code, usually to make it more understandable. Typically, we have a program that is already working, then we go back to “tidy it up”. It often involves choosing better variable names, or spotting repeated patterns and moving that code into a function.</p>
</dd>
<dt>stack diagram</dt>
<dd><p>A graphical representation of a stack of functions, their variables, and the values to which they refer.</p>
</dd>
<dt>traceback</dt>
<dd><p>A list of the functions that are executing, printed when a runtime error occurs. A traceback is also commonly refered to as a <em>stack trace</em>, since it lists the functions in the order in which they are stored in the <code>runtime stack &lt;http://en.wikipedia.org/wiki/Runtime_stack&gt;</code>__.</p>
</dd>
<dt>void function</dt>
<dd><p>The opposite of a fruitful function: one that does not return a value. It is executed for the work it does, rather than for the value it returns.</p>
</dd>
</dl>
</section>
<section id="exercises-2" class="level2">
<h2>Exercises</h2>
<ol type="1">
<li><p>Write a void (non-fruitful) function to that prints out centered text to the console. Your function should have two parameters, <code>text</code>—the string to center, and <code>maxLen</code>—the width of the document (in spaces).<br />(Hint: you will want to use the built-in <code>len</code> function and might want to use the * operator with spaces.)</p></li>
<li><p>Write a function <code>area_of_circle(r)</code> which returns the area of a circle of radius <code>r</code>.<br />(Hint: if you can’t remember how to find the area of a circle, look it up or ask a friend.)</p></li>
<li><p><em>Lemonade Stand</em>. Diego has a lemonade stand and he needs a program to estimate costs. Write a Python program called lemonade.py that allows him to see potential profits for his stand. Use the following skeleton to start your program:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> estimate_profit(lemonCost, cupCost, estPeople, price):
    <span class="co"># write a doc string</span>
    <span class="co"># write the code</span>
    <span class="co"># return the estimate</span>

<span class="kw">def</span> main():
    l = .<span class="dv">3</span>
    c = .<span class="dv">15</span>
    n = <span class="dv">100</span>
    p = <span class="fl">2.50</span>
    profit = estimate_profit(l, c, n, p)
    show_results(l, c, n, p, price) <span class="co"># you need to define this one yourself</span>

<span class="kw">if</span> <span class="ot">__name__</span> == <span class="st">&quot;__main__&quot;</span>:
    main()</code></pre></td></tr></table></li>
</ol>
</section>
</section>
<section id="iteration" class="level1">
<h1>Iteration</h1>
<p>Computers are often used to automate repetitive tasks. Repeating identical or similar tasks without making errors is something that computers do well and people do poorly.</p>
<p>Repeated execution of a set of statements is called <strong>iteration</strong>. Because iteration is so common, Python provides several language features to make it easier. The <code>for</code> loop is the form of iteration you’ll likely be using most often, and we will look at that first. But in this chapter we’ve going to look at the <code>while</code> statement — another way to have your program do iteration, useful in slightly different circumstances.</p>
<section id="the-for-loop" class="level2">
<h2>The <code>for</code> loop</h2>
<p>A basic building block of all programs is to be able to repeat some code, over and over again. Python’s <strong>for</strong> loop solves this for us. Let’s say we have some friends, and we’d like to send them each an email inviting them to our party. We don’t quite know how to send email yet, so for the moment we’ll just print a message for each friend:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> f in [<span class="st">&quot;Joe&quot;</span>,<span class="st">&quot;Zoe&quot;</span>,<span class="st">&quot;Brad&quot;</span>,<span class="st">&quot;Angelina&quot;</span>,<span class="st">&quot;Zuki&quot;</span>,<span class="st">&quot;Thandi&quot;</span>,<span class="st">&quot;Paris&quot;</span>]:
    invite = <span class="st">&quot;Hi &quot;</span> + f + <span class="st">&quot;.  Please come to my party on Saturday!&quot;</span>
    <span class="dt">print</span>(invite)
<span class="co"># more code can follow here …            </span></code></pre></td></tr></table>
<p>When we run this, the output looks like this:</p>
<pre><code>Hi Joe.  Please come to my party on Saturday!
Hi Zoe.  Please come to my party on Saturday!
Hi Brad.  Please come to my party on Saturday!
Hi Angelina.  Please come to my party on Saturday!
Hi Zuki.  Please come to my party on Saturday!
Hi Thandi.  Please come to my party on Saturday!
Hi Paris.  Please come to my party on Saturday! </code></pre>
<ul>
<li>The variable <code>f</code> in the <code>for</code> statement at line 1 is called the <strong>loop variable</strong>.<br /> We could have chosen any other variable name instead.</li>
<li>Lines 2 and 3 are the <strong>loop body</strong>. The loop body is always indented. The indentation determines exactly what statements are “in the body of the loop”.</li>
<li>On each <em>iteration</em> or <em>pass</em> of the loop, first a check is done to see if there are still more items to be processed. If there are none left (this is called the <strong>terminating condition</strong> of the loop), the loop has finished. Program execution continues at the next statement after the loop body, (e.g. in this case the next statement below the comment in line 4).<br /></li>
<li>If there are items still to be processed, the loop variable is updated to refer to the next item in the list. This means, in this case, that the loop body is executed here 7 times, and each time <code>f</code> will refer to a different friend.</li>
<li>At the end of each execution of the body of the loop, Python returns to the <code>for</code> statement, to see if there are more items to be handled, and to assign the next one to <code>f</code>.</li>
</ul>
</section>
<section id="flow-of-execution-of-the-for-loop" class="level2">
<h2>Flow of Execution of the for loop</h2>
<p>As a program executes, the interpreter always keeps track of which statement is about to be executed. We call this the <strong>control flow</strong>, of the <strong>flow of execution</strong> of the program. When humans execute programs, they often use their finger to point to each statement in turn. So we could think of control flow as “Python’s moving finger”.</p>
<p>Control flow until now has been strictly top to bottom, one statement at a time. The <code>for</code> loop changes this.</p>
<aside id="for-loop-flow">
<p><strong>Flowchart of a <code>for</code> loop</strong></p>
<p>Control flow is often easy to visualize and understand if we draw a flowchart. This shows the exact steps and logic of how the <code>for</code> statement executes.</p>
<figure>
<img src="figs/flowchart_for.png" />
</figure>
</aside>

</section>
<section id="assignment" class="level2">
<h2>Assignment</h2>
<p>As we have mentioned previously, it is legal to make more than one assignment to the same variable. A new assignment makes an existing variable refer to a new value (and stop referring to the old value).</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">airtime_remaining = <span class="dv">15</span>
<span class="dt">print</span>(airtime_remaining)
airtime_remaining = <span class="dv">7</span>
<span class="dt">print</span>(airtime_remaining)</code></pre></td></tr></table>
<p>The output of this program is:</p>
<pre><code>15
7</code></pre>
<p>because the first time <code>airtime_remaining</code> is printed, its value is 15, and the second time, its value is 7.</p>
<p>It is especially important to distinguish between an assignment statement and a Boolean expression that tests for equality. Because Python uses the equal token (<code>=</code>) for assignment, it is tempting to interpret a statement like <code>a = b</code> as a Boolean test. Unlike mathematics, it is not! Remember that the Python token for the equality operator is <code>==</code>.</p>
<p>Note too that an equality test is symmetric, but assignment is not. For example, if <code>a == 7</code> then <code>7 == a</code>. But in Python, the statement <code>a = 7</code> is legal and <code>7 = a</code> is not.</p>
<p>In Python, an assignment statement can make two variables equal, but because further assignments can change either of them, they don’t have to stay that way:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">a = <span class="dv">5</span>
b = a    <span class="co"># After executing this line, a and b are now equal</span>
a = <span class="dv">3</span>    <span class="co"># After executing this line, a and b are no longer equal</span></code></pre></td></tr></table>
<p>The third line changes the value of <code>a</code> but does not change the value of <code>b</code>, so they are no longer equal. (In some programming languages, a different symbol is used for assignment, such as <code>&lt;-</code> or <code>:=</code>, to avoid confusion. Some people also think that <em>variable</em> was an unfortunae word to choose, and instead we should have called them <em>assignables</em>. Python chooses to follow common terminology and token usage, also found in languages like C, C++, Java, and C#, so we use the tokens <code>=</code> for assignment, <code>==</code> for equality, and we talk of <em>variables</em>.</p>
</section>
<section id="updating-variables" class="level2">
<h2>Updating variables</h2>
<p>When an assignment statement is executed, the right-hand side expression (i.e. the expression that comes after the assignment token) is evaluated first. This produces a value. Then the assignment is made, so that the variable on the left-hand side now refers to the new value.</p>
<p>One of the most common forms of assignment is an update, where the new value of the variable depends on its old value. Deduct 40 cents from my airtime balance, or add one run to the scoreboard.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">n = <span class="dv">5</span>
n = <span class="dv">3</span> * n + <span class="dv">1</span></code></pre></td></tr></table>
<p>Line 2 means <code>get the current value of n, multiply it by three and add one, and assign the answer to n, thus making n refer to the value</code>.<br />So after executing the two lines above, <code>n</code> will point/refer to the integer 16.</p>
<p>If you try to get the value of a variable that has never been assigned to, you’ll get an error:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; w = x + <span class="dv">1</span>
Traceback (most recent call last):
  File <span class="st">&quot;&lt;interactive input&gt;&quot;</span>, line <span class="dv">1</span>, in 
<span class="ot">NameError</span>: name <span class="st">&#39;x&#39;</span> is not defined</code></pre>
<p>Before you can update a variable, you have to <strong>initialize</strong> it to some starting value, usually with a simple assignment:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">runs_scored = <span class="dv">0</span>
...
runs_scored = runs_scored + <span class="dv">1</span></code></pre></td></tr></table>
<p>Line 3 — updating a variable by adding 1 to it — is very common.<br />It is called an <strong>increment</strong> of the variable; subtracting 1 is called a <strong>decrement</strong>.<br />Sometimes programmers also talk about <em>bumping</em> a variable, which means the same as incrementing it by 1.</p>
</section>
<section id="the-for-loop-revisited" class="level2">
<h2>The <code>for</code> loop revisited</h2>
<p>Recall that the <code>for</code> loop processes each item in a list. Each item in turn is (re-)assigned to the loop variable, and the body of the loop is executed. We saw this example earlier:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> f in [<span class="st">&quot;Joe&quot;</span>, <span class="st">&quot;Zoe&quot;</span>, <span class="st">&quot;Brad&quot;</span>, <span class="st">&quot;Angelina&quot;</span>, <span class="st">&quot;Zuki&quot;</span>, <span class="st">&quot;Thandi&quot;</span>, <span class="st">&quot;Paris&quot;</span>]:
    invitation = <span class="st">&quot;Hi &quot;</span> + f + <span class="st">&quot;.  Please come to my party on Saturday!&quot;</span>
    <span class="dt">print</span>(invitation) </code></pre></td></tr></table>
<p>Running through all the items in a list is called <strong>traversing</strong> the list, or <strong>traversal</strong>.</p>
<p>Let us write a function now to sum up all the elements in a list of numbers. Do this by hand first, and try to isolate exactly what steps you take. You’ll find you need to keep some “running total” of the sum so far, either on a piece of paper, in your head, or in your calculator. Remembering things from one step to the next is precisely why we have variables in a program: so we’ll need some variable to remember the “running total”. It should be initialized with a value of zero, and then we need to traverse the items in the list. For each item, we’ll want to update the running total by adding the next number to it.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> mysum(xs):
    <span class="co">&quot;&quot;&quot; Sum all the numbers in the list xs, and return the total. &quot;&quot;&quot;</span>
    running_total = <span class="dv">0</span>
    <span class="kw">for</span> x in xs:
        running_total = running_total + x
    <span class="kw">return</span> running_total

<span class="co"># Add tests like these to your test suite ...</span>
test(mysum([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]) == <span class="dv">10</span>)
test(mysum([<span class="fl">1.25</span>, <span class="fl">2.5</span>, <span class="fl">1.75</span>]) == <span class="fl">5.5</span>)
test(mysum([<span class="dv">1</span>, -<span class="dv">2</span>, <span class="dv">3</span>]) == <span class="dv">2</span>)
test(mysum([ ]) == <span class="dv">0</span>)
test(mysum(<span class="dt">range</span>(<span class="dv">11</span>)) == <span class="dv">55</span>)  <span class="co"># 11 is not included in the list.</span></code></pre></td></tr></table>
</section>
<section id="abbreviated-assignment" class="level2">
<h2>Abbreviated assignment</h2>
<p>Incrementing a variable is so common that Python provides an abbreviated syntax for it:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; count = <span class="dv">0</span>
&gt;&gt;&gt; count += <span class="dv">1</span>
&gt;&gt;&gt; count
<span class="dv">1</span>
&gt;&gt;&gt; count += <span class="dv">1</span>
&gt;&gt;&gt; count
<span class="dv">2</span></code></pre>
<p><code>count += 1</code> is an abreviation for <code>count = count + 1</code> . We pronounce the operator as <em>“plus-equals”</em>. The increment value does not have to be 1:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; n = <span class="dv">2</span>
&gt;&gt;&gt; n += <span class="dv">5</span>
&gt;&gt;&gt; n
<span class="dv">7</span></code></pre>
<p>There are similar abbreviations for <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>//=</code> and <code>%=</code>:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; n = <span class="dv">2</span>
&gt;&gt;&gt; n *= <span class="dv">5</span>
&gt;&gt;&gt; n
<span class="dv">10</span>
&gt;&gt;&gt; n -= <span class="dv">4</span>
&gt;&gt;&gt; n
<span class="dv">6</span>
&gt;&gt;&gt; n //= <span class="dv">2</span>
&gt;&gt;&gt; n
<span class="dv">3</span>
&gt;&gt;&gt; n %= <span class="dv">2</span>
&gt;&gt;&gt; n
<span class="dv">1</span></code></pre>
</section>
<section id="help-and-meta-notation" class="level2">
<h2>Help and meta-notation</h2>
<p>Python comes with extensive documentation for all its built-in functions, and its libraries. Different systems have different ways of accessing this help. In PyScripter, click on the <em>Help</em> menu item, and select <em>Python Manuals</em>. Then search for help on the built-in function <strong>range</strong>. You’ll get something like this:</p>
<figure>
<img src="figs/help_range.png" />
</figure>
<p>Notice the square brackets in the description of the arguments. These are examples of <strong>meta-notation</strong> — notation that describes Python syntax, but is not part of it. The square brackets in this documentation mean that the argument is <em>optional</em> — the programmer can omit it. So what this first line of help tells us is that <code>range</code> must always have a <code>stop</code> argument, but it may have an optional <code>start</code> argument (which must be followed by a comma if it is present), and it can also have an optional <code>step</code> argument, preceded by a comma if it is present.</p>
<p>The examples from help show that <code>range</code> can have either 1, 2 or 3 arguments. The list can start at any starting value, and go up or down in increments other than 1. The documentation here also says that the arguments must be integers.</p>
<p>Other meta-notation you’ll frequently encounter is the use of bold and italics. The bold means that these are tokens — keywords or symbols — typed into your Python code exactly as they are, whereas the italic terms stand for “something of this type”. So the syntax description</p>
<p><strong>for</strong> <em>variable</em> <strong>in</strong> <em>list</em> <strong>:</strong></p>
<p>means you can substitute any legal variable and any legal list when you write your Python code.</p>
<p>This (simplified) description of the <code>print</code> function, shows another example of meta-notation in which the ellipses (<code>...</code>) mean that you can have as many objects as you like (even zero), separated by commas:</p>
<p><strong>print( [<strong> <em>object,</em> … </strong>] )</strong></p>
<p>Meta-notation gives us a concise and powerful way to describe the <em>pattern</em> of some syntax or feature.</p>
</section>
<section id="tables" class="level2">
<h2>Tables</h2>
<p>One of the things loops are good for is generating tables. Before computers were readily available, people had to calculate logarithms, sines and cosines, and other mathematical functions by hand. To make that easier, mathematics books contained long tables listing the values of these functions. Creating the tables was slow and boring, and they tended to be full of errors.</p>
<p>When computers appeared on the scene, one of the initial reactions was, <em>“This is great! We can use the computers to generate the tables, so there will be no errors.”</em> That turned out to be true (mostly) but shortsighted. Soon thereafter, computers and calculators were so pervasive that the tables became obsolete.</p>
<p>Well, almost. For some operations, computers use tables of values to get an approximate answer and then perform computations to improve the approximation. In some cases, there have been errors in the underlying tables, most famously in the table the Intel Pentium processor chip used to perform floating-point division.</p>
<p>Although a log table is not as useful as it once was, it still makes a good example of iteration. The following program outputs a sequence of values in the left column and 2 raised to the power of that value in the right column:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> x in <span class="dt">range</span>(<span class="dv">13</span>):   <span class="co"># Generate numbers 0 to 12</span>
    <span class="dt">print</span>(x, <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dv">2</span>**x)</code></pre></td></tr></table>
<p>The string <code>&quot;\t&quot;</code> represents a <strong>tab character</strong>. The backslash character in <code>&quot;\t&quot;</code> indicates the beginning of an <strong>escape sequence</strong>. Escape sequences are used to represent invisible characters like tabs and newlines. The sequence <code>\n</code> represents a <strong>newline</strong>.</p>
<p>An escape sequence can appear anywhere in a string; in this example, the tab escape sequence is the only thing in the string. How do you think you represent a backslash in a string?</p>
<p>As characters and strings are displayed on the screen, an invisible marker called the <strong>cursor</strong> keeps track of where the next character will go. After a <code>print</code> function, the cursor normally goes to the beginning of the next line.</p>
<p>The tab character shifts the cursor to the right until it reaches one of the tab stops. Tabs are useful for making columns of text line up, as in the output of the previous program:</p>
<pre><code>0       1
1       2
2       4
3       8
4       16
5       32
6       64
7       128
8       256
9       512
10      1024
11      2048
12      4096</code></pre>
<p>Because of the tab characters between the columns, the position of the second column does not depend on the number of digits in the first column.</p>
</section>
<section id="two-dimensional-tables" class="level2">
<h2>Two-dimensional tables</h2>
<p>A two-dimensional table is a table where you read the value at the intersection of a row and a column. A multiplication table is a good example. Let’s say you want to print a multiplication table for the values from 1 to 6.</p>
<p>A good way to start is to write a loop that prints the multiples of 2, all on one line:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> i in <span class="dt">range</span>(<span class="dv">1</span>, <span class="dv">7</span>):
    <span class="dt">print</span>(<span class="dv">2</span> * i, end=<span class="st">&quot;   &quot;</span>)
<span class="dt">print</span>()</code></pre></td></tr></table>
<p>Here we’ve used the <code>range</code> function, but made it start its sequence at 1. As the loop executes, the value of <code>i</code> changes from 1 to 6. When all the elements of the range have been assigned to <code>i</code>, the loop terminates. Each time through the loop, it displays the value of <code>2 * i</code>, followed by three spaces.</p>
<p>Again, the extra <code>end=&quot;   &quot;</code> argument in the <code>print</code> function suppresses the newline, and uses three spaces instead. After the loop completes, the call to <code>print</code> at line 3 finishes the current line, and starts a new line.</p>
<p>The output of the program is:</p>
<pre><code>2      4      6      8      10     12Z</code></pre>
<p>So far, so good. The next step is to <strong>encapsulate</strong> and <strong>generalize</strong>.</p>
</section>
<section id="encapsulation-and-generalization" class="level2">
<h2>Encapsulation and generalization</h2>
<p>Encapsulation is the process of wrapping a piece of code in a function, allowing you to take advantage of all the things functions are good for. You have already seen some examples of encapsulation, including <code>is_divisible</code> in a previous chapter.</p>
<p>Generalization means taking something specific, such as printing the multiples of 2, and making it more general, such as printing the multiples of any integer.</p>
<p>This function encapsulates the previous loop and generalizes it to print multiples of <code>n</code>:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> print_multiples(n):
    <span class="kw">for</span> i in <span class="dt">range</span>(<span class="dv">1</span>, <span class="dv">7</span>):
        <span class="dt">print</span>(n * i, end=<span class="st">&quot;   &quot;</span>)
    <span class="dt">print</span>()</code></pre></td></tr></table>
<p>To encapsulate, all we had to do was add the first line, which declares the name of the function and the parameter list. To generalize, all we had to do was replace the value 2 with the parameter <code>n</code>.</p>
<p>If we call this function with the argument 2, we get the same output as before. With the argument 3, the output is:</p>
<pre><code>3      6      9      12     15     18</code></pre>
<p>With the argument 4, the output is:</p>
<pre><code>4      8      12     16     20     24</code></pre>
<p>By now you can probably guess how to print a multiplication table — by calling <code>print_multiples</code> repeatedly with different arguments. In fact, we can use another loop:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> i in <span class="dt">range</span>(<span class="dv">1</span>, <span class="dv">7</span>):
    print_multiples(i)</code></pre></td></tr></table>
<p>Notice how similar this loop is to the one inside <code>print_multiples</code>. All we did was replace the <code>print</code> function with a function call.</p>
<p>The output of this program is a multiplication table:</p>
<pre><code>1      2      3      4      5      6
2      4      6      8      10     12
3      6      9      12     15     18
4      8      12     16     20     24
5      10     15     20     25     30
6      12     18     24     30     36</code></pre>
</section>
<section id="more-encapsulation" class="level2">
<h2>More encapsulation</h2>
<p>To demonstrate encapsulation again, let’s take the code from the last section and wrap it up in a function:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> print_mult_table():
    <span class="kw">for</span> i in <span class="dt">range</span>(<span class="dv">1</span>, <span class="dv">7</span>):
        print_multiples(i)</code></pre></td></tr></table>
<p>This process is a common <strong>development plan</strong>. We develop code by writing lines of code outside any function, or typing them in to the interpreter. When we get the code working, we extract it and wrap it up in a function.</p>
<p>This development plan is particularly useful if you don’t know how to divide the program into functions when you start writing. This approach lets you design as you go along.</p>
</section>
<section id="local-variables" class="level2">
<h2>Local variables</h2>
<p>You might be wondering how we can use the same variable, <code>i</code>, in both <code>print_multiples</code> and <code>print_mult_table</code>. Doesn’t it cause problems when one of the functions changes the value of the variable?</p>
<p>The answer is no, because the <code>i</code> in <code>print_multiples</code> and the <code>i</code> in <code>print_mult_table</code> are <em>not</em> the same variable.</p>
<p>Variables created inside a function definition are local; you can’t access a local variable from outside its home function. That means you are free to have multiple variables with the same name as long as they are not in the same function.</p>
<p>Python examines all the statements in a function — if any of them assign a value to a variable, that is the clue that Python uses to make the variable a local variable.</p>
<p>The stack diagram for this program shows that the two variables named <code>i</code> are not the same variable. They can refer to different values, and changing one does not affect the other.</p>
<figure>
<img src="figs/stack2.png" title="Stack 2 diagram" />
</figure>
<p>The value of <code>i</code> in <code>print_mult_table</code> goes from 1 to 6. In the diagram it happens to be 3. The next time through the loop it will be 4. Each time through the loop, <code>print_mult_table</code> calls <code>print_multiples</code> with the current value of <code>i</code> as an argument. That value gets assigned to the parameter <code>n</code>.</p>
<p>Inside <code>print_multiples</code>, the value of <code>i</code> goes from 1 to 6. In the diagram, it happens to be 2. Changing this variable has no effect on the value of <code>i</code> in <code>print_mult_table</code>.</p>
<p>It is common and perfectly legal to have different local variables with the same name. In particular, names like <code>i</code> and <code>j</code> are used frequently as loop variables. If you avoid using them in one function just because you used them somewhere else, you will probably make the program harder to read.</p>
<p>The visualizer at http://netserv.ict.ru.ac.za/python3_viz/ shows very clearly how the two variables <code>i</code> are distinct variables, and how they have independent values.</p>
<p>.. index:: break statement, statement: break</p>
</section>
<section id="the-break-statement" class="level2">
<h2>The <code>break</code> statement</h2>
<p>The <strong>break</strong> statement is used to immediately leave the body of its loop. The next statement to be executed is the first one after the body:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> i in [<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">24</span>, <span class="dv">29</span>]: 
    <span class="kw">if</span> i % <span class="dv">2</span> == <span class="dv">1</span>:  <span class="co"># If the number is odd</span>
       <span class="kw">break</span>        <span class="co">#  ... immediately exit the loop</span>
    <span class="dt">print</span>(i)
<span class="dt">print</span>(<span class="st">&quot;done&quot;</span>)</code></pre></td></tr></table>
<p>This prints:</p>
<pre><code>12
16
done</code></pre>
<aside id="loop-pretest">

<p><strong>The pre-test loop — standard loop behaviour</strong></p>
<p><code>for</code> loops do their tests at the start, before executing any part of the body. This is called a <strong>pre-test</strong> loops, because the test happens before (pre) the body.</p>
<p><code>break</code> and <code>return</code> are our tools for adapting this standard behaviour by enabling us to test a condition in the body of the loop that allows us to exit the loop.</p>
<figure>
<img src="figs/pre_test_loop.png" />
</figure>
</aside>
    
</section>
<section id="the-continue-statement" class="level2">
<h2>The <code>continue</code> statement</h2>
<p>This is a control flow statement that causes the program to immediately skip the processing of the rest of the body of the loop, <em>for the current iteration</em>. But the loop still carries on running for its remaining iterations:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> i in [<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">24</span>, <span class="dv">29</span>, <span class="dv">30</span>]: 
    <span class="kw">if</span> i % <span class="dv">2</span> == <span class="dv">1</span>:      <span class="co"># If the number is odd</span>
       <span class="kw">continue</span>         <span class="co"># Don&#39;t process it</span>
    <span class="dt">print</span>(i)
<span class="dt">print</span>(<span class="st">&quot;done&quot;</span>)</code></pre></td></tr></table>
<p>This prints:</p>
<pre><code>12
16
24
30
done</code></pre>
</section>
<section id="more-generalization" class="level2">
<h2>More generalization</h2>
<p>As another example of generalization, imagine you wanted a program that would print a multiplication table of any size, not just the six-by-six table. You could add a parameter to <code>print_mult_table</code>:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> print_mult_table(high):
    <span class="kw">for</span> i in <span class="dt">range</span>(<span class="dv">1</span>, high<span class="dv">+1</span>):
        print_multiples(i)</code></pre></td></tr></table>
<p>We replaced the value 7 with the expression <code>high+1</code>. If we call <code>print_mult_table</code> with the argument 7, it displays:</p>
<pre><code>1      2      3      4      5      6
2      4      6      8      10     12
3      6      9      12     15     18
4      8      12     16     20     24
5      10     15     20     25     30
6      12     18     24     30     36
7      14     21     28     35     42</code></pre>
<p>This is fine, except that we probably want the table to be square — with the same number of rows and columns. To do that, we add another parameter to <code>print_multiples</code> to specify how many columns the table should have.</p>
<p>Just to be annoying, we call this parameter <code>high</code>, demonstrating that different functions can have parameters with the same name (just like local variables). Here’s the whole program:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> print_multiples(n, high):
    <span class="kw">for</span> i in <span class="dt">range</span>(<span class="dv">1</span>, high<span class="dv">+1</span>):
        <span class="dt">print</span>(n * i, end=<span class="st">&quot;   &quot;</span>)
    <span class="dt">print</span>()
   
<span class="kw">def</span> print_mult_table(high):
    <span class="kw">for</span> i in <span class="dt">range</span>(<span class="dv">1</span>, high<span class="dv">+1</span>):
        print_multiples(i, high)</code></pre></td></tr></table>
<p>Notice that when we added a new parameter, we had to change the first line of the function (the function heading), and we also had to change the place where the function is called in <code>print_mult_table</code>.</p>
<p>Now, when we call <code>print_mult_table(7)</code>:</p>
<pre><code>1      2      3      4      5      6      7
2      4      6      8      10     12     14
3      6      9      12     15     18     21
4      8      12     16     20     24     28
5      10     15     20     25     30     35
6      12     18     24     30     36     42
7      14     21     28     35     42     49</code></pre>
<p>When you generalize a function appropriately, you often get a program with capabilities you didn’t plan. For example, you might notice that, because ab = ba, all the entries in the table appear twice. You could save ink by printing only half the table. To do that, you only have to change one line of <code>print_mult_table</code>. Change</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">print_multiples(i, high<span class="dv">+1</span>)</code></pre></td></tr></table>
<p>to</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">print_multiples(i, i<span class="dv">+1</span>)</code></pre></td></tr></table>
<p>and you get:</p>
<pre><code>1
2      4
3      6      9
4      8      12     16
5      10     15     20     25
6      12     18     24     30     36
7      14     21     28     35     42     49</code></pre>
</section>
<section id="functions-2" class="level2">
<h2>Functions</h2>
<p>A few times now, we have mentioned all the things functions are good for. By now, you might be wondering what exactly those things are. Here are some of them:</p>
<ol>
<li>Capturing your mental chunking. Breaking your complex tasks into sub-tasks, and giving the sub-tasks a meaningful name is a powerful mental technique. Look back at the example that illustrated the post-test loop: we assumed that we had a function called <code>play_the_game_once</code>. This chunking allowed us to put aside the details of the particular game — is it a card game, or noughts and crosses, or a role playing game — and simply focus on one isolated part of our program logic — letting the player choose whether they want to play again.<br /></li>
<li>Dividing a long program into functions allows you to separate parts of the program, debug them in isolation, and then compose them into a whole.</li>
<li>Functions facilitate the use of iteration.</li>
<li>Well-designed functions are often useful for many programs. Once you write and debug one, you can reuse it.</li>
</ol>
</section>
<section id="paired-data" class="level2">
<h2>Paired Data</h2>
<p>We’ve already seen lists of names and lists of numbers in Python. We’re going to peek ahead in the textbook a little, and show a more advanced way of representing our data. Making a pair of things in Python is as simple as putting them into parentheses, like this:</p>
<pre class="sourceCode python"><code class="sourceCode python">year_born = (<span class="st">&quot;Paris Hilton&quot;</span>, <span class="dv">1981</span>) </code></pre>
<p>We can put many pairs into a list of pairs:</p>
<pre class="sourceCode python"><code class="sourceCode python">celebs = [(<span class="st">&quot;Brad Pitt&quot;</span>, <span class="dv">1963</span>), (<span class="st">&quot;Jack Nicholson&quot;</span>, <span class="dv">1937</span>), 
                                (<span class="st">&quot;Justin Bieber&quot;</span>, <span class="dv">1994</span>)] </code></pre>
<p>Here is a quick sample of things we can do with structured data like this. First, print all the celebs:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="dt">print</span>(celebs)
<span class="dt">print</span>(<span class="dt">len</span>(celebs))    </code></pre>
<pre><code>    [(&quot;Brad Pitt&quot;, 1963), (&quot;Jack Nicholson&quot;, 1937), (&quot;Justin Bieber&quot;, 1994)]
    3</code></pre>
<p>Notice that the <code>celebs</code> list has just 3 elements, each of them pairs.</p>
<p>Now we print the names of those celebrities born before 1980:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> (nm, yr) in celebs:
   <span class="kw">if</span> yr &lt; <span class="dv">1980</span>:
        <span class="dt">print</span>(nm)</code></pre></td></tr></table>
<pre><code>Brad Pitt
Jack Nicholson</code></pre>
<p>This demonstrates something we have not seen yet in the <code>for</code> loop: instead of using a single loop control variable, we’ve used a pair of variable names, <code>(nm, yr)</code>, instead. The loop is executed three times — once for each pair in the list, and on each iteration both the variables are assigned values from the pair of data that is being handled.</p>
</section>
<section id="nested-loops-for-nested-data" class="level2">
<h2>Nested Loops for Nested Data</h2>
<p>Now we’ll come up with an even more adventurous list of structured data. In this case, we have a list of students. Each student has a name which is paired up with another list of subjects that they are enrolled for:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">students = [
    (<span class="st">&quot;John&quot;</span>, [<span class="st">&quot;CompSci&quot;</span>, <span class="st">&quot;Physics&quot;</span>]),
    (<span class="st">&quot;Vusi&quot;</span>, [<span class="st">&quot;Maths&quot;</span>, <span class="st">&quot;CompSci&quot;</span>, <span class="st">&quot;Stats&quot;</span>]),
    (<span class="st">&quot;Jess&quot;</span>, [<span class="st">&quot;CompSci&quot;</span>, <span class="st">&quot;Accounting&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;Management&quot;</span>]),
    (<span class="st">&quot;Sarah&quot;</span>, [<span class="st">&quot;InfSys&quot;</span>, <span class="st">&quot;Accounting&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;CommLaw&quot;</span>]),
    (<span class="st">&quot;Zuki&quot;</span>, [<span class="st">&quot;Sociology&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;Law&quot;</span>, <span class="st">&quot;Stats&quot;</span>, <span class="st">&quot;Music&quot;</span>])]</code></pre></td></tr></table>
<p>Here we’ve assigned a list of five elements to the variable <code>students</code>. Let’s print out each student name, and the number of subjects they are enrolled for:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="co"># Print all students with a count of their courses.</span>
<span class="kw">for</span> (name, subjects) in students:
    <span class="dt">print</span>(name, <span class="st">&quot;takes&quot;</span>, <span class="dt">len</span>(subjects), <span class="st">&quot;courses&quot;</span>)</code></pre></td></tr></table>
<p>Python agreeably responds with the following output:</p>
<pre><code>John takes 2 courses
Vusi takes 3 courses
Jess takes 4 courses
Sarah takes 4 courses
Zuki takes 5 courses</code></pre>
<p>Now we’d like to ask how many students are taking CompSci. This needs a counter, and for each student we need a second loop that tests each of the subjects in turn:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="co"># Count how many students are taking CompSci</span>
counter = <span class="dv">0</span>
<span class="kw">for</span> (name, subjects) in students:
    <span class="kw">for</span> s in subjects:           <span class="co"># A nested loop!</span>
        <span class="kw">if</span> s == <span class="st">&quot;CompSci&quot;</span>:
           counter += <span class="dv">1</span>
           
<span class="dt">print</span>(<span class="st">&quot;The number of students taking CompSci is&quot;</span>, counter)</code></pre></td></tr></table>
<pre><code>The number of students taking CompSci is 3</code></pre>
<p>You should set up a list of your own data that interests you — perhaps a list of your CDs, each containing a list of song titles on the CD, or a list of movie titles, each with a list of movie stars who acted in the movie. You could then ask questions like “Which movies starred Angelina Jolie?”</p>
</section>
<section id="glossary-4" class="level2">
<h2>Glossary</h2>
<p>attribute : attribute a color.</p>
<p>canvas : canvas</p>
<p>control flow : control flow</p>
<p>for loop : for loop</p>
<p>loop body : loop body by the fact that the statements are indented under the for loop statement.</p>
<p>loop variable : loop variable each iteration of the loop.</p>
<p>instance : instance the class <code>Turtle</code>.</p>
<p>method : method causes the object to respond in some way, e.g. <code>forward</code> is the method when we say <code>tess.forward(100)</code>.</p>
<p>invoke : invoke method*. Invoking a method is done by putting parentheses after the method name, with some possible arguments. So <code>tess.forward()</code> is an invocation of the <code>forward</code> method.</p>
<p>module : module Python programs. The contents of a module are made available to the other program by using the <code>import</code> statement.</p>
<p>object : object or one of the turtles we have created.</p>
<p>range : range useful when we need to write a for loop that executes a fixed number of times.</p>
<p>terminating condition : terminating condition In the <code>for</code> loops we saw in this chapter, the terminating condition has been when there are no more elements to assign to the loop variable.</p>
</section>
<section id="exercises-3" class="level2">
<h2>Exercises</h2>
<ol>
<li><p>Write a program that prints <code>We like Python's turtles!</code> 1000 times.</p></li>
<li><p>Give three attributes of your cellphone object. Give three methods of your cellphone.</p></li>
<li><p>Write a program that uses a for loop to print | <code>One of the months of the year is January</code> | <code>One of the months of the year is February</code> | …</p></li>
<li><p>Suppose our turtle <code>tess</code> is at heading 0 — facing east. We execute the statement <code>tess.left(3645)</code>. What does <code>tess</code> do, and what is her final heading?</p></li>
<li><p>Assume you have the assignment <code>xs = [12, 10, 32, 3, 66, 17, 42, 99, 20]</code></p></li>
</ol>
<ol type="a">
<li>Write a loop that prints each of the numbers on a new line.</li>
<li>Write a loop that prints each number and its square on a new line.</li>
<li>Write a loop that adds all the numbers from the list into a variable called <code>total</code>. You should set the <code>total</code> variable to have the value 0 before you start adding them up, and print the value in <code>total</code> after the loop has completed.<br /></li>
<li><p>Print the product of all the numbers in the list. (product means all multiplied together)</p></li>
<li><p>Use <code>for</code> loops to make a turtle draw these regular polygons (regular means all sides the same lengths, all angles the same):</p></li>
</ol>
<ul>
<li>An equilateral triangle<br /></li>
<li>A square<br /></li>
<li>A hexagon (six sides)<br /></li>
<li>An octagon (eight sides)</li>
</ul>
<p>This chapter showed us how to sum a list of items, and how to count items. The counting example also had an <code>if</code> statement that let us only count some selected items. In the previous chapter we also showed a function <code>find_first_2_letter_word</code> that allowed us an “early exit” from inside a loop by using <code>return</code> when some condition occurred. We now also have <code>break</code> to exit a loop (but not the enclosing function, and <code>continue</code> to abandon the current iteration of the loop without ending the loop.</p>
<p>Composition of list traversal, summing, counting, testing conditions and early exit is a rich collection of building blocks that can be combined in powerful ways to create many functions that are all slightly different.</p>
<p>The first six questions are typical functions you should be able to write using only these building blocks.</p>
<ol type="1">
<li>Write a function to count how many odd numbers are in a list.</li>
<li>Sum up all the even numbers in a list.</li>
<li>Sum up all the negative numbers in a list.</li>
<li>Count how many words in a list have length 5.</li>
<li>Sum all the elements in a list up to but not including the first even number. (Write your unit tests. What if there is no even number?)</li>
</ol>
<dl>
<dt>#. Count how many words occur in a list up to and including the first occurrence of the word “sam”.</dt>
<dd>(Write your unit tests for this case too. What if “sam” does not occur?)
</dd>
</dl>
<blockquote>
<p> </p>
</blockquote>
<ol type="1">
<li><p>Add a print function to Newton’s <code>sqrt</code> function that prints out <code>better</code> each time it is calculated. Call your modified function with 25 as an argument and record the results.</p></li>
<li><p>Trace the execution of the last version of <code>print_mult_table</code> and figure out how it works.</p></li>
<li><p>Write a function <code>print_triangular_numbers(n)</code> that prints out the first n triangular numbers. A call to <code>print_triangular_numbers(5)</code> would produce the following output:</p>
<pre><code>1       1
2       3
3       6
4       10
5       15</code></pre>
<p>(<em>hint: use a web search to find out what a triangular number is.</em>)</p></li>
<li><p>Write a function, <code>is_prime</code>, which takes a single integer argument and returns <code>True</code> when the argument is a <em>prime number</em> and <code>False</code> otherwise. Add tests for cases like this:</p>
<pre><code>test(is_prime(11))
test(not is_prime(35))
test(is_prime(19911121))</code></pre>
<p>The last case could represent your birth date. Were you born on a prime day? In a class of 100 students, how many do you think would have prime birth dates?</p></li>
<li><p>Revisit the drunk pirate problem from the exercises in chapter 3. This time, the drunk pirate makes a turn, and then takes some steps forward, and repeats this. Our social science student now records pairs of data: the angle of each turn, and the number of steps taken after the turn. Her experimental data is [(160, 20), (-43, 10), (270, 8), (-43, 12)]. Use a turtle to draw the path taken by our drunk friend.</p></li>
<li><p>Many interesting shapes can be drawn by the turtle by giving a list of pairs like we did above, where the first item of the pair is the angle to turn, and the second item is the distance to move forward. Set up a list of pairs so that the turtle draws a house with a cross through the centre, as show here. This should be done without going over any of the lines / edges more than once, and without lifting your pen.</p>
<figure>
<img src="figs/tess_house.png" alt="image" /><figcaption>image</figcaption>
</figure></li>
<li><p>Not all shapes like the one above can be drawn without lifting your pen, or going over an edge more than once. Which of these can be drawn?</p>
<figure>
<img src="figs/tess_more_houses.png" alt="image" /><figcaption>image</figcaption>
</figure>
<p>Now read Wikipedia’s article(<a href="http://en.wikipedia.org/wiki/Eulerian_path">http://en.wikipedia.org/wiki/Eulerian_path</a>) about Eulerian paths. Learn how to tell immediately by inspection whether it is possible to find a solution or not. If the path is possible, you’ll also know where to put your pen to start drawing, and where you should end up!</p></li>
<li><p>What will <code>num_digits(0)</code> return? Modify it to return <code>1</code> for this case. Why does a call to <code>num_digits(-24)</code> result in an infinite loop? (<em>hint: -1//10 evaluates to -1</em>) Modify <code>num_digits</code> so that it works correctly with any integer value. Add these tests:</p>
<pre><code>test(num_digits(0) == 1)
test(num_digits(-12345) == 5)</code></pre></li>
<li><p>Write a function <code>num_even_digits(n)</code> that counts the number of even digits in <code>n</code>. These tests should pass:</p>
<pre><code>test(num_even_digits(123456) == 3)
test(num_even_digits(2468) == 4)
test(num_even_digits(1357) == 0)
test(num_even_digits(0) == 1)</code></pre></li>
<li><p>Write a function <code>sum_of_squares(xs)</code> that computes the sum of the squares of the numbers in the list <code>xs</code>. For example, <code>sum_of_squares([2, 3, 4])</code> should return 4+9+16 which is 29:</p>
<pre><code>test(sum_of_squares([2, 3, 4]) == 29) 
test(sum_of_squares([ ]) == 0)
test(sum_of_squares([2, -3, 4]) == 29)</code></pre></li>
<li><p>You and your friend are in a team to write a two-player game, human against computer, such as Tic-Tac-Toe / Noughts and Crosses. Your friend will write the logic to play one round of the game, while you will write the logic to allow many rounds of play, keep score, decide who plays, first, etc. The two of you negotiate on how the two parts of the program will fit together, and you come up with this simple scaffolding (which your friend will improve later):</p>
<ol type="a">
<li>Write the main program which repeatedly calls this function to play the game, and after each round it announces the outcome as “I win!”, “You win!”, or “Game drawn!”. It then asks the player “Do you want to play again?” and either plays again, or says “Goodbye”, and terminates.</li>
<li>Keep score of how many wins each player has had, and how many draws there have been. After each round of play, also announce the scores.</li>
<li>Add logic so that the players take turns to play first.</li>
<li>Compute the percentage of wins for the human, out of all games played. Also announce this at the end of each round.</li>
<li>Draw a flowchart of your logic.</li>
</ol></li>
</ol>
</section>
</section>
<section id="lists" class="level1">
<h1>Lists</h1>
<p>A <strong>list</strong> is an ordered collection of values. The values that make up a list are called its <strong>elements</strong>, or its <strong>items</strong>. We will use the term <code>element</code> or <code>item</code> to mean the same thing. Lists are similar to strings, which are ordered collections of characters, except that the elements of a list can be of any type. Lists and strings — and other collections that maintain the order of their items — are called <strong>sequences</strong>.</p>
<section id="list-values" class="level2">
<h2>List values</h2>
<p>There are several ways to create a new list; the simplest is to enclose the elements in square brackets (<code>[</code> and <code>]</code>):</p>
<pre class="sourceCode python"><code class="sourceCode python">ps = [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>]
qs = [<span class="st">&quot;spam&quot;</span>, <span class="st">&quot;bungee&quot;</span>, <span class="st">&quot;swallow&quot;</span>]</code></pre>
<p>The first example is a list of four integers. The second is a list of three strings. The elements of a list don’t have to be the same type. The following list contains a string, a float, an integer, and (amazingly) another list:</p>
<pre class="sourceCode python"><code class="sourceCode python">zs = [<span class="st">&quot;hello&quot;</span>, <span class="fl">2.0</span>, <span class="dv">5</span>, [<span class="dv">10</span>, <span class="dv">20</span>]]</code></pre>
<p>A list within another list is said to be <strong>nested</strong>.</p>
<p>Finally, a list with no elements is called an empty list, and is denoted <code>[]</code>.</p>
<p>We have already seen that we can assign list values to variables or pass lists as parameters to functions:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; vocabulary = [<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;cheese&quot;</span>, <span class="st">&quot;dog&quot;</span>]
&gt;&gt;&gt; numbers = [<span class="dv">17</span>, <span class="dv">123</span>]
&gt;&gt;&gt; an_empty_list = []
&gt;&gt;&gt; <span class="dt">print</span>(vocabulary, numbers, an_empty_list)
[<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;cheese&quot;</span>, <span class="st">&quot;dog&quot;</span>] [<span class="dv">17</span>, <span class="dv">123</span>] []</code></pre>
</section>
<section id="accessing-elements" class="level2">
<h2>Accessing elements</h2>
<p>The syntax for accessing the elements of a list is the same as the syntax for accessing the characters of a string — the index operator: <code>[]</code> (not to be confused with an empty list). The expression inside the brackets specifies the index. Remember that the indices start at 0:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; numbers[<span class="dv">0</span>]
<span class="dv">17</span></code></pre>
<p>Any expression evaluating to an integer can be used as an index:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; numbers[<span class="dv">9-8</span>]
<span class="dv">5</span>
&gt;&gt;&gt; numbers[<span class="fl">1.0</span>]
Traceback (most recent call last):
  File <span class="st">&quot;&lt;interactive input&gt;&quot;</span>, line <span class="dv">1</span>, in &lt;module&gt;
<span class="ot">TypeError</span>: <span class="dt">list</span> indices must be integers, not <span class="dt">float</span></code></pre>
<p>If you try to access or assign to an element that does not exist, you get a runtime error:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; numbers[<span class="dv">2</span>]
Traceback (most recent call last):
  File <span class="st">&quot;&lt;interactive input&gt;&quot;</span>, line <span class="dv">1</span>, in &lt;module&gt;
<span class="ot">IndexError</span>: <span class="dt">list</span> index out of <span class="dt">range</span></code></pre>
<p>It is common to use a loop variable as a list index.</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">horsemen = [<span class="st">&quot;war&quot;</span>, <span class="st">&quot;famine&quot;</span>, <span class="st">&quot;pestilence&quot;</span>, <span class="st">&quot;death&quot;</span>]

<span class="kw">for</span> i in [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]:
    <span class="dt">print</span>(horsemen[i])</code></pre></td></tr></table>
<p>Each time through the loop, the variable <code>i</code> is used as an index into the list, printing the <code>i</code>’th element. This pattern of computation is called a <strong>list traversal</strong>.</p>
<p>The above sample doesn’t need or use the index <code>i</code> for anything besides getting the items from the list, so this more direct version — where the <code>for</code> loop gets the items — might be preferred:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">horsemen = [<span class="st">&quot;war&quot;</span>, <span class="st">&quot;famine&quot;</span>, <span class="st">&quot;pestilence&quot;</span>, <span class="st">&quot;death&quot;</span>]

<span class="kw">for</span> h in horsemen:
    <span class="dt">print</span>(h)</code></pre></td></tr></table>
</section>
<section id="list-length" class="level2">
<h2>List length</h2>
<p>The function <code>len</code> returns the length of a list, which is equal to the number of its elements. If you are going to use an integer index to access the list, it is a good idea to use this value as the upper bound of a loop instead of a constant. That way, if the size of the list changes, you won’t have to go through the program changing all the loops; they will work correctly for any size list:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">horsemen = [<span class="st">&quot;war&quot;</span>, <span class="st">&quot;famine&quot;</span>, <span class="st">&quot;pestilence&quot;</span>, <span class="st">&quot;death&quot;</span>]
   
<span class="kw">for</span> i in <span class="dt">range</span>(<span class="dt">len</span>(horsemen)):
    <span class="dt">print</span>(horsemen[i])</code></pre></td></tr></table>
<p>The last time the body of the loop is executed, <code>i</code> is <code>len(horsemen) - 1</code>, which is the index of the last element. (But the version without the index looks even better now!)</p>
<p>Although a list can contain another list, the nested list still counts as a single element in its parent list. The length of this list is 4:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">len</span>([<span class="st">&quot;car makers&quot;</span>, <span class="dv">1</span>, [<span class="st">&quot;Ford&quot;</span>, <span class="st">&quot;Toyota&quot;</span>, <span class="st">&quot;BMW&quot;</span>], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]])
<span class="dv">4</span></code></pre>
</section>
<section id="list-membership" class="level2">
<h2>List membership</h2>
<p><code>in</code> and <code>not in</code> are Boolean operators that test membership in a sequence. We used them previously with strings, but they also work with lists and other sequences:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; horsemen = [<span class="st">&quot;war&quot;</span>, <span class="st">&quot;famine&quot;</span>, <span class="st">&quot;pestilence&quot;</span>, <span class="st">&quot;death&quot;</span>]
&gt;&gt;&gt; <span class="st">&quot;pestilence&quot;</span> in horsemen
<span class="ot">True</span>
&gt;&gt;&gt; <span class="st">&quot;debauchery&quot;</span> in horsemen
<span class="ot">False</span>
&gt;&gt;&gt; <span class="st">&quot;debauchery&quot;</span> not in horsemen
<span class="ot">True</span></code></pre>
<p>Using this produces a more elegant version of the nested loop program we previously used to count the number of students doing Computer Science in the section :ref:<code>nested_data</code>:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">students = [
    (<span class="st">&quot;John&quot;</span>, [<span class="st">&quot;CompSci&quot;</span>, <span class="st">&quot;Physics&quot;</span>]),
    (<span class="st">&quot;Vusi&quot;</span>, [<span class="st">&quot;Maths&quot;</span>, <span class="st">&quot;CompSci&quot;</span>, <span class="st">&quot;Stats&quot;</span>]),
    (<span class="st">&quot;Jess&quot;</span>, [<span class="st">&quot;CompSci&quot;</span>, <span class="st">&quot;Accounting&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;Management&quot;</span>]),
    (<span class="st">&quot;Sarah&quot;</span>, [<span class="st">&quot;InfSys&quot;</span>, <span class="st">&quot;Accounting&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;CommLaw&quot;</span>]),
    (<span class="st">&quot;Zuki&quot;</span>, [<span class="st">&quot;Sociology&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;Law&quot;</span>, <span class="st">&quot;Stats&quot;</span>, <span class="st">&quot;Music&quot;</span>])]
        
<span class="co"># Count how many students are taking CompSci</span>
counter = <span class="dv">0</span>
<span class="kw">for</span> (name, subjects) in students:
    <span class="kw">if</span> <span class="st">&quot;CompSci&quot;</span> in subjects:            
           counter += <span class="dv">1</span>
           
<span class="dt">print</span>(<span class="st">&quot;The number of students taking CompSci is&quot;</span>, counter)</code></pre></td></tr></table>
</section>
<section id="list-operations" class="level2">
<h2>List operations</h2>
<p>The <code>+</code> operator concatenates lists:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]
&gt;&gt;&gt; b = [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]
&gt;&gt;&gt; c = a + b
&gt;&gt;&gt; c
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</code></pre>
<p>Similarly, the <code>*</code> operator repeats a list a given number of times:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; [<span class="dv">0</span>] * <span class="dv">4</span>
[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]
&gt;&gt;&gt; [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>] * <span class="dv">3</span>
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</code></pre>
<p>The first example repeats <code>[0]</code> four times. The second example repeats the list <code>[1, 2, 3]</code> three times.</p>
</section>
<section id="list-slices" class="level2">
<h2>List slices</h2>
<p>The slice operations we saw previously with strings let us work with sublists:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a_list = [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>]
&gt;&gt;&gt; a_list[<span class="dv">1</span>:<span class="dv">3</span>]
[<span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>]
&gt;&gt;&gt; a_list[:<span class="dv">4</span>]
[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>]
&gt;&gt;&gt; a_list[<span class="dv">3</span>:]
[<span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>, <span class="st">&#39;f&#39;</span>]
&gt;&gt;&gt; a_list[:]
[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>, <span class="st">&#39;f&#39;</span>]</code></pre>
</section>
<section id="lists-are-mutable" class="level2">
<h2>Lists are mutable</h2>
<p>Unlike strings, lists are <strong>mutable</strong>, which means we can change their elements. Using the index operator on the left side of an assignment, we can update one of the elements:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; fruit = [<span class="st">&quot;banana&quot;</span>, <span class="st">&quot;apple&quot;</span>, <span class="st">&quot;quince&quot;</span>]
&gt;&gt;&gt; fruit[<span class="dv">0</span>] = <span class="st">&quot;pear&quot;</span>
&gt;&gt;&gt; fruit[<span class="dv">2</span>] = <span class="st">&quot;orange&quot;</span>
&gt;&gt;&gt; fruit
[<span class="st">&#39;pear&#39;</span>, <span class="st">&#39;apple&#39;</span>, <span class="st">&#39;orange&#39;</span>]</code></pre>
<p>The bracket operator applied to a list can appear anywhere in an expression. When it appears on the left side of an assignment, it changes one of the elements in the list, so the first element of <code>fruit</code> has been changed from <code>&quot;banana&quot;</code> to <code>&quot;pear&quot;</code>, and the last from <code>&quot;quince&quot;</code> to <code>&quot;orange&quot;</code>. An assignment to an element of a list is called <strong>item assignment</strong>. Item assignment does not work for strings:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; my_string = <span class="st">&quot;TEST&quot;</span>
&gt;&gt;&gt; my_string[<span class="dv">2</span>] = <span class="st">&quot;X&quot;</span>
Traceback (most recent call last):
  File <span class="st">&quot;&lt;interactive input&gt;&quot;</span>, line <span class="dv">1</span>, in &lt;module&gt;
<span class="ot">TypeError</span>: <span class="st">&#39;str&#39;</span> <span class="dt">object</span> does not support item assignment</code></pre>
<p>but it does for lists:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; my_list = [<span class="st">&quot;T&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;T&quot;</span>]
&gt;&gt;&gt; my_list[<span class="dv">2</span>] = <span class="st">&quot;X&quot;</span>
&gt;&gt;&gt; my_list
[<span class="st">&#39;T&#39;</span>, <span class="st">&#39;E&#39;</span>, <span class="st">&#39;X&#39;</span>, <span class="st">&#39;T&#39;</span>]</code></pre>
<p>With the slice operator we can update a whole sublist at once:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a_list = [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>]
&gt;&gt;&gt; a_list[<span class="dv">1</span>:<span class="dv">3</span>] = [<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>]
&gt;&gt;&gt; a_list
[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;x&#39;</span>, <span class="st">&#39;y&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>, <span class="st">&#39;f&#39;</span>]</code></pre>
<p>We can also remove elements from a list by assigning an empty list to them:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a_list = [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>]
&gt;&gt;&gt; a_list[<span class="dv">1</span>:<span class="dv">3</span>] = []
&gt;&gt;&gt; a_list
[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>, <span class="st">&#39;f&#39;</span>]</code></pre>
<p>And we can add elements to a list by squeezing them into an empty slice at the desired location:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a_list = [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;f&quot;</span>]
&gt;&gt;&gt; a_list[<span class="dv">1</span>:<span class="dv">1</span>] = [<span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]
&gt;&gt;&gt; a_list
[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;f&#39;</span>]
&gt;&gt;&gt; a_list[<span class="dv">4</span>:<span class="dv">4</span>] = [<span class="st">&quot;e&quot;</span>]
&gt;&gt;&gt; a_list
[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>, <span class="st">&#39;f&#39;</span>]</code></pre>
</section>
<section id="list-deletion" class="level2">
<h2>List deletion</h2>
<p>Using slices to delete list elements can be error-prone. Python provides an alternative that is more readable. The <code>del</code> statement removes an element from a list:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a = [<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>]
&gt;&gt;&gt; <span class="kw">del</span> a[<span class="dv">1</span>]
&gt;&gt;&gt; a
[<span class="st">&#39;one&#39;</span>, <span class="st">&#39;three&#39;</span>]</code></pre>
<p>As you might expect, <code>del</code> causes a runtime error if the index is out of range.</p>
<p>You can also use <code>del</code> with a slice to delete a sublist:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a_list = [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>]
&gt;&gt;&gt; <span class="kw">del</span> a_list[<span class="dv">1</span>:<span class="dv">5</span>]
&gt;&gt;&gt; a_list
[<span class="st">&#39;a&#39;</span>, <span class="st">&#39;f&#39;</span>]</code></pre>
<p>As usual, the sublist selected by slice contains all the elements up to, but not including, the second index.</p>
</section>
<section id="objects-and-references" class="level2">
<h2>Objects and references</h2>
<p>After we execute these assignment statements</p>
<pre class="sourceCode python"><code class="sourceCode python">a = <span class="st">&quot;banana&quot;</span>
b = <span class="st">&quot;banana&quot;</span></code></pre>
<p>we know that <code>a</code> and <code>b</code> will refer to a string object with the letters <code>&quot;banana&quot;</code>. But we don’t know yet whether they point to the <em>same</em> string object.</p>
<p>There are two possible ways the Python interpreter could arrange its memory:</p>
<figure>
<img src="figs/list1.png" />
</figure>
<p>In one case, <code>a</code> and <code>b</code> refer to two different objects that have the same value. In the second case, they refer to the same object.</p>
<p>We can test whether two names refer to the same object using the <code>is</code> operator:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a is b
<span class="ot">True</span></code></pre>
<p>This tells us that both <code>a</code> and <code>b</code> refer to the same object, and that it is the second of the two state snapshots that accurately describes the relationship.</p>
<p>Since strings are <em>immutable</em>, Python optimizes resources by making two names that refer to the same string value refer to the same object.</p>
<p>This is not the case with lists:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]
&gt;&gt;&gt; b = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]
&gt;&gt;&gt; a == b
<span class="ot">True</span>
&gt;&gt;&gt; a is b
<span class="ot">False</span>   </code></pre>
<p>The state snapshot here looks like this:</p>
<figure>
<img src="figs/mult_references2.png" title="State snapshot for equal different lists" />
</figure>
<p><code>a</code> and <code>b</code> have the same value but do not refer to the same object.</p>
</section>
<section id="aliasing" class="level2">
<h2>Aliasing</h2>
<p>Since variables refer to objects, if we assign one variable to another, both variables refer to the same object:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]
&gt;&gt;&gt; b = a
&gt;&gt;&gt; a is b
<span class="ot">True</span></code></pre>
<p>In this case, the state snapshot looks like this:</p>
<figure>
<img src="figs/mult_references3.png" title="State snapshot for multiple references (aliases) to a list" />
</figure>
<p>Because the same list has two different names, <code>a</code> and <code>b</code>, we say that it is <strong>aliased</strong>. Changes made with one alias affect the other:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; b[<span class="dv">0</span>] = <span class="dv">5</span>
&gt;&gt;&gt; a
[<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>]</code></pre>
<p>Although this behavior can be useful, it is sometimes unexpected or undesirable. In general, it is safer to avoid aliasing when you are working with mutable objects (i.e. lists at this point in our textbook, but we’ll meet more mutable objects as we cover classes and objects, dictionaries and sets). Of course, for immutable objects (i.e. strings, tuples), there’s no problem — it is just not possible to change something and get a surprise when you access an alias name. That’s why Python is free to alias strings (and any other immutable kinds of data) when it sees an opportunity to economize.</p>
</section>
<section id="cloning-lists" class="level2">
<h2>Cloning lists</h2>
<p>If we want to modify a list and also keep a copy of the original, we need to be able to make a copy of the list itself, not just the reference. This process is sometimes called <strong>cloning</strong>, to avoid the ambiguity of the word copy.</p>
<p>The easiest way to clone a list is to use the slice operator:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; a = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]
&gt;&gt;&gt; b = a[:]
&gt;&gt;&gt; b
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</code></pre>
<p>Taking any slice of <code>a</code> creates a new list. In this case the slice happens to consist of the whole list. So now the relationship is like this:</p>
<figure>
<img src="figs/mult_references2.png" title="State snapshot for equal different lists" />
</figure>
<p>Now we are free to make changes to <code>b</code> without worrying that we’ll inadvertently be changing <code>a</code>:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; b[<span class="dv">0</span>] = <span class="dv">5</span>
&gt;&gt;&gt; a
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</code></pre>
</section>
<section id="lists-and-for-loops" class="level2">
<h2>Lists and <code>for</code> loops</h2>
<p>The <code>for</code> loop also works with lists, as we’ve already seen. The generalized syntax of a <code>for</code> loop is:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="kw">for</span> VARIABLE in LIST:
    BODY</code></pre>
<p>So, as we’ve seen</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">friends = [<span class="st">&quot;Joe&quot;</span>, <span class="st">&quot;Zoe&quot;</span>, <span class="st">&quot;Brad&quot;</span>, <span class="st">&quot;Angelina&quot;</span>, <span class="st">&quot;Zuki&quot;</span>, <span class="st">&quot;Thandi&quot;</span>, <span class="st">&quot;Paris&quot;</span>]
<span class="kw">for</span> friend in friends:
    <span class="dt">print</span>(friend)</code></pre></td></tr></table>
<p>It almost reads like English: For (every) friend in (the list of) friends, print (the name of the) friend.</p>
<p>Any list expression can be used in a <code>for</code> loop:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> number in <span class="dt">range</span>(<span class="dv">20</span>):
    <span class="kw">if</span> number % <span class="dv">3</span> == <span class="dv">0</span>:
        <span class="dt">print</span>(number)
   
<span class="kw">for</span> fruit in [<span class="st">&quot;banana&quot;</span>, <span class="st">&quot;apple&quot;</span>, <span class="st">&quot;quince&quot;</span>]:
    <span class="dt">print</span>(<span class="st">&quot;I like to eat &quot;</span> + fruit + <span class="st">&quot;s!&quot;</span>)</code></pre></td></tr></table>
<p>The first example prints all the multiples of 3 between 0 and 19. The second example expresses enthusiasm for various fruits.</p>
<p>Since lists are mutable, we often want to traverse a list, changing each of its elements. The following squares all the numbers in the list <code>xs</code>:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">xs = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]

<span class="kw">for</span> i in <span class="dt">range</span>(<span class="dt">len</span>(xs)):
    xs[i] = xs[i]**<span class="dv">2</span></code></pre></td></tr></table>
<p>Take a moment to think about <code>range(len(xs))</code> until you understand how it works.</p>
<p>In this example we are interested in both the <em>value</em> of an item, (we want to square that value), and its <em>index</em> (so that we can assign the new value to that position). This pattern is common enough that Python provides a nicer way to implement it:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">xs = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]

<span class="kw">for</span> (i, val) in <span class="dt">enumerate</span>(xs):
    xs[i] = val**<span class="dv">2</span></code></pre></td></tr></table>
<p><code>enumerate</code> generates pairs of both (index, value) during the list traversal. Try this next example to see more clearly how <code>enumerate</code> works:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> (i, v) in <span class="dt">enumerate</span>([<span class="st">&quot;banana&quot;</span>, <span class="st">&quot;apple&quot;</span>, <span class="st">&quot;pear&quot;</span>, <span class="st">&quot;lemon&quot;</span>]):
     <span class="dt">print</span>(i, v)


<span class="dv">0</span> banana
<span class="dv">1</span> apple
<span class="dv">2</span> pear
<span class="dv">3</span> lemon</code></pre></td></tr></table>
</section>
<section id="list-parameters" class="level2">
<h2>List parameters</h2>
<p>Passing a list as an argument actually passes a <em>reference</em> to the list, not a copy or clone of the list. So parameter passing creates an alias for you: the caller has one variable referencing the list, and the called function has an alias, but there is only one underlying list object.</p>
<p>For example, the function below takes a list as an argument and multiplies each element in the list by 2:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> double_stuff(a_list):
    <span class="co">&quot;&quot;&quot; Overwrite each element in a_list with double its value. &quot;&quot;&quot;</span>
    <span class="kw">for</span> (idx, val) in <span class="dt">enumerate</span>(a_list):
        a_list[idx] = <span class="dv">2</span> * val</code></pre></td></tr></table>
<p>If we add the following onto our script:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">things = [<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">9</span>]
double_stuff(things)
<span class="dt">print</span>(things)</code></pre></td></tr></table>
<p>When we run it we’ll get:</p>
<pre class="sourceCode python"><code class="sourceCode python">[<span class="dv">4</span>, <span class="dv">10</span>, <span class="dv">18</span>]</code></pre>
<p>In the function above, the parameter <code>a_list</code> and the variable <code>things</code> are aliases for the same object. So before any changes to the elements in the list, the state snapshot looks like this:</p>
<figure>
<img src="figs/mult_references4.png" title="State snapshot for multiple references to a list as a parameter" />
</figure>
<p>Since the list object is shared by two frames, we drew it between them.</p>
<p>If a function modifies the items of a list parameter, the caller sees the change.</p>
<aside id="visualizer">

<p><strong>Use the Python visualizer!</strong></p>
<p>We’ve already mentioned the Python visualizer at <a href="http://netserv.ict.ru.ac.za/python3_viz">http://netserv.ict.ru.ac.za/python3_viz</a>. It is a very useful tool for building a good understanding of references, aliases, assignments, and passing arguments to functions. Pay special attention to cases where you clone a list or have two separate lists, and cases where there is only one underlying list, but more than one variable is aliased to reference the list.</p>
</aside>
    
</section>
<section id="list-methods" class="level2">
<h2>List methods</h2>
<p>The dot operator can also be used to access built-in methods of list objects. We’ll start with the most useful method for adding something onto the end of an existing list:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; mylist = []
&gt;&gt;&gt; mylist.append(<span class="dv">5</span>)
&gt;&gt;&gt; mylist.append(<span class="dv">27</span>)
&gt;&gt;&gt; mylist.append(<span class="dv">3</span>)
&gt;&gt;&gt; mylist.append(<span class="dv">12</span>)
&gt;&gt;&gt; mylist
[<span class="dv">5</span>, <span class="dv">27</span>, <span class="dv">3</span>, <span class="dv">12</span>]</code></pre>
<p><code>append</code> is a list method which adds the argument passed to it to the end of the list. We’ll use it heavily when we’re creating new lists. Continuing with this example, we show several other list methods:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; mylist.insert(<span class="dv">1</span>, <span class="dv">12</span>)  <span class="co"># Insert 12 at pos 1, shift other items up</span>
&gt;&gt;&gt; mylist
[<span class="dv">5</span>, <span class="dv">12</span>, <span class="dv">27</span>, <span class="dv">3</span>, <span class="dv">12</span>]
&gt;&gt;&gt; mylist.count(<span class="dv">12</span>)       <span class="co"># How many times is 12 in mylist?</span>
<span class="dv">2</span>
&gt;&gt;&gt; mylist.extend([<span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">5</span>, <span class="dv">11</span>])   <span class="co"># Put whole list onto end of mylist</span>
&gt;&gt;&gt; mylist
[<span class="dv">5</span>, <span class="dv">12</span>, <span class="dv">27</span>, <span class="dv">3</span>, <span class="dv">12</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">5</span>, <span class="dv">11</span>])
&gt;&gt;&gt; mylist.index(<span class="dv">9</span>)                <span class="co"># Find index of first 9 in mylist</span>
<span class="dv">6</span>
&gt;&gt;&gt; mylist.reverse()
&gt;&gt;&gt; mylist
[<span class="dv">11</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">5</span>, <span class="dv">12</span>, <span class="dv">3</span>, <span class="dv">27</span>, <span class="dv">12</span>, <span class="dv">5</span>]
&gt;&gt;&gt; mylist.sort()
&gt;&gt;&gt; mylist
[<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">12</span>, <span class="dv">27</span>]   
&gt;&gt;&gt; mylist.remove(<span class="dv">12</span>)             <span class="co"># Remove the first 12 in the list</span>
&gt;&gt;&gt; mylist
[<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">27</span>]</code></pre>
<p>Experiment and play with the list methods shown here, and read their documentation until you feel confident that you understand how they work.</p>
</section>
<section id="pure-functions-and-modifiers" class="level2">
<h2>Pure functions and modifiers</h2>
<p>Functions which take lists as arguments and change them during execution are called <strong>modifiers</strong> and the changes they make are called <strong>side effects</strong>.</p>
<p>A <strong>pure function</strong> does not produce side effects. It communicates with the calling program only through parameters, which it does not modify, and a return value. Here is <code>double_stuff</code> written as a pure function:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> double_stuff(a_list):
    <span class="co">&quot;&quot;&quot; Return a new list which contains </span>
<span class="co">        doubles of the elements in a_list. </span>
<span class="co">    &quot;&quot;&quot;</span>
    new_list = []
    <span class="kw">for</span> value in a_list:
        new_elem = <span class="dv">2</span> * value
        new_list.append(new_elem)
        
    <span class="kw">return</span> new_list</code></pre></td></tr></table>
<p>This version of <code>double_stuff</code> does not change its arguments:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; things = [<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">9</span>]
&gt;&gt;&gt; xs = double_stuff(things)
&gt;&gt;&gt; things
[<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">9</span>]
&gt;&gt;&gt; xs
[<span class="dv">4</span>, <span class="dv">10</span>, <span class="dv">18</span>]</code></pre>
<p>An early rule we saw for assignment said “first evaluate the right hand side, then assign the resulting value to the variable”. So it is quite safe to assign the function result to the same variable that was passed to the function:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; things = [<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">9</span>]
&gt;&gt;&gt; things = double_stuff(things)
&gt;&gt;&gt; things
[<span class="dv">4</span>, <span class="dv">10</span>, <span class="dv">18</span>]      </code></pre>
<aside id="pure-functions">

<p><strong>Which style is better?</strong></p>
<p>Anything that can be done with modifiers can also be done with pure functions. In fact, some programming languages only allow pure functions. There is some evidence that programs that use pure functions are faster to develop and less error-prone than programs that use modifiers. Nevertheless, modifiers are convenient at times, and in some cases, functional programs are less efficient.</p>
<p>In general, we recommend that you write pure functions whenever it is reasonable to do so and resort to modifiers only if there is a compelling advantage. This approach might be called a <em>functional programming style</em>.</p>
</aside>


</section>
<section id="functions-that-produce-lists" class="level2">
<h2>Functions that produce lists</h2>
<p>The pure version of <code>double_stuff</code> above made use of an important <strong>pattern</strong> for your toolbox. Whenever you need to write a function that creates and returns a list, the pattern is usually:</p>
<pre class="sourceCode python"><code class="sourceCode python">initialize a result variable to be an empty <span class="dt">list</span>
loop
   create a new element 
   append it to result
<span class="kw">return</span> the result</code></pre>
<p>Let us show another use of this pattern. Assume you already have a function <code>is_prime(x)</code> that can test if x is prime. Write a function to return a list of all prime numbers less than n:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> primes_lessthan(n):
   <span class="co">&quot;&quot;&quot; Return a list of all prime numbers less than n. &quot;&quot;&quot;</span>
   result = []
   <span class="kw">for</span> i in <span class="dt">range</span>(<span class="dv">2</span>, n):
       <span class="kw">if</span> is_prime(i):
          result.append(i)
   <span class="kw">return</span> result</code></pre></td></tr></table>
<aside id="list_comp">

</section>
<section id="list-comprehensions" class="level2">
<h2>List Comprehensions</h2>
<p>As we start to work with lists more, we start to see some common patterns. In particular, we often want to <em>filter</em> a list to create a new list of</p>
</aside>


</section>
<section id="strings-and-lists" class="level2">
<h2>Strings and lists</h2>
<p>Two of the most useful methods on strings involve conversion to and from lists of substrings.<br />The <code>split</code> method (which we’ve already seen) breaks a string into a list of words. By default, any number of whitespace characters is considered a word boundary:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; song = <span class="st">&quot;The rain in Spain...&quot;</span>
&gt;&gt;&gt; wds = song.split()
&gt;&gt;&gt; wds
[<span class="st">&#39;The&#39;</span>, <span class="st">&#39;rain&#39;</span>, <span class="st">&#39;in&#39;</span>, <span class="st">&#39;Spain...&#39;</span>]</code></pre>
<p>An optional argument called a <strong>delimiter</strong> can be used to specify which string to use as the boundary marker between substrings. The following example uses the string <code>ai</code> as the delimiter:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; song.split(<span class="st">&quot;ai&quot;</span>)
[<span class="st">&#39;The r&#39;</span>, <span class="st">&#39;n in Sp&#39;</span>, <span class="st">&#39;n...&#39;</span>]</code></pre>
<p>Notice that the delimiter doesn’t appear in the result.</p>
<p>The inverse of the <code>split</code> method is <code>join</code>. You choose a desired <strong>separator</strong> string, (often called the <em>glue</em>) and join the list with the glue between each of the elements:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; glue = <span class="st">&quot;;&quot;</span>
&gt;&gt;&gt; s = glue.join(wds)
&gt;&gt;&gt; s
<span class="co">&#39;The;rain;in;Spain...&#39;</span></code></pre>
<p>The list that you glue together (<code>wds</code> in this example) is not modified. Also, as these next examples show, you can use empty glue or multi-character strings as glue:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="st">&quot; --- &quot;</span>.join(wds)
<span class="co">&#39;The --- rain --- in --- Spain...&#39;</span>
&gt;&gt;&gt; <span class="st">&quot;&quot;</span>.join(wds)
<span class="co">&#39;TheraininSpain...&#39;</span></code></pre>
</section>
<section id="list-and-range" class="level2">
<h2><code>list</code> and <code>range</code></h2>
<p>Python has a built-in type conversion function called <code>list</code> that tries to turn whatever you give it into a list.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; xs = <span class="dt">list</span>(<span class="st">&quot;Crunchy Frog&quot;</span>)
&gt;&gt;&gt; xs
[<span class="st">&quot;C&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="st">&quot;u&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;h&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot; &quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="st">&quot;o&quot;</span>, <span class="st">&quot;g&quot;</span>]
&gt;&gt;&gt; <span class="st">&quot;&quot;</span>.join(xs)
<span class="co">&#39;Crunchy Frog&#39;</span></code></pre>
<p>One particular feature of <code>range</code> is that it doesn’t instantly compute all its values: it “puts off” the computation, and does it on demand, or “lazily”. We’ll say that it gives a <strong>promise</strong> to produce the values when they are needed. This is very convenient if your computation short-circuits a search and returns early, as in this case:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> f(n):
    <span class="co">&quot;&quot;&quot; Find the first positive integer between 101 and less </span>
<span class="co">        than n that is divisible by 21 </span>
<span class="co">    &quot;&quot;&quot;</span>
    <span class="kw">for</span> i in <span class="dt">range</span>(<span class="dv">101</span>, n):
       <span class="kw">if</span> (i % <span class="dv">21</span> == <span class="dv">0</span>):
           <span class="kw">return</span> i
            
            
test(f(<span class="dv">110</span>) == <span class="dv">105</span>)
test(f(<span class="dv">1000000000</span>) == <span class="dv">105</span>)</code></pre></td></tr></table>
<p>In the second test, if range were to eagerly go about building a list with all those elements, you would soon exhaust your computer’s available memory and crash the program. But it is cleverer than that! This computation works just fine, because the <code>range</code> object is just a promise to produce the elements if and when they are needed. Once the condition in the <code>if</code> becomes true, no further elements are generated, and the function returns. (Note: Before Python 3, <code>range</code> was not lazy. If you use an earlier versions of Python, YMMV!)</p>
<aside id="ymmv">

<p><strong>YMMV: Your Mileage May Vary</strong></p>
<p>The acronym YMMV stands for <em>your mileage may vary</em>. American car advertisements often quoted fuel consumption figures for cars, e.g. that they would get 28 miles per gallon. But this always had to be accompanied by legal small-print warning the reader that they might not get the same. The term YMMV is now used idiomatically to mean “your results may differ”, e.g. <em>The battery life on this phone is 3 days, but YMMV.</em></p>
</aside>
    
<p>You’ll sometimes find the lazy <code>range</code> wrapped in a call to <code>list</code>. This forces Python to turn the lazy promise into an actual list:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">range</span>(<span class="dv">10</span>)           <span class="co"># Create a lazy promise </span>
<span class="dt">range</span>(<span class="dv">0</span>, <span class="dv">10</span>)
&gt;&gt;&gt; <span class="dt">list</span>(<span class="dt">range</span>(<span class="dv">10</span>))     <span class="co"># Call in the promise, to produce a list.</span>
[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]</code></pre>
</section>
<section id="nested-lists" class="level2">
<h2>Nested lists</h2>
<p>A nested list is a list that appears as an element in another list. In this list, the element with index 3 is a nested list:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">&gt;&gt;&gt; nested = [<span class="st">&quot;hello&quot;</span>, <span class="fl">2.0</span>, <span class="dv">5</span>, [<span class="dv">10</span>, <span class="dv">20</span>]]</code></pre></td></tr></table>
<p>If we output the element at index 3, we get:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">print</span>(nested[<span class="dv">3</span>]) 
[<span class="dv">10</span>, <span class="dv">20</span>]</code></pre>
<p>To extract an element from the nested list, we can proceed in two steps:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; elem = nested[<span class="dv">3</span>]
&gt;&gt;&gt; elem[<span class="dv">0</span>]
<span class="dv">10</span></code></pre>
<p>Or we can combine them:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; nested[<span class="dv">3</span>][<span class="dv">1</span>]
<span class="dv">20</span></code></pre>
<p>Bracket operators evaluate from left to right, so this expression gets the 3’th element of <code>nested</code> and extracts the 1’th element from it.</p>
</section>
<section id="matrices" class="level2">
<h2>Matrices</h2>
<p>Nested lists are often used to represent matrices. For example, the matrix:</p>
<figure>
<img src="figs/matrix2.png" />
</figure>
<p>might be represented as:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; mx = [[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>], [<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]]</code></pre>
<p><code>mx</code> is a list with three elements, where each element is a row of the matrix. We can select an entire row from the matrix in the usual way:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; mx[<span class="dv">1</span>]
[<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</code></pre>
<p>Or we can extract a single element from the matrix using the double-index form:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; mx[<span class="dv">1</span>][<span class="dv">2</span>]
<span class="dv">6</span></code></pre>
<p>The first index selects the row, and the second index selects the column. Although this way of representing matrices is common, it is not the only possibility. A small variation is to use a list of columns instead of a list of rows. Later we will see a more radical alternative using a dictionary.</p>
</section>
<section id="glossary-5" class="level2">
<h2>Glossary</h2>
<dl>
<dt>aliases</dt>
<dd><p>Multiple variables that contain references to the same object.</p>
</dd>
<dt>clone</dt>
<dd><p>To create a new object that has the same value as an existing object. Copying a reference to an object creates an alias but doesn’t clone the object.</p>
</dd>
<dt>delimiter</dt>
<dd><p>A character or string used to indicate where a string should be split.</p>
</dd>
<dt>element</dt>
<dd><p>One of the values in a list (or other sequence). The bracket operator selects elements of a list. Also called <em>item</em>.</p>
</dd>
<dt>immutable data value</dt>
<dd><p>A data value which cannot be modified. Assignments to elements or slices (sub-parts) of immutable values cause a runtime error.</p>
</dd>
<dt>index</dt>
<dd><p>An integer value that indicates the position of an item in a list. Indexes start from 0.</p>
</dd>
<dt>item</dt>
<dd><p>See <em>element</em>.</p>
</dd>
<dt>list</dt>
<dd><p>A collection of values, each in a fixed position within the list. Like other types <code>str</code>, <code>int</code>, <code>float</code>, etc. there is also a <code>list</code> type-converter function that tries to turn whatever argument you give it into a list.</p>
</dd>
<dt>list traversal</dt>
<dd><p>The sequential accessing of each element in a list.</p>
</dd>
<dt>modifier</dt>
<dd><p>A function which changes its arguments inside the function body. Only mutable types can be changed by modifiers.</p>
</dd>
<dt>mutable data value</dt>
<dd><p>A data value which can be modified. The types of all mutable values are compound types. Lists and dictionaries are mutable; strings and tuples are not.</p>
</dd>
<dt>nested list</dt>
<dd><p>A list that is an element of another list.</p>
</dd>
<dt>object</dt>
<dd><p>A thing to which a variable can refer.</p>
</dd>
<dt>pattern</dt>
<dd><p>A sequence of statements, or a style of coding something that has general applicability in a number of different situations. Part of becoming a mature Computer Scientist is to learn and establish the patterns and algorithms that form your toolkit. Patterns often correspond to your “mental chunking”.</p>
</dd>
<dt>promise</dt>
<dd><p>An object that promises to do some work or deliver some values if they’re eventually needed, but it lazily puts off doing the work immediately. Calling <code>range</code> produces a promise.</p>
</dd>
<dt>pure function</dt>
<dd><p>A function which has no side effects. Pure functions only make changes to the calling program through their return values.</p>
</dd>
<dt>sequence</dt>
<dd><p>Any of the data types that consist of an ordered collection of elements, with each element identified by an index.</p>
</dd>
<dt>side effect</dt>
<dd><p>A change in the state of a program made by calling a function. Side effects can only be produced by modifiers.</p>
</dd>
<dt>step size</dt>
<dd><p>The interval between successive elements of a linear sequence. The third (and optional argument) to the <code>range</code> function is called the step size. If not specified, it defaults to 1.</p>
</dd>
</dl>
</section>
<section id="exercises-4" class="level2">
<h2>Exercises</h2>
<section id="basic-questions" class="level3">
<h3>Basic Questions</h3>
<ol type="1">
<li>Write a loop that prints out the even numbers from 1-100 (including 100)</li>
<li>Re-write your function from question 1 to solve the problem using a <code>range()</code> where you pass 3 arguments to <code>range</code>: <strong>start</strong>, <strong>stop</strong>, and <strong>step</strong>. <em>Hint:</em> see the <a href="#list-and-range">list and range</a> section above to see how to convert a range to a list.</li>
<li>Write a function that returns a list with all of multiples of 5 between 5 and 100 (i.e. count by fives). [5,10,15,20 …, 100]</li>
<li>Write a function that finds and returns the average of a list of numbers.</li>
<li>Write a function called <code>filter_word</code> which takes a list of strings and a <code>word</code> to filter as arguments and returns a new list with all instances of <code>word</code> removed. This function should not modify the original list.</li>
<li>Re-write question 5 as a modifier function without a return statement. It should usethe list method <code>remove()</code> to remove all intances of <code>word</code> from the list.</li>
</ol>
</section>
<section id="advanced-questions" class="level3">
<h3>Advanced Questions</h3>
<ol start="7" type="1">
<li><p>Write a function called <code>remove_duplicates</code> that takes a list and returns a new list with only the unique elements from the original. <em>Hint:</em> they don’t have to be in the same order.</p></li>
<li><p>Write a function called <code>combine</code> that takes 2 lists of strings as parameters and returns a new list of strings which concatenates the items from the first list with the item from the second. If the lists are not equal in length, the new list will end with the item from the longer list. For example:</p>
<pre class="sourceCode python"><code class="sourceCode python">a = [<span class="st">&quot;cat&quot;</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;bird&quot;</span>]
b = [<span class="st">&quot;lion&quot;</span>, <span class="st">&quot;wolf&quot;</span>, <span class="st">&quot;eagle&quot;</span>]
c = combine(a,b)
<span class="dt">print</span>(c)
&gt;&gt;&gt; [<span class="st">&quot;catlion&quot;</span>, <span class="st">&quot;dogwolf&quot;</span>, <span class="st">&quot;birdeagle&quot;</span>]</code></pre></li>
<li><p>Write a function called <code>is_sorted</code> which takes a list (of number or strings) as a parameter. It should return <code>True</code> if the list is already sorted (ascending order) or <code>False</code> if the list is not sorted.</p>
<p>You can use this function to test your code:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> test_sort():
   <span class="dt">print</span>(<span class="st">&quot;-----------------&quot;</span>)
   <span class="dt">print</span>(<span class="st">&quot;testing unsorted&quot;</span>)
   n1 = [<span class="dv">4</span>,<span class="dv">77</span>,<span class="dv">2</span>,<span class="dv">4567</span>,<span class="dv">12</span>]
   <span class="dt">print</span>(is_sorted(n1))
   <span class="dt">print</span>(<span class="st">&quot;-----------------&quot;</span>)
   <span class="dt">print</span>(<span class="st">&quot;testing sorted&quot;</span>)
   n2 = [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]
   <span class="dt">print</span>(is_sorted(n2))
   n3 = [<span class="st">&quot;aardvark&quot;</span>, <span class="st">&quot;koala&quot;</span>, <span class="st">&quot;zebra&quot;</span>, <span class="st">&quot;dog&quot;</span>,<span class="st">&quot;cat&quot;</span>, <span class="st">&quot;alligator&quot;</span>, 
         <span class="co">&quot;elephant&quot;</span>, <span class="st">&quot;albatross&quot;</span>, <span class="st">&quot;coyote&quot;</span>]
   <span class="dt">print</span>(is_sorted(n3))
   <span class="dt">print</span>(is_sorted(<span class="dt">sorted</span>(n3)))</code></pre></td></tr></table></li>
<li><p>What is the Python interpreter’s response to the following?</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">list</span>(<span class="dt">range</span>(<span class="dv">10</span>, <span class="dv">0</span>, -<span class="dv">2</span>))</code></pre>
<p>The three arguments to the <em>range</em> function are <em>start</em>, <em>stop</em>, and <em>step</em>, respectively. In this example, <code>start</code> is greater than <code>stop</code>. What happens if <code>start &lt; stop</code> and <code>step &lt; 0</code>? Write a rule for the relationships among <code>start</code>, <code>stop</code>, and <code>step</code>.</p></li>
<li><p>Write a function <code>replace(s, old, new)</code> that replaces all occurrences of <code>old</code> with <code>new</code> in a string <code>s</code>:</p>
<pre class="sourceCode python"><code class="sourceCode python">test(replace(<span class="st">&quot;Mississippi&quot;</span>, <span class="st">&quot;i&quot;</span>, <span class="st">&quot;I&quot;</span>) == <span class="st">&quot;MIssIssIppI&quot;</span>)

s = <span class="st">&quot;I love spom! Spom is my favorite food. Spom, spom, yum!&quot;</span>
test(replace(s, <span class="st">&quot;om&quot;</span>, <span class="st">&quot;am&quot;</span>) ==
    <span class="co">&quot;I love spam! Spam is my favorite food. Spam, spam, yum!&quot;</span>)

test(replace(s, <span class="st">&quot;o&quot;</span>, <span class="st">&quot;a&quot;</span>) ==
    <span class="co">&quot;I lave spam! Spam is my favarite faad. Spam, spam, yum!&quot;</span>)</code></pre>
<p><em>Hint</em>: use the <code>split</code> and <code>join</code> methods.</p></li>
<li><p>Suppose you want to swap around the values in two variables. You decide to factor this out into a reusable function, and write this code:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"> <span class="kw">def</span> swap(x, y):      <span class="co"># Incorrect version</span>
      <span class="dt">print</span>(<span class="st">&quot;before swap statement: x:&quot;</span>, x, <span class="st">&quot;y:&quot;</span>, y)
      (x, y) = (y, x)
      <span class="dt">print</span>(<span class="st">&quot;after swap statement: x:&quot;</span>, x, <span class="st">&quot;y:&quot;</span>, y)

 a = [<span class="st">&quot;This&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;fun&quot;</span>]
 b = [<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>] 
 <span class="dt">print</span>(<span class="st">&quot;before swap function call: a:&quot;</span>, a, <span class="st">&quot;b:&quot;</span>, b)
 swap(a, b)
 <span class="dt">print</span>(<span class="st">&quot;after swap function call: a:&quot;</span>, a, <span class="st">&quot;b:&quot;</span>, b)</code></pre></td></tr></table>
<p>Run this program and describe the results. Oops! So it didn’t do what you intended!<br />Explain why not.</p>
<p>Using a Python visualizer like the one at <a href="http://netserv.ict.ru.ac.za/python3_viz">http://netserv.ict.ru.ac.za/python3_viz</a> may help you build a good conceptual model of what is going on.<br />What will be the values of <code>a</code> and <code>b</code> after the call to <code>swap</code>?</p></li>
</ol>
</section>
</section>
</section>
<section id="tuples" class="level1">
<h1>Tuples</h1>
<section id="tuples-are-used-for-grouping-data" class="level2">
<h2>Tuples are used for grouping data</h2>
<p>We saw earlier that we could group together pairs of values by surrounding with parentheses. Recall this example:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; year_born = (<span class="st">&quot;Paris Hilton&quot;</span>, <span class="dv">1981</span>)</code></pre>
<p>This is an example of a <strong>data structure</strong> — a mechanism for grouping and organizing data to make it easier to use.</p>
<p>The pair is an example of a <strong>tuple</strong>. Generalizing this, a tuple can be used to group any number of items into a single compound value. Syntactically, a tuple is a comma-separated sequence of values. Although it is not necessary, it is conventional to enclose tuples in parentheses:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; julia = (<span class="st">&quot;Julia&quot;</span>, <span class="st">&quot;Roberts&quot;</span>, <span class="dv">1967</span>, <span class="st">&quot;Duplicity&quot;</span>, <span class="dv">2009</span>, <span class="st">&quot;Actress&quot;</span>, <span class="st">&quot;Atlanta, Georgia&quot;</span>)</code></pre>
<p>Tuples are useful for representing what other languages often call <em>records</em> — some related information that belongs together, like your student record. There is no description of what each of these fields means, but we can guess. A tuple lets us “chunk” together related information and use it as a single thing.</p>
<p>Tuples support the same sequence operations as strings. The index operator selects an element from a tuple.</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; julia[<span class="dv">2</span>]
<span class="dv">1967</span></code></pre>
<p>But if we try to use item assignment to modify one of the elements of the tuple, we get an error:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; julia[<span class="dv">0</span>] = <span class="st">&quot;X&quot;</span>
<span class="ot">TypeError</span>: <span class="st">&#39;tuple&#39;</span> <span class="dt">object</span> does not support item assignment</code></pre>
<p>So like strings, tuples are immutable. Once Python has created a tuple in memory, it cannot be changed.</p>
<p>Of course, even if we can’t modify the elements of a tuple, we can always make the <code>julia</code> variable reference a new tuple holding different information. To construct the new tuple, it is convenient that we can slice parts of the old tuple and join up the bits to make the new tuple. So if <code>julia</code> has a new recent film, we could change her variable to reference a new tuple that used some information from the old one:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; julia = julia[:<span class="dv">3</span>] + (<span class="st">&quot;Eat Pray Love&quot;</span>, <span class="dv">2010</span>) + julia[<span class="dv">5</span>:]
&gt;&gt;&gt; julia
(<span class="st">&quot;Julia&quot;</span>, <span class="st">&quot;Roberts&quot;</span>, <span class="dv">1967</span>, <span class="st">&quot;Eat Pray Love&quot;</span>, <span class="dv">2010</span>, <span class="st">&quot;Actress&quot;</span>, <span class="st">&quot;Atlanta, Georgia&quot;</span>)</code></pre>
<p>To create a tuple with a single element (but you’re probably not likely to do that too often), we have to include the final comma, because without the final comma, Python treats the <code>(5)</code> below as an integer in parentheses:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; tup = (<span class="dv">5</span>,)
&gt;&gt;&gt; <span class="dt">type</span>(tup)
&lt;<span class="kw">class</span> <span class="st">&#39;tuple&#39;</span>&gt;
&gt;&gt;&gt; x = (<span class="dv">5</span>)
&gt;&gt;&gt; <span class="dt">type</span>(x)
&lt;<span class="kw">class</span> <span class="st">&#39;int&#39;</span>&gt;</code></pre>
</section>
<section id="tuple-assignment" class="level2">
<h2>Tuple assignment</h2>
<p>Python has a very powerful <strong>tuple assignment</strong> feature that allows a tuple of variables on the left of an assignment to be assigned values from a tuple on the right of the assignment. (We already saw this used for pairs, but it generalizes.)</p>
<pre class="sourceCode python"><code class="sourceCode python">(name, surname, b_year, movie, m_year, profession, b_place) = julia</code></pre>
<p>This does the equivalent of seven assignment statements, all on one easy line. One requirement is that the number of variables on the left must match the number of elements in the tuple.</p>
<p>One way to think of tuple assignment is as tuple packing/unpacking.</p>
<p>In tuple packing, the values on the left are ‘packed’ together in a tuple:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; b = (<span class="st">&quot;Bob&quot;</span>, <span class="dv">19</span>, <span class="st">&quot;CS&quot;</span>)    <span class="co"># tuple packing</span></code></pre>
<p>In tuple unpacking, the values in a tuple on the right are ‘unpacked’ into the variables/names on the right:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; b = (<span class="st">&quot;Bob&quot;</span>, <span class="dv">19</span>, <span class="st">&quot;CS&quot;</span>)
&gt;&gt;&gt; (name, age, studies) = b    <span class="co"># tuple unpacking</span>
&gt;&gt;&gt; name
<span class="co">&#39;Bob&#39;</span>
&gt;&gt;&gt; age
<span class="dv">19</span>
&gt;&gt;&gt; studies
<span class="co">&#39;CS&#39;</span></code></pre>
<p>Once in a while, it is useful to swap the values of two variables. With conventional assignment statements, we have to use a temporary variable. For example, to swap <code>a</code> and <code>b</code>:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">temp = a
a = b
b = temp</code></pre></td></tr></table>
<p>Tuple assignment solves this problem neatly:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">(a, b) = (b, a)</code></pre></td></tr></table>
<p>The left side is a tuple of variables; the right side is a tuple of values. Each value is assigned to its respective variable. All the expressions on the right side are evaluated before any of the assignments. This feature makes tuple assignment quite versatile.</p>
<p>Naturally, the number of variables on the left and the number of values on the right have to be the same:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; (a, b, c, d) = (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)
<span class="ot">ValueError</span>: need more than <span class="dv">3</span> values to unpack</code></pre>
</section>
<section id="tuples-as-return-values" class="level2">
<h2>Tuples as return values</h2>
<p>Functions can always only return a single value, but by making that value a tuple, we can effectively group together as many values as we like, and return them together. This is very useful — we often want to know some batsman’s highest and lowest score, or we want to find the mean and the standard deviation, or we want to know the year, the month, and the day, or if we’re doing some some ecological modelling we may want to know the number of rabbits and the number of wolves on an island at a given time.</p>
<p>For example, we could write a function that returns both the area and the circumference of a circle of radius r:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> f(r):
    <span class="co">&quot;&quot;&quot; Return (circumference, area) of a circle of radius r &quot;&quot;&quot;</span>
    c = <span class="dv">2</span> * math.pi * r
    a = math.pi * r * r
    <span class="kw">return</span> (c, a)</code></pre></td></tr></table>
</section>
<section id="composability-of-data-structures" class="level2">
<h2>Composability of Data Structures</h2>
<p>We saw in an earlier chapter that we could make a list of pairs, and we had an example where one of the items in the tuple was itself a list:</p>
<pre class="sourceCode python"><code class="sourceCode python">students = [
    (<span class="st">&quot;John&quot;</span>, [<span class="st">&quot;CompSci&quot;</span>, <span class="st">&quot;Physics&quot;</span>]),
    (<span class="st">&quot;Vusi&quot;</span>, [<span class="st">&quot;Maths&quot;</span>, <span class="st">&quot;CompSci&quot;</span>, <span class="st">&quot;Stats&quot;</span>]),
    (<span class="st">&quot;Jess&quot;</span>, [<span class="st">&quot;CompSci&quot;</span>, <span class="st">&quot;Accounting&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;Management&quot;</span>]),
    (<span class="st">&quot;Sarah&quot;</span>, [<span class="st">&quot;InfSys&quot;</span>, <span class="st">&quot;Accounting&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;CommLaw&quot;</span>]),
    (<span class="st">&quot;Zuki&quot;</span>, [<span class="st">&quot;Sociology&quot;</span>, <span class="st">&quot;Economics&quot;</span>, <span class="st">&quot;Law&quot;</span>, <span class="st">&quot;Stats&quot;</span>, <span class="st">&quot;Music&quot;</span>])]</code></pre>
<p>Tuples items can themselves be other tuples. For example, we could improve the information about our movie stars to hold the full date of birth rather than just the year, and we could have a list of some of her movies and dates that they were made, and so on:</p>
<pre class="sourceCode python"><code class="sourceCode python">julia_more_info = ( (<span class="st">&quot;Julia&quot;</span>, <span class="st">&quot;Roberts&quot;</span>), (<span class="dv">8</span>, <span class="st">&quot;October&quot;</span>, <span class="dv">1967</span>),
    <span class="co">&quot;Actress&quot;</span>, (<span class="st">&quot;Atlanta&quot;</span>, <span class="st">&quot;Georgia&quot;</span>),
    [ (<span class="st">&quot;Duplicity&quot;</span>, <span class="dv">2009</span>),
      (<span class="st">&quot;Notting Hill&quot;</span>, <span class="dv">1999</span>),
      (<span class="st">&quot;Pretty Woman&quot;</span>, <span class="dv">1990</span>),
      (<span class="st">&quot;Erin Brockovich&quot;</span>, <span class="dv">2000</span>),
      (<span class="st">&quot;Eat Pray Love&quot;</span>, <span class="dv">2010</span>),
      (<span class="st">&quot;Mona Lisa Smile&quot;</span>, <span class="dv">2003</span>),
      (<span class="st">&quot;Oceans Twelve&quot;</span>, <span class="dv">2004</span>) ])</code></pre>
<p>Notice in this case that the tuple has just five elements — but each of those in turn can be another tuple, a list, a string, or any other kind of Python value. This property is known as being <strong>heterogeneous</strong>, meaning that it can be composed of elements of different types.</p>
</section>
<section id="glossary-6" class="level2">
<h2>Glossary</h2>
<dl>
<dt>data structure</dt>
<dd><p>An organization of data for the purpose of making it easier to use.</p>
</dd>
<dt>immutable data value</dt>
<dd><p>A data value which cannot be modified. Assignments to elements or slices (sub-parts) of immutable values cause a runtime error.</p>
</dd>
<dt>mutable data value</dt>
<dd><p>A data value which can be modified. The types of all mutable values are compound types. Lists and dictionaries are mutable; strings and tuples are not.</p>
</dd>
<dt>tuple</dt>
<dd><p>An immutable data value that contains related elements. Tuples are used to group together related data, such as a person’s name, their age, and their gender.</p>
</dd>
<dt>tuple assignment</dt>
<dd><p>An assignment to all of the elements in a tuple using a single assignment statement. Tuple assignment occurs <em>simultaneously</em> rather than in sequence, making it useful for swapping values.</p>
</dd>
</dl>
</section>
<section id="exercises-5" class="level2">
<h2>Exercises</h2>
<ol type="1">
<li><p>Write a function <code>merge_contacts(contact1, contact1)</code> that takes two touples as parameters. The tuples represent contact records in the form of (firstName, lastName, email, phone). This is the specification for your function:</p>
<ol type="1">
<li>The length of both tuples must be 4. If this isn’t the case, return <code>None</code>.</li>
<li>If the emails of both contacts do not match return <code>None</code></li>
<li>Return a new contact tuple that fills in any missing (i.e. an empty string) from contact1 with the information from contact2. If there is already data in both contact1 and contact2, leave contact1 alone.</li>
</ol></li>
<li><p>Write a function called <code>word_len(text)</code>. This function should use split() to create a list of words and then return a touple with the follwing data: shortest word, longest word, avg word length.</p></li>
</ol>
</section>
</section>
<section id="dictionaries" class="level1">
<h1>Dictionaries</h1>
<p>All of the compound data types we have studied in detail so far — strings, lists, and tuples — are sequence types, which use integers as indices to access the values they contain within them.</p>
<p><strong>Dictionaries</strong> are yet another kind of compound type. They are Python’s built-in <strong>mapping type</strong>. They map <strong>keys</strong>, which can be any immutable type, to values, which can be any type (heterogeneous), just like the elements of a list or tuple. In other languages, they are called <em>associative arrays</em> since they associate a key with a value.</p>
<p>As an example, we will create a dictionary to translate English words into Spanish. For this dictionary, the keys are strings.</p>
<p>One way to create a dictionary is to start with the empty dictionary and add <strong>key:value pairs</strong>. The empty dictionary is denoted <code>{}</code>:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; eng2sp = {}
&gt;&gt;&gt; eng2sp[<span class="st">&quot;one&quot;</span>] = <span class="st">&quot;uno&quot;</span>
&gt;&gt;&gt; eng2sp[<span class="st">&quot;two&quot;</span>] = <span class="st">&quot;dos&quot;</span></code></pre>
<p>The first assignment creates a dictionary named <code>eng2sp</code>; the other assignments add new key:value pairs to the dictionary. We can print the current value of the dictionary in the usual way:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">print</span>(eng2sp)
{<span class="st">&quot;two&quot;</span>: <span class="st">&quot;dos&quot;</span>, <span class="st">&quot;one&quot;</span>: <span class="st">&quot;uno&quot;</span>}</code></pre>
<p>The key:value pairs of the dictionary are separated by commas. Each pair contains a key and a value separated by a colon.</p>
<aside id="hashing">

<p><strong>Hashing</strong></p>
<p>The order of the pairs may not be what was expected. Python uses complex algorithms, designed for very fast access, to determine where the key:value pairs are stored in a dictionary. For our purposes we can think of this ordering as unpredictable.</p>
<p>You also might wonder why we use dictionaries at all when the same concept of mapping a key to a value could be implemented using a list of tuples:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; {<span class="st">&quot;apples&quot;</span>: <span class="dv">430</span>, <span class="st">&quot;bananas&quot;</span>: <span class="dv">312</span>, <span class="st">&quot;oranges&quot;</span>: <span class="dv">525</span>, <span class="st">&quot;pears&quot;</span>: <span class="dv">217</span>}
{<span class="st">&#39;pears&#39;</span>: <span class="dv">217</span>, <span class="st">&#39;apples&#39;</span>: <span class="dv">430</span>, <span class="st">&#39;oranges&#39;</span>: <span class="dv">525</span>, <span class="st">&#39;bananas&#39;</span>: <span class="dv">312</span>}

&gt;&gt;&gt; [(<span class="st">&#39;apples&#39;</span>, <span class="dv">430</span>), (<span class="st">&#39;bananas&#39;</span>, <span class="dv">312</span>), (<span class="st">&#39;oranges&#39;</span>, <span class="dv">525</span>), (<span class="st">&#39;pears&#39;</span>, <span class="dv">217</span>)]
[(<span class="st">&#39;apples&#39;</span>, <span class="dv">430</span>), (<span class="st">&#39;bananas&#39;</span>, <span class="dv">312</span>), (<span class="st">&#39;oranges&#39;</span>, <span class="dv">525</span>), (<span class="st">&#39;pears&#39;</span>, <span class="dv">217</span>)]</code></pre>
<p>The reason is dictionaries are very fast, implemented using a technique called hashing, which allows us to access a value very quickly. By contrast, the list of tuples implementation is slow. If we wanted to find a value associated with a key, we would have to iterate over every tuple, checking the 0th element. What if the key wasn’t even in the list? We would have to get to the end of it to find out.</p>
</aside>

<p>Another way to create a dictionary is to provide a list of key:value pairs using the same syntax as the previous output:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; eng2sp = {<span class="st">&quot;one&quot;</span>: <span class="st">&quot;uno&quot;</span>, <span class="st">&quot;two&quot;</span>: <span class="st">&quot;dos&quot;</span>, <span class="st">&quot;three&quot;</span>: <span class="st">&quot;tres&quot;</span>}</code></pre>
<p>It doesn’t matter what order we write the pairs. The values in a dictionary are accessed with keys, not with indices, so there is no need to care about ordering.</p>
<p>Here is how we use a key to look up the corresponding value:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">print</span>(eng2sp[<span class="st">&quot;two&quot;</span>])
<span class="co">&#39;dos&#39;</span></code></pre>
<p>The key <code>&quot;two&quot;</code> yields the value <code>&quot;dos&quot;</code>.</p>
<p>Lists, tuples, and strings have been called <em>sequences</em>, because their items occur in order. The dictionary is the first compound type that we’ve seen that is not a sequence, so we can’t index or slice a dictionary.</p>
<section id="practice-problems" class="level3">
<h3>Practice problems</h3>
<ol type="1">
<li>Modify the <code>eng2sp</code> dictionary declaration above so that <code>eng2sp</code> contains all of the numbers, 0-5.</li>
</ol>
</section>
<section id="dictionary-operations" class="level2">
<h2>Dictionary operations</h2>
<p>The <code>del</code> statement removes a key:value pair from a dictionary. For example, the following dictionary contains the names of various fruits and the number of each fruit in stock:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; inventory = {<span class="st">&quot;apples&quot;</span>: <span class="dv">430</span>, <span class="st">&quot;bananas&quot;</span>: <span class="dv">312</span>, <span class="st">&quot;oranges&quot;</span>: <span class="dv">525</span>, <span class="st">&quot;pears&quot;</span>: <span class="dv">217</span>}
&gt;&gt;&gt; <span class="dt">print</span>(inventory)
{<span class="st">&#39;pears&#39;</span>: <span class="dv">217</span>, <span class="st">&#39;apples&#39;</span>: <span class="dv">430</span>, <span class="st">&#39;oranges&#39;</span>: <span class="dv">525</span>, <span class="st">&#39;bananas&#39;</span>: <span class="dv">312</span>}</code></pre>
<p>If someone buys all of the pears, we can remove the entry from the dictionary:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="kw">del</span> inventory[<span class="st">&quot;pears&quot;</span>]
&gt;&gt;&gt; <span class="dt">print</span>(inventory)
{<span class="st">&#39;apples&#39;</span>: <span class="dv">430</span>, <span class="st">&#39;oranges&#39;</span>: <span class="dv">525</span>, <span class="st">&#39;bananas&#39;</span>: <span class="dv">312</span>}</code></pre>
<p>Or if we’re expecting more pears soon, we might just change the value associated with pears:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; inventory[<span class="st">&quot;pears&quot;</span>] = <span class="dv">0</span>
&gt;&gt;&gt; <span class="dt">print</span>(inventory)
{<span class="st">&#39;pears&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;apples&#39;</span>: <span class="dv">430</span>, <span class="st">&#39;oranges&#39;</span>: <span class="dv">525</span>, <span class="st">&#39;bananas&#39;</span>: <span class="dv">312</span>}</code></pre>
<p>A new shipment of bananas arriving could be handled like this:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; inventory[<span class="st">&quot;bananas&quot;</span>] += <span class="dv">200</span>
&gt;&gt;&gt; <span class="dt">print</span>(inventory)
{<span class="st">&#39;pears&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;apples&#39;</span>: <span class="dv">430</span>, <span class="st">&#39;oranges&#39;</span>: <span class="dv">525</span>, <span class="st">&#39;bananas&#39;</span>: <span class="dv">512</span>}</code></pre>
<p>The <code>len</code> function also works on dictionaries; it returns the number of key:value pairs:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">len</span>(inventory)
<span class="dv">4</span></code></pre>
</section>
<section id="dictionary-methods" class="level2">
<h2>Dictionary methods</h2>
<p>Dictionaries have a number of useful built-in methods.</p>
<p>The <code>keys</code> method returns what Python 3 calls a <strong>view</strong> of its underlying keys.<br />A view object has some similarities to the <code>range</code> object we saw earlier — it is a lazy promise, to deliver its elements when they’re needed by the rest of the program. We can iterate over the view, or turn the view into a list like this:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> k in eng2sp.keys():   <span class="co"># The order of the k&#39;s is not defined</span>
   <span class="dt">print</span>(<span class="st">&quot;Got key&quot;</span>, k, <span class="st">&quot;which maps to value&quot;</span>, eng2sp[k])     
   
ks = <span class="dt">list</span>(eng2sp.keys())
<span class="dt">print</span>(ks)</code></pre></td></tr></table>
<p>This produces this output:</p>
<pre class="sourceCode python"><code class="sourceCode python">Got key three which maps to value tres
Got key two which maps to value dos
Got key one which maps to value uno
[<span class="st">&#39;three&#39;</span>, <span class="st">&#39;two&#39;</span>, <span class="st">&#39;one&#39;</span>]</code></pre>
<p>It is so common to iterate over the keys in a dictionary that we can omit the <code>keys</code> method call in the <code>for</code> loop — iterating over a dictionary implicitly iterates over its keys:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> k in eng2sp:     
   <span class="dt">print</span>(<span class="st">&quot;Got key&quot;</span>, k)     </code></pre></td></tr></table>
<p>The <code>values</code> method is similar; it returns a view object which can be turned into a list:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">list</span>(eng2sp.values())
[<span class="st">&#39;tres&#39;</span>, <span class="st">&#39;dos&#39;</span>, <span class="st">&#39;uno&#39;</span>]</code></pre>
<p>The <code>items</code> method also returns a view, which promises a list of tuples — one tuple for each key:value pair:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="dt">list</span>(eng2sp.items())
[(<span class="st">&#39;three&#39;</span>, <span class="st">&#39;tres&#39;</span>), (<span class="st">&#39;two&#39;</span>, <span class="st">&#39;dos&#39;</span>), (<span class="st">&#39;one&#39;</span>, <span class="st">&#39;uno&#39;</span>)]</code></pre>
<p>Tuples are often useful for getting both the key and the value at the same time while we are looping:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">for</span> (k,v) in eng2sp.items():
    <span class="dt">print</span>(<span class="st">&quot;Got&quot;</span>,k,<span class="st">&quot;that maps to&quot;</span>,v)</code></pre></td></tr></table>
<p>This produces:</p>
<pre class="sourceCode python"><code class="sourceCode python">Got three that maps to tres
Got two that maps to dos
Got one that maps to uno  </code></pre>
<p>The <code>in</code> and <code>not in</code> operators can test if a key is in the dictionary:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; <span class="st">&quot;one&quot;</span> in eng2sp
<span class="ot">True</span>
&gt;&gt;&gt; <span class="st">&quot;six&quot;</span> in eng2sp
<span class="ot">False</span>
&gt;&gt;&gt; <span class="st">&quot;tres&quot;</span> in eng2sp    <span class="co"># Note that &#39;in&#39; tests keys, not values.</span>
<span class="ot">False</span></code></pre>
<p>This method can be very useful, since looking up a non-existent key in a dictionary causes a runtime error:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; eng2esp[<span class="st">&quot;dog&quot;</span>]
Traceback (most recent call last):
  ...
<span class="ot">KeyError</span>: <span class="st">&#39;dog&#39;</span></code></pre>
</section>
<section id="aliasing-and-copying" class="level2">
<h2>Aliasing and copying</h2>
<p>As in the case of lists, because dictionaries are mutable, we need to be aware of aliasing. Whenever two variables refer to the same object, changes to one affect the other.</p>
<p>If we want to modify a dictionary and keep a copy of the original, use the <code>copy</code> method. For example, <code>opposites</code> is a dictionary that contains pairs of opposites:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; opposites = {<span class="st">&quot;up&quot;</span>: <span class="st">&quot;down&quot;</span>, <span class="st">&quot;right&quot;</span>: <span class="st">&quot;wrong&quot;</span>, <span class="st">&quot;yes&quot;</span>: <span class="st">&quot;no&quot;</span>}
&gt;&gt;&gt; alias = opposites
&gt;&gt;&gt; copy = opposites.copy()  <span class="co"># Shallow copy</span></code></pre>
<p><code>alias</code> and <code>opposites</code> refer to the same object; <code>copy</code> refers to a fresh copy of the same dictionary. If we modify <code>alias</code>, <code>opposites</code> is also changed:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; alias[<span class="st">&quot;right&quot;</span>] = <span class="st">&quot;left&quot;</span>
&gt;&gt;&gt; opposites[<span class="st">&quot;right&quot;</span>]
<span class="co">&#39;left&#39;</span></code></pre>
<p>If we modify <code>copy</code>, <code>opposites</code> is unchanged:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; copy[<span class="st">&quot;right&quot;</span>] = <span class="st">&quot;privilege&quot;</span>
&gt;&gt;&gt; opposites[<span class="st">&quot;right&quot;</span>]
<span class="co">&#39;left&#39;</span></code></pre>
</section>
<section id="counting-letters" class="level2">
<h2>Counting letters</h2>
<p>In the exercises in Chapter 8 (Strings) we wrote a function that counted the number of occurrences of a letter in a string. A more general version of this problem is to form a frequency table of the letters in the string, that is, how many times each letter appears.</p>
<p>Such a frequency table might be useful for compressing a text file. Because different letters appear with different frequencies, we can compress a file by using shorter codes for common letters and longer codes for letters that appear less frequently.</p>
<p>Dictionaries provide an elegant way to generate a frequency table:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; letter_counts = {}
&gt;&gt;&gt; <span class="kw">for</span> letter in <span class="st">&quot;Mississippi&quot;</span>:
...     letter_counts[letter] = letter_counts.get(letter, <span class="dv">0</span>) + <span class="dv">1</span>
...
&gt;&gt;&gt; letter_counts
{<span class="st">&#39;M&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;s&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;p&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;i&#39;</span>: <span class="dv">4</span>}</code></pre>
<p>We start with an empty dictionary. For each letter in the string, we find the current count (possibly zero) and increment it. At the end, the dictionary contains pairs of letters and their frequencies. Note that we access the letter using the dictionary’s <code>get</code> method (rather than the index notation which would read <code>letter_counts[letter]</code>) because <code>get</code> allows us to pass in the default vaule, as the second parameter, in the event that the key is not yet in our dictionary.</p>
<p>It might be more appealing to display the frequency table in alphabetical order. We can do that with the <code>items</code> and <code>sort</code> methods:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; letter_items = <span class="dt">list</span>(letter_counts.items())
&gt;&gt;&gt; letter_items.sort()
&gt;&gt;&gt; <span class="dt">print</span>(letter_items)
[(<span class="st">&#39;M&#39;</span>, <span class="dv">1</span>), (<span class="st">&#39;i&#39;</span>, <span class="dv">4</span>), (<span class="st">&#39;p&#39;</span>, <span class="dv">2</span>), (<span class="st">&#39;s&#39;</span>, <span class="dv">4</span>)]</code></pre>
<p>Notice in the first line we had to call the type conversion function <code>list</code>. That turns the promise we get from <code>items</code> into a list, a step that is needed before we can use the list’s <code>sort</code> method.</p>
</section>
<section id="word-frequencies" class="level2">
<h2>Word Frequencies</h2>
<p>Like the letter frequencies above, dictionaries are good <strong>data structures</strong> to hold word frequency tables. In the example below, we do some basic analysis of newspaper articles by using <code>dicts</code> to count words. In the word frequency table or map, the dictionary <strong>key</strong> is the word and the <strong>value</strong> is the number of times that word appears in the text.</p>
<p><a href="examples/snowden-case-study.tar">Download and run the sample code here</a></p>
<section id="case-study-snowden-content-analysis" class="level3">
<h3>Case Study: Snowden Content Analysis</h3>
<aside id="snowden_read_file" style="top: 280px;">

<p><strong>read_file</strong> uses the <strong>buil-in function</strong> <code>open()</code> to read a plain text file into a <strong>file object</strong>. The function <strong>returns</strong> the text as a <code>string</code>.</p>
</aside>


<aside id="snowden_word_map" style="top: 365px;">

<p>The <strong>word_map function</strong> uses a Python <code>dict</code> to map the key words identified in the parameter <code>find</code> to the number of times they occur in the text. The text is passed in as an argument to this function as a <code>list</code> of <code>words</code>.</p>
<p>This function uses <code>list</code> and <code>dict</code> <strong>data structures</strong>. Line 23 initializes and empty <code>dict</code> called wordMap. The <code>find</code> parameter is a <code>list</code> that let’s the function know which words to count. The first <code>for</code> loop on line 25 iterates over the words in <code>find</code> and adds a new <strong>key</strong> to wordMap with the <strong>value</strong> zero. We use the String function <code>lower()</code> to force all keys to lowercase. The second loop (29) iterates through the words in the text. For each word in the list we use the <strong>string function</strong> <code>strip()</code> to remove punctation. The <strong>string module</strong> was <strong>imported</strong> on line 9, so that we can access its list of punctation characters here, on line 30.</p>
<p>The body of the second loop uses the <code>in</code> operator to test if a word from the text is in our list of words to find. If the word is found, we <strong>increment</strong> the value for that word in our <code>dict</code>. Finally, the function returns a map of <strong>key-value pairs</strong> where the keys are the words that were found. The values are <code>ints</code> indicating the number of times the word was found in the text (0..<em>n</em>). The function <strong>returns</strong> this word frequency map.</p>
</aside>

<aside id="snowden_describe" style="top: 794px;">

<p>The <strong>describe</strong> function presents the results to the user by printing information to the console. This function is not very <strong>abstract</strong> — it can only be used to analyze the Snowden news reports.</p>
</aside>


<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="co"># snow.py</span>
<span class="co"># by: mxc</span>
<span class="co">&quot;&quot;&quot;</span>
<span class="co">This program runs a simple analysis of new articles</span>
<span class="co">related to Edward Snowden and his leak of NSA and</span>
<span class="co">other government surveillance programs.</span>
<span class="co">&quot;&quot;&quot;</span>

<span class="ch">import</span> string

<span class="kw">def</span> read_file(fileIn):
    f = <span class="dt">open</span>(fileIn)
    text = f.read()
    f.close()
    <span class="kw">return</span> text

<span class="kw">def</span> word_map(words, find):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">    Return a word map holding the</span>
<span class="co">    number of occurrences of each word in</span>
<span class="co">    the `find` list.</span>
<span class="co">    &quot;&quot;&quot;</span>
    wordMap = {}
    <span class="co"># initialize the wordmap</span>
    <span class="kw">for</span> word in find:
        wordMap[word.lower()] = <span class="dv">0</span>

    <span class="co">#count the words in our list of words</span>
    <span class="kw">for</span> w in words:
        w = w.strip(string.punctuation)
        <span class="kw">if</span> w in find:
            wordMap[w] += <span class="dv">1</span>

    <span class="kw">return</span> wordMap

<span class="kw">def</span> describe(total, <span class="dt">map</span>):

    head = <span class="st">&quot;&quot;&quot;</span>
<span class="st">==================================</span>
<span class="st">   Snowden News Report Analysis</span>
<span class="st">==================================</span>

<span class="st">This program analyzed the full text</span>
<span class="st">of 874 English language news reports</span>
<span class="st">that were published between June 24, 2013</span>
<span class="st">and October 20, 2013.</span>

<span class="st">News reports were sourced from a Lexis-Nexis</span>
<span class="st">Academic search of &quot;Major World Newspapers&quot;</span>
<span class="st">on the keyword &quot;Snowden&quot;. Results were</span>
<span class="st">filtered for duplicates and downloaded as</span>
<span class="st">a single text file. This file was used</span>
<span class="st">to run the analysis here.</span>
<span class="st">------------------------------------</span>
<span class="st">&quot;&quot;&quot;</span>
    <span class="dt">print</span>(head)
    <span class="dt">print</span>(<span class="st">&quot;total words:&quot;</span>, total)

    whistle = <span class="dt">map</span>[<span class="st">&quot;whistleblower&quot;</span>]
    traitor = <span class="dt">map</span>[<span class="st">&quot;traitor&quot;</span>]

    <span class="dt">print</span>(<span class="st">&quot;whistelblower:&quot;</span>, whistle)
    <span class="dt">print</span>(<span class="st">&quot;traitor:&quot;</span>, traitor)


<span class="kw">def</span> main():
    text = read_file(<span class="st">&quot;snowden.txt&quot;</span>)
    words = text.split()
    total = <span class="dt">len</span>(words)
    wordsToCount = [<span class="st">&quot;whistleblower&quot;</span>,<span class="st">&quot;traitor&quot;</span>]
    <span class="dt">map</span> = word_map(words, wordsToCount)

    describe(total,<span class="dt">map</span>)

main()</code></pre></td></tr></table>
</section>
</section>
<section id="glossary-7" class="level2">
<h2>Glossary</h2>
<dl>
<dt>dictionary</dt>
<dd><p>A collection of key:value pairs that maps from keys to values. The keys can be any immutable value, and the associated value can be of any type.</p>
</dd>
<dt>immutable data value</dt>
<dd><p>A data value which cannot be modified. Assignments to elements or slices (sub-parts) of immutable values cause a runtime error.</p>
</dd>
<dt>key</dt>
<dd><p>A data item that is <em>mapped to</em> a value in a dictionary. Keys are used to look up values in a dictionary. Each key must be unique across the dictionary.</p>
</dd>
<dt>key:value pair</dt>
<dd><p>One of the pairs of items in a dictionary. Values are looked up in a dictionary by key.</p>
</dd>
<dt>mapping type</dt>
<dd><p>A mapping type is a data type comprised of a collection of keys and associated values. Python’s only built-in mapping type is the dictionary. Dictionaries implement the <a href="http://en.wikipedia.org/wiki/Associative_array">associative array</a> abstract data type.</p>
</dd>
<dt>memo</dt>
<dd><p>Temporary storage of precomputed values to avoid duplicating the same computation.</p>
</dd>
<dt>mutable data value</dt>
<dd><p>A data value which can be modified. The types of all mutable values are compound types. Lists and dictionaries are mutable; strings and tuples are not.</p>
</dd>
</dl>
</section>
<section id="exercises-6" class="level2">
<h2>Exercises</h2>
<ol>
<li><p>Write a program that reads a string and returns a table of the letters of the alphabet in alphabetical order which occur in the string together with the number of times each letter occurs. Case should be ignored. A sample output of the program when the user enters the data “ThiS is String with Upper and lower case Letters”, would look this this:</p>
<p>a 2 c 1 d 1 e 5 g 1 h 2 i 4 l 2 n 2 o 1 p 2 r 4 s 5 t 5 u 1 w 2</p></li>
<li><p>Write a program called <code>alice_words.py</code> that creates a text file named <code>alice_words.txt</code> containing an alphabetical listing of all the words, and the number of times each occurs, in the text version of <code>Alice's Adventures in Wonderland</code>.<br /> (You can obtain a free plain text version of the book, along with many others, from http://www.gutenberg.org.) The first 10 lines of your output file should look something like this:</p>
<pre><code>Word              Count
=======================
a                 631
a-piece           1
abide             1
able              1
about             94
above             3
absence           1
absurd            2</code></pre></li>
</ol>
<p>How many times does the word <code>alice</code> occur in the book?</p>
<ol>
<li>What is the longest word in Alice in Wonderland? How many characters does it have?</li>
</ol>
</section>
</section>
<section id="content-analysis-of-ny-times-school-related-articles" class="level1">
<h1>Content Analysis of NY Times school-related articles</h1>
<section id="case-study-dictionaries-tuples-lists-more" class="level2">
<h2>Case Study: Dictionaries, tuples, lists &amp; more</h2>
<aside id="teachers_clean" style="top: 420px;">
<p>The first step to running this analysis is to prepare the text. <code>read_and_prep</code> opens a file and reads the contents into a string. From there, we call <code>clean</code> which, in turn, calls <code>strip_non_chars</code> for each word in the text. Even before the program opens the text has been manually groomed in a text editor. Our analysis centers around counting words — punctuation and other non-alphanumeric characters throw off our counts. Our approach is:</p>
<ol type="1">
<li>convert everything to lowercase</li>
<li>remove punctuation at the start and end of words</li>
<li>leave apostrophes and hyphenated words intact</li>
</ol>
</aside>

<aside id="teachers_while" style="top: 1083px;">
<p><code>strip_non_chars</code> is applied to every word in the text. Python’s built-in <code>strip</code> function removes spaces or other characters from the start or end of strings, but, in this case, we know the characters we want to keep, but not the ones we want to strip—we want to keep the 26 lowercase English letters and the digits 0-9. We remove any other character found at the start or end of the word. We chose to implement this using a <strong>while loop</strong>. Unlike like <strong>for</strong> loops, while loops provide an <em>indefinite loop</em>—we do not know who many iterations are needed. In this case, we continue the loop until we find a valid character.</p>
This function has 2 while loops. The first drops the first character of the word (using the string slice syntax) until the first character is valid. The second loop does the same, but works from the last character.
</aside>

<aside id="teachers_freak" style="top: 1400px">
Counting word frequencies—the number of times a word occurs in the text—is the main tool offered by this program to analyze text. The algorithm in <code>freq</code> is familiar to us by now: iterate over a list of words in a for loop, use unique words as <strong>dictionary keys</strong> and keep a <strong>running total</strong> of each word as the dictionary <strong>value</strong>. The word frequency map return allows quick and easy access to the frequency of every word in the text.
</aside>


<aside id="teachers_freak_sort" style="top: 1715px">
<p>Dictionaries are great for keyed access to items—in our case, looking up word counts based on the word—but they are inherently <strong>unsorted</strong>. This means that we need to take extra steps to see the most common or least common words in a text, or to even display the words in alphabetical order. Previously we have seen how to display the contents of a dictionary by doing a <strong>for loop</strong> over the <code>sorted(map.keys())</code>. This makes sense for some data, but here we are more interested in sorting on the values, not the dict keys.</p>
<p><code>freq_list</code> solves this problem by sorting the dictionary items based on the word count. It expects a list of <strong>tuples</strong> with element-zero holding the word and item-1 holding the count. Luckily, this is the tuple list we get when we call <code>items()</code> on our word frequency map. Python offers many flexible ways of doing custom sorts on data. We choose a method here that builds on programming skills we have already learned:</p>
<ol type="1">
<li>swap the tuples from (word, count) using a for loop</li>
<li>sort them using the <code>sort</code> method which is part of the <strong>list object</strong></li>
<li>use the optional <code>reverse=True</code> parameter to <code>sort</code> so that we get the most popular words at the <code>head</code> of our list</li>
<li>swap the items back into a list of (word, count) tuples and return that, pretending nothing ever happened (actually, this is a type of abstraction, where we can later change the way we choose to sort the items without changing the <strong>interface</strong> to our function)</li>
</ol>
</aside>

<aside id="teachers_common" style="top: 2342px;"> 
Depending on the analysis, sometimes it is important to consider the use of common words. This may be useful to identify authorial patterns, such as identifying authorship, or characteristics of the author. Often though, common words are not germane to the analysis. <code>common_filter</code> works on lists of words and creates a new sub-list that filters out all of the common words. The variable <code>commonWords</code> is defined as a list of strings containing 500 common English words is declared as an internal variable within the function. Because our analysis is primarily concerned with word frequency counts, <code>common_filter</code> takes a list of <strong>tuples</strong> —<code>items</code>—as a parameter, rather than a list of strings. This allows clients of this function to pass in lists that contain words and word counts. The function expects the first item in the tuple to be the word.
</aside>

<aside id="teachers_neighbors" style="top: 2600px;">
<code>neighbors</code> helps us examine co-occurances of words in the text. This function defines three <strong>parameters</strong>: <code>words</code> is the list of tuples to analyze, <code>targetWords</code> is a sub-list of words we will run our neighbor analysis on, and the <strong>int</strong> <code>n</code> indicates how for away from our target word we want to investigate. if <code>n == 1</code>, we will only count co-locations of words contiguous with our target word. For more on <code>neighbors</code> please see the example below the code listing.
</aside>

<aside id="teachers_compare" style="top: 2800px;">
<code>compare</code> offers a comparison of two word frequency dictionaries to find which words have the greatest disparity in occurrences. In this function we see a new Python <em>data structure</em>, <strong>set</strong>. “A set is an unordered collection with no duplicate elements” <a href="http://docs.python.org/3.3/tutorial/datastructures.html#sets">*</a>. In this case we use <strong>set</strong> to make a unique set of keys from both dictionaries. We create the set from the <code>keys</code> in dictionary <code>a</code> on line 188 and then add any missing <code>keys</code> from dict <code>b</code> on line 189 by calling sets <code>update</code> method. In our loop (lines 193-197) we add tuples to a new list, in the format (word, difference in counts between a &amp; b). We use the built-in <code>abs</code> function, because, here, we care about the difference, not <em>which</em> dict had the greater count. Once this list of differences is created, we sort it by counts using the <code>list_freqs</code> function we already defined.
</aside>


<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="co"># schools_analysis.py</span>
<span class="co"># by: mxc</span>
<span class="co">&quot;&quot;&quot;</span>
<span class="co">This example code shows how to use</span>
<span class="co">some basic content analysis techniques</span>
<span class="co">such as finding word frequencies</span>
<span class="co">and counting neighboring words to </span>
<span class="co">provide a basic analysis of differences </span>
<span class="co">in New York Times articles from 1983</span>
<span class="co">and 2013.</span>

<span class="co">Key Concepts: functions, dictionaries, </span>
<span class="co">              lists, tuples, string operations</span>
<span class="co">New Concepts: while loop</span>

<span class="co">&quot;&quot;&quot;</span>

<span class="kw">def</span> read_and_prep(fileName):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Open a file, read the content,</span>
<span class="co">        and prepare it for analysis.</span>
<span class="co">        Return a list of words from the</span>
<span class="co">        file.</span>
<span class="co">    &quot;&quot;&quot;</span>
    f = <span class="dt">open</span>(fileName,<span class="st">&quot;r&quot;</span>)
    text = f.read()
    words = clean(text)
    f.close()
    <span class="kw">return</span> words


<span class="kw">def</span> clean(text):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Prepare our text for analysis by</span>
<span class="co">        removing non-alphanumeric</span>
<span class="co">        characters like punctuations and</span>
<span class="co">        formatting marks line em and en</span>
<span class="co">        dashes. This function assumes</span>
<span class="co">        ascii not UTF-8 or other</span>
<span class="co">        encodings.</span>
<span class="co">    &quot;&quot;&quot;</span>

    text = text.lower()
    <span class="co"># replace -- with a space</span>
    text = text.replace(<span class="st">&quot;--&quot;</span>, <span class="st">&quot; &quot;</span>)
    words = text.split()
    cleanWords = []

    <span class="kw">for</span> word in words:
        word = strip_non_chars(word)
        <span class="kw">if</span> <span class="dt">len</span>(word) &gt; <span class="dv">0</span>:
            cleanWords.append(word)

    <span class="kw">return</span> cleanWords

<span class="kw">def</span> strip_non_chars(word):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Use index notation to make sure that the first</span>
<span class="co">        and last character of the word is one of our</span>
<span class="co">        valid characters</span>
<span class="co">    &quot;&quot;&quot;</span>

    valid = <span class="st">&quot;abcdefghijklmnopqrstuvwxyz1234567890&quot;</span>

    <span class="kw">while</span> <span class="dt">len</span>(word) &gt; <span class="dv">0</span> and word[<span class="dv">0</span>] not in valid:
        word = word[<span class="dv">1</span>:]

    <span class="kw">while</span> <span class="dt">len</span>(word) &gt; <span class="dv">0</span> and word[<span class="dt">len</span>(word) - <span class="dv">1</span>] not in valid:
        word = word[<span class="dv">0</span>: <span class="dt">len</span>(word) - <span class="dv">1</span>]

    <span class="kw">return</span> word


<span class="kw">def</span> freq(words):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Take words--a list of words--and</span>
<span class="co">        break it down into a word</span>
<span class="co">        frequency map where each unique</span>
<span class="co">        word in the text is a key and</span>
<span class="co">        with the number of occurrences</span>
<span class="co">        as the value. Return the map.</span>
<span class="co">    &quot;&quot;&quot;</span>
    freqMap = {}

    <span class="kw">for</span> word in words:
        <span class="kw">if</span> word in freqMap:
            freqMap[word] += <span class="dv">1</span>
        <span class="kw">else</span>:
            freqMap[word] = <span class="dv">1</span>
    <span class="kw">return</span> freqMap


<span class="kw">def</span> freq_list(items):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Create a sorted list from map items</span>
<span class="co">        from a word frequency dictionary.</span>
<span class="co">        The items must be 2-tuples in the format</span>
<span class="co">        (word, count). Return a list of 2-tuples</span>
<span class="co">        in (word, frequency) order, sorted with</span>
<span class="co">        the most frequent words at the start</span>
<span class="co">        of the list.</span>
<span class="co">    &quot;&quot;&quot;</span>

    freqList = []
    <span class="kw">for</span> word, count in items:
        freqList.append( (count, word) )

    freqList.sort(reverse=<span class="ot">True</span>)

    <span class="co"># now swap it back to word,count order in our tuples</span>
    swapped = []
    <span class="kw">for</span> count,word in freqList:
        swapped.append( (word,count) )

    <span class="kw">return</span> swapped

<span class="kw">def</span> common_filter(items):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Filter out the most common</span>
<span class="co">        English words from from a list</span>
<span class="co">        of 500 common words. ``items``</span>
<span class="co">        is a list of tuples where the</span>
<span class="co">        first element is the word.</span>
<span class="co">        Returns a new list of items,</span>
<span class="co">        without the common words.</span>
<span class="co">    &quot;&quot;&quot;</span>

    <span class="co"># 500 common English words, in frequency order</span>
    <span class="co"># edited here for brevity</span>
    commonWords = [<span class="st">&#39;the&#39;</span>, <span class="st">&#39;of&#39;</span>, <span class="st">&#39;and&#39;</span>, <span class="st">&#39;a&#39;</span>, <span class="st">&#39;in&#39;</span>] <span class="co">#...</span>

    filtered = []
    <span class="kw">for</span> item in items:
        word = item[<span class="dv">0</span>]
        <span class="kw">if</span> word not in commonWords:
            filtered.append( item )

    <span class="kw">return</span> filtered


<span class="kw">def</span> neighbors(words, targetWords, n):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        This function takes a list of</span>
<span class="co">        words and returns a dict with</span>
<span class="co">        each word as the key, and a</span>
<span class="co">        sorted list of frequency</span>
<span class="co">        2-tuples in the form (word,</span>
<span class="co">        freq) with all of the words in</span>
<span class="co">        the text within ``n`` spaces</span>
<span class="co">        either before or after the word.</span>
<span class="co">    &quot;&quot;&quot;</span>

    neighborMap = {}

    <span class="co">#initialize our dict with empty lists</span>
    <span class="kw">for</span> target in targetWords:
        neighborMap[target] = []

    <span class="kw">for</span> i in <span class="dt">range</span>(<span class="dt">len</span>(words)):
        <span class="co"># current word</span>
        word = words[i]
        <span class="kw">if</span> word in targetWords:
            
            <span class="co"># use max to guard against </span>
            <span class="co"># going beyond end of list</span>
            start = <span class="dt">max</span>(<span class="dv">0</span>,i-n)

            <span class="co"># use min to make sure</span>
            <span class="co"># we don&#39;t go below zero</span>
            end = <span class="dt">min</span>(<span class="dt">len</span>(words)-<span class="dv">1</span>, i+n)

            neighborList = neighborMap[word]
            neighborList.extend(words[start:i] + words[i<span class="dv">+1</span>:end<span class="dv">+1</span>])
            neighborMap[word] = neighborList

    <span class="kw">for</span> key in neighborMap.keys():
        neighborMap[key] = freq(neighborMap[key])

    <span class="kw">return</span> neighborMap

<span class="kw">def</span> compare(a, b):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Compare the word frequency dictionaries</span>
<span class="co">        ``a`` and ``b`` by created a new sorted list</span>
<span class="co">        of 2-tuples in the format </span>
<span class="co">        (word, difference in counts).</span>
<span class="co">    &quot;&quot;&quot;</span>
    wordSet = <span class="dt">set</span>(a.keys())
    wordSet.update(b.keys())

    freqDifList = []

    <span class="kw">for</span> word in wordSet:
        aCount = a.get(word, <span class="dv">0</span>)
        bCount = b.get(word, <span class="dv">0</span>)
        dif = <span class="dt">abs</span>(aCount - bCount)
        freqDifList.append( (word, dif) )

    sortedDifs = freq_list(freqDifList)
    <span class="kw">return</span> sortedDifs


<span class="kw">def</span> analyze(fName, targets):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Analyze the texts along several lines:</span>
<span class="co">          - split into words</span>
<span class="co">          - create a frequency map for the document</span>
<span class="co">          - analyze neighbors for the </span>
<span class="co">            list of ``target`` words</span>
<span class="co">        Return the results as a tuple:</span>
<span class="co">        (list of all words, freq map, freq map for neighbors)</span>
<span class="co">    &quot;&quot;&quot;</span>
 
    words = read_and_prep(fName)
    frequencies = freq(words)
    neigh = neighbors(words, targets, <span class="dv">2</span>)
    <span class="kw">return</span> words, frequencies, neigh

<span class="kw">def</span> print_counts(freqList):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Takes a list of tuples in the format (word, count)</span>
<span class="co">        and prints the result in a table.</span>
<span class="co">    &quot;&quot;&quot;</span>

    col = <span class="dv">20</span>

    <span class="dt">print</span>(<span class="st">&quot;word&quot;</span>.ljust(col) + <span class="st">&quot;  count&quot;</span>)
    <span class="dt">print</span>(<span class="st">&quot;-&quot;</span> * col + <span class="st">&quot;  &quot;</span> + <span class="st">&quot;---------&quot;</span>)

    <span class="kw">for</span> word, count in freqList:
        <span class="dt">print</span>(<span class="dt">str</span>(word.rjust(col)) + <span class="st">&quot;  &quot;</span> + <span class="dt">str</span>(count))


<span class="kw">def</span> print_targets(neigh, count=<span class="dv">10</span>):
    <span class="kw">for</span> target in neigh.keys():
        <span class="dt">print</span>(target)
        <span class="dt">print</span>(<span class="st">&quot;==========================================&quot;</span>)
        com = freq_list(neigh[target].items())
        com = common_filter(com)
        show = <span class="dt">min</span>(count, <span class="dt">len</span>(com)-<span class="dv">1</span> )
        print_counts(com[<span class="dv">0</span>:show])
        <span class="dt">print</span>()
        <span class="dt">print</span>()

<span class="kw">def</span> report(header, words, freqList, neighborList):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Print a generic report with the analysis.</span>
<span class="co">    &quot;&quot;&quot;</span>
    <span class="dt">print</span>(<span class="st">&quot;RUNNING ANALYSIS FOR:&quot;</span>, header)
    <span class="dt">print</span>(<span class="st">&quot;==========================================&quot;</span>)
    <span class="dt">print</span>()
    <span class="dt">print</span>(<span class="st">&quot;Total words:&quot;</span>, <span class="dt">len</span>(words))
    uncommon = common_filter(freqList)
    print_counts(uncommon[<span class="dv">0</span>:<span class="dv">100</span>])
    print_targets(neighborList)


<span class="kw">def</span> print_compare(compared, a, b):
    <span class="co">&quot;&quot;&quot;</span>
<span class="co">        Print out a table comparing two</span>
<span class="co">        dictionaries. ``Compared`` is the</span>
<span class="co">        ordered list of keys-freq to compare.</span>
<span class="co">        ``a`` and ``b`` are the two word</span>
<span class="co">        frequency dictionaries to compare.</span>
<span class="co">    &quot;&quot;&quot;</span>

    col = <span class="dv">20</span>
    <span class="dt">print</span>(<span class="st">&quot;word&quot;</span>.ljust(col) + <span class="st">&quot;  a list  b list&quot;</span>)
    <span class="dt">print</span>(<span class="st">&quot;-&quot;</span> * col + <span class="st">&quot;  ------  ------&quot;</span>)

    <span class="kw">for</span> word, dif in compared:
        <span class="dt">print</span>(word.rjust(col) + <span class="st">&quot;  &quot;</span> + 
          <span class="dt">str</span>(a.get(word,<span class="dv">0</span>)).ljust(<span class="dv">6</span>) + <span class="st">&quot;  &quot;</span> + 
          <span class="dt">str</span>(b.get(word,<span class="dv">0</span>)).ljust(<span class="dv">6</span>))</code></pre></td></tr></table>
</section>
<section id="neighbor-details" class="level2">
<h2>Neighbor details</h2>
<p><code>neighbors</code> is more complicated than other code we have looked at because it calls one of our functions in a loop and it uses nested <strong>dictionaries</strong> — a dictionary that has more dictionaries as data. To unpack the function a little bit, consider this example text:</p>
<p style="color: gray; margin: .5em 2em;">
While previously well <span style="color: 
blue">known in <span style="color: red">education</span> circles, she</span> gained a much broader audience after she publicly rejected almost everything she had once believed. In a surprise 2010 best seller, “The Death and Life of the Great American School System,” she openly declared that she had been wrong to <span style="color: blue">champion standardized <span style="color: 
red">testing</span>, charter schools</span> and vouchers. She says she is trying now to make up for past errors.
</p>


<p>If we run <code>neighbors</code> with <code>targetWords=[&quot;testing&quot;, &quot;education&quot;], n=2</code> we would create a dictionary that looks something like this:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">key</th>
<th style="text-align: left;">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">education</td>
<td style="text-align: left;">{“known”: 1, “in”: 1, “circles”: 1, “she”: 1}</td>
</tr>
<tr class="even">
<td style="text-align: left;">testing</td>
<td style="text-align: left;">{“champion”: 1, “standardized”: 1, “charter”: 1, “schools”: 1}</td>
</tr>
</tbody>
</table>
<p>Here are the actual results for this neighbors call against the ‘teachers_2013.txt’; showing the top 3 neighbors for each word.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">key</th>
<th style="text-align: left;">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">testing</td>
<td style="text-align: left;">{“standardized”: 30, “high-stakes”: 15, “students”: 8}</td>
</tr>
<tr class="even">
<td style="text-align: left;">education</td>
<td style="text-align: left;">{“department”: 169, “board”: 54, “higher”: 52}</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="while-loops" class="level1">
<h1>While loops</h1>
<section id="the-while-statement" class="level2">
<h2>The <code>while</code> statement</h2>
<p>Here is a fragment of code that demonstrates the use of the <code>while</code> statement:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> sum_to(n):
    <span class="co">&quot;&quot;&quot; Return the sum of 1+2+3 ... n &quot;&quot;&quot;</span>
    ss  = <span class="dv">0</span>
    v = <span class="dv">1</span>
    <span class="kw">while</span> v &lt;= n:
        ss = ss + v
        v = v + <span class="dv">1</span>
    <span class="kw">return</span> ss
    
<span class="co"># For your test suite</span>
test(sum_to(<span class="dv">4</span>) == <span class="dv">10</span>) 
test(sum_to(<span class="dv">1000</span>) == <span class="dv">500500</span>)     </code></pre></td></tr></table>
<p>You can almost read the <code>while</code> statement as if it were English. It means, while <code>v</code> is less than or equal to <code>n</code>, continue executing the body of the loop. Within the body, each time, increment <code>v</code>. When <code>v</code> passes <code>n</code>, return your accumulated sum.</p>
<p>More formally, here is precise flow of execution for a <code>while</code> statement:</p>
<ul>
<li>Evaluate the condition at line 5, yielding a value which is either <code>False</code> or <code>True</code>.</li>
<li>If the value is <code>False</code>, exit the <code>while</code> statement and continue execution at the next statement (line 8 in this case).</li>
<li>If the value is <code>True</code>, execute each of the statements in the body (lines 6 and 7) and then go back to the <code>while</code> statement at line 5.</li>
</ul>
<p>The body consists of all of the statements indented below the <code>while</code> keyword.</p>
<p>Notice that if the loop condition is <code>False</code> the first time we get loop, the statements in the body of the loop are never executed.</p>
<p>The body of the loop should change the value of one or more variables so that eventually the condition becomes false and the loop terminates. Otherwise the loop will repeat forever, which is called an <strong>infinite loop</strong>. An endless source of amusement for computer scientists is the observation that the directions on shampoo, “lather, rinse, repeat”, are an infinite loop.</p>
<p>In the case here, we can prove that the loop terminates because we know that the value of <code>n</code> is finite, and we can see that the value of <code>v</code> increments each time through the loop, so eventually it will have to exceed <code>n</code>. In other cases, it is not so easy, even impossible in some cases, to tell if the loop will ever terminate.</p>
<p>What you will notice here is that the <code>while</code> loop is more work for you — the programmer — than the equivalent <code>for</code> loop. When using a <code>while</code> loop one has to manage the loop variable yourself: give it an initial value, test for completion, and then make sure you change something in the body so that the loop terminates. By comparison, here is an equivalent function that uses <code>for</code> instead:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> sum_to(n):
    <span class="co">&quot;&quot;&quot; Return the sum of 1+2+3 ... n &quot;&quot;&quot;</span>
    ss  = <span class="dv">0</span>
    <span class="kw">for</span> v in <span class="dt">range</span>(n<span class="dv">+1</span>):
        ss = ss + v
    <span class="kw">return</span> ss</code></pre></td></tr></table>
<p>Notice the slightly tricky call to the <code>range</code> function — we had to add one onto <code>n</code>, because <code>range</code> generates its list up to but excluding the value you give it. It would be easy to make a programming mistake and overlook this, but because we’ve made the investment of writing some unit tests, our test suite would have caught our error.</p>
<p>So why have two kinds of loop if <code>for</code> looks easier? This next example shows a case where we need the extra power that we get from the <code>while</code> loop.</p>
</section>
<section id="the-collatz-3n-1-sequence" class="level2">
<h2>The Collatz 3n + 1 sequence</h2>
<p>Let’s look at a simple sequence that has fascinated and foxed mathematicians for many years. They still cannot answer even quite simple questions about this.</p>
<p>The “computational rule” for creating the sequence is to start from some given <code>n</code>, and to generate the next term of the sequence from <code>n</code>, either by halving <code>n</code>, (whenever <code>n</code> is even), or else by multiplying it by three and adding 1. The sequence terminates when <code>n</code> reaches 1.</p>
<p>This Python function captures that algorithm:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> seq3np1(n):
    <span class="co">&quot;&quot;&quot; Print the 3n+1 sequence from n, </span>
<span class="co">        terminating when it reaches 1.</span>
<span class="co">    &quot;&quot;&quot;</span>
    <span class="kw">while</span> n != <span class="dv">1</span>:
        <span class="dt">print</span>(n, end=<span class="st">&quot;, &quot;</span>)
        <span class="kw">if</span> n % <span class="dv">2</span> == <span class="dv">0</span>:        <span class="co"># n is even</span>
            n = n // <span class="dv">2</span>
        <span class="kw">else</span>:                 <span class="co"># n is odd</span>
            n = n * <span class="dv">3</span> + <span class="dv">1</span>
    <span class="dt">print</span>(n, end=<span class="st">&quot;.</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre></td></tr></table>
<p>Notice first that the print function on line 6 has an extra argument <code>end=&quot;, &quot;</code>. This tells the <code>print</code> function to follow the printed string with whatever the programmer chooses (in this case, a comma followed by a space), instead of ending the line. So each time something is printed in the loop, it is printed on the same output line, with the numbers separated by commas. The call to <code>print(n, end=&quot;.\n&quot;)</code> at line 11 after the loop terminates will then print the final value of <code>n</code> followed by a period and a newline character. (You’ll cover the <code>\n</code> (newline character) in the next chapter).</p>
<p>The condition for continuing with this loop is <code>n != 1</code>, so the loop will continue running until it reaches its termination condition, (i.e. <code>n == 1</code>).</p>
<p>Each time through the loop, the program outputs the value of <code>n</code> and then checks whether it is even or odd. If it is even, the value of <code>n</code> is divided by 2 using integer division. If it is odd, the value is replaced by <code>n * 3 + 1</code>.<br />Here are some examples:</p>
<pre class="sourceCode python"><code class="sourceCode python">&gt;&gt;&gt; seq3np1(<span class="dv">3</span>)
<span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">16</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>.
&gt;&gt;&gt; seq3np1(<span class="dv">19</span>)
<span class="dv">19</span>, <span class="dv">58</span>, <span class="dv">29</span>, <span class="dv">88</span>, <span class="dv">44</span>, <span class="dv">22</span>, <span class="dv">11</span>, <span class="dv">34</span>, <span class="dv">17</span>, <span class="dv">52</span>, <span class="dv">26</span>, <span class="dv">13</span>, 
                    <span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">16</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>.
&gt;&gt;&gt; seq3np1(<span class="dv">21</span>)
<span class="dv">21</span>, <span class="dv">64</span>, <span class="dv">32</span>, <span class="dv">16</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>.
&gt;&gt;&gt; seq3np1(<span class="dv">16</span>)
<span class="dv">16</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>.
&gt;&gt;&gt; </code></pre>
<p>Since <code>n</code> sometimes increases and sometimes decreases, there is no obvious proof that <code>n</code> will ever reach 1, or that the program terminates. For some particular values of <code>n</code>, we can prove termination. For example, if the starting value is a power of two, then the value of <code>n</code> will be even each time through the loop until it reaches 1. The previous example ends with such a sequence, starting with 16.</p>
<p>See if you can find a small starting number that needs more than a hundred steps before it terminates.</p>
<p>Particular values aside, the interesting question was first posed by a German mathematician called Lothar Collatz: the <em>Collatz conjecture</em> (also known as the <em>3n + 1 conjecture</em>), is that this sequence terminates for <em>all</em> positive values of <code>n</code>. So far, no one has been able to prove it <em>or</em> disprove it!<br />(A conjecture is a statement that might be true, but nobody knows for sure.)</p>
<p>Think carefully about what would be needed for a proof or disproof of the conjecture <em>“All positive integers will eventually converge to 1 using the Collatz rules”</em>.<br />With fast computers we have been able to test every integer up to very large values, and so far, they have all eventually ended up at 1.<br />But who knows? Perhaps there is some as-yet untested number which does not reduce to 1.</p>
<p>You’ll notice that if you don’t stop when you reach 1, the sequence gets into its own cyclic loop: 1, 4, 2, 1, 4, 2, 1, 4 … So one possibility is that there might be other cycles that we just haven’t found yet.</p>
<p>Wikipedia has an informative article about the Collatz conjecture. The sequence also goes under other names (Hailstone sequence, Wonderous numbers, etc.), and you’ll find out just how many integers have already been tested by computer, and found to converge!</p>
<aside id="for-or-while">

<p><strong>Choosing between <code>for</code> and <code>while</code></strong></p>
<p>Use a <code>for</code> loop if you know, before you start looping, the maximum number of times that you’ll need to execute the body.<br />For example, if you’re traversing a list of elements, you know that the maximum number of loop iterations you can possibly need is “all the elements in the list”. Or if you need to print the 12 times table, we know right away how many times the loop will need to run.</p>
<p>So any problem like “iterate this weather model for 1000 cycles”, or “search this list of words”, “find all prime numbers up to 10000” suggest that a <code>for</code> loop is best.</p>
<p>By contrast, if you are required to repeat some computation until some condition is met, and you cannot calculate in advance when (or if) this will happen, as we did in this 3n + 1 problem, you’ll need a <code>while</code> loop.</p>
<p>We call the first case <strong>definite iteration</strong> — we know ahead of time some definite bounds for what is needed. The latter case is called <strong>indefinite iteration</strong> — we’re not sure how many iterations we’ll need — we cannot even establish an upper bound!</p>
</aside>


</section>
<section id="tracing-a-program" class="level2">
<h2>Tracing a program</h2>
<p>To write effective computer programs, and to build a good conceptual model of program execution, a programmer needs to develop the ability to <strong>trace</strong> the execution of a computer program. Tracing involves becoming the computer and following the flow of execution through a sample program run, recording the state of all variables and any output the program generates after each instruction is executed.</p>
<p>To understand this process, let’s trace the call to <code>seq3np1(3)</code> from the previous section. At the start of the trace, we have a variable, <code>n</code> (the parameter), with an initial value of 3. Since 3 is not equal to 1, the <code>while</code> loop body is executed. 3 is printed and <code>3 % 2 == 0</code> is evaluated. Since it evaluates to <code>False</code>, the <code>else</code> branch is executed and <code>3 * 3 + 1</code> is evaluated and assigned to <code>n</code>.</p>
<p>To keep track of all this as you hand trace a program, make a column heading on a piece of paper for each variable created as the program runs and another one for output. Our trace so far would look something like this:</p>
<pre><code>n               output printed so far
--              ---------------------
3               3, 
10</code></pre>
<p>Since <code>10 != 1</code> evaluates to <code>True</code>, the loop body is again executed, and 10 is printed. <code>10 % 2 == 0</code> is true, so the <code>if</code> branch is executed and <code>n</code> becomes 5. By the end of the trace we have:</p>
<pre><code>n               output printed so far
--              ---------------------
3               3,
10              3, 10,
5               3, 10, 5,
16              3, 10, 5, 16,
8               3, 10, 5, 16, 8,
4               3, 10, 5, 16, 8, 4,
2               3, 10, 5, 16, 8, 4, 2,
1               3, 10, 5, 16, 8, 4, 2, 1.</code></pre>
<p>Tracing can be a bit tedious and error prone (that’s why we get computers to do this stuff in the first place!), but it is an essential skill for a programmer to have. From this trace we can learn a lot about the way our code works. We can observe that as soon as <code>n</code> becomes a power of 2, for example, the program will require log :sub:<code>2</code> (n) executions of the loop body to complete. We can also see that the final 1 will not be printed as output within the body of the loop, which is why we put the special <code>print</code> function at the end.</p>
<p>Tracing a program is, of course, related to single-stepping through your code and being able to inspect the variables. Using the computer to <strong>single-step</strong> for you is less error prone and more convenient. Also, as your programs get more complex, they might execute many millions of steps before they get to the code that you’re really interested in, so manual tracing becomes impossible. Being able to set a <strong>breakpoint</strong> where you need one is far more powerful. So we strongly encourage you to invest time in learning using to use your programming environment (PyScripter, in these notes) to full effect.</p>
<p>There are also some great visualization tools becoming available to help you trace and understand small fragments of Python code. The one we recommend is at http://netserv.ict.ru.ac.za/python3_viz</p>
<p>We’ve cautioned against chatterbox functions, but used them here.<br />As we learn a bit more Python, we’ll be able to show you how to generate a list of values to hold the sequence, rather than having the function print them. Doing this would remove the need to have all these pesky <code>print</code> functions in the middle of our logic, and will make the function more useful.</p>
</section>
<section id="counting-digits" class="level2">
<h2>Counting digits</h2>
<p>The following function counts the number of decimal digits in a positive integer:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> num_digits(n):
    count = <span class="dv">0</span>
    <span class="kw">while</span> n != <span class="dv">0</span>:
        count = count + <span class="dv">1</span>
        n = n // <span class="dv">10</span>
    <span class="kw">return</span> count</code></pre></td></tr></table>
<p>A call to <code>print(num_digits(710))</code> will print <code>3</code>. Trace the execution of this function call (perhaps using the single step function in PyScripter, or the Python visualizer, or on some paper) to convince yourself that it works.</p>
<p>This function demonstrates an important pattern of computation called a <strong>counter</strong>. The variable <code>count</code> is initialized to 0 and then incremented each time the loop body is executed. When the loop exits, <code>count</code> contains the result — the total number of times the loop body was executed, which is the same as the number of digits.</p>
<p>If we wanted to only count digits that are either 0 or 5, adding a conditional before incrementing the counter will do the trick:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> num_zero_and_five_digits(n):
    count = <span class="dv">0</span>
    <span class="kw">while</span> n &gt; <span class="dv">0</span>:
        digit = n % <span class="dv">10</span>
        <span class="kw">if</span> digit == <span class="dv">0</span> or digit == <span class="dv">5</span>:
            count = count + <span class="dv">1</span>
        n = n // <span class="dv">10</span>
    <span class="kw">return</span> count</code></pre></td></tr></table>
<p>Confirm that <code>test(num_zero_and_five_digits(1055030250) == 7)</code> passes.</p>
<p>Notice, however, that <code>test(num_digits(0) == 1)</code> fails. Explain why. Do you think this is a bug in the code, or a bug in the specifications, or our expectations, or the tests?</p>
</section>
<section id="newtons-method-for-finding-square-roots" class="level2">
<h2>Newton’s method for finding square roots</h2>
<p>Loops are often used in programs that compute numerical results by starting with an approximate answer and iteratively improving it.</p>
<p>For example, before we had calculators or computers, people needed to calculate square roots manually. Newton used a particularly good method (there is some evidence that this method was known many years before).<br />Suppose that you want to know the square root of <code>n</code>. If you start with almost any approximation, you can compute a better approximation (closer to the actual answer) with the following formula:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
</pre></td><td class="sourceCode"><pre><code class="sourceCode python">better = (approx + n/approx)/<span class="dv">2</span></code></pre></td></tr></table>
<p>Repeat this calculation a few times using your calculator. Can you see why each iteration brings your estimate a little closer? One of the amazing properties of this particular algorithm is how quickly it converges to an accurate answer — a great advantage for doing it manually.</p>
<p>By using a loop and repeating this formula until the better approximation gets close enough to the previous one, we can write a function for computing the square root. (In fact, this is how your calculator finds square roots — it may have a slightly different formula and method, but it is also based on repeatedly improving its guesses.)</p>
<p>This is an example of an <code>indefinite</code> iteration problem: we cannot predict in advance how many times we’ll want to improve our guess — we just want to keep getting closer and closer. Our stopping condition for the loop will be when our old guess and our improved guess are “close enough” to each other.</p>
<p>Ideally, we’d like the old and new guess to be exactly equal to each other when we stop.<br />But exact equality is a tricky notion in computer arithmetic when real numbers are involved.<br />Because real numbers are not represented absolutely accurately (after all, a number like pi or the square root of two has an infinite number of decimal places because it is irrational), we need to formulate the stopping test for the loop by asking “is <code>a</code> close enough to <code>b</code>”? This stopping condition can be coded like this:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">if</span> <span class="dt">abs</span>(a-b) &lt; <span class="fl">0.001</span>:  <span class="co"># Make this smaller for better accuracy</span>
      <span class="kw">break</span>   </code></pre></td></tr></table>
<p>Notice that we take the absolute value of the difference between <code>a</code> and <code>b</code>!</p>
<p>This problem is also a good example of when a middle-exit loop is appropriate:</p>
<table class="sourceCode python numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="sourceCode"><pre><code class="sourceCode python"><span class="kw">def</span> sqrt(n):
    approx = n/<span class="fl">2.0</span>     <span class="co"># Start with some or other guess at the answer</span>
    <span class="kw">while</span> <span class="ot">True</span>:
        better = (approx + n/approx)/<span class="fl">2.0</span>
        <span class="kw">if</span> <span class="dt">abs</span>(approx - better) &lt; <span class="fl">0.001</span>:
            <span class="kw">return</span> better
        approx = better
    
<span class="co"># Test cases</span>
<span class="dt">print</span>(sqrt(<span class="fl">25.0</span>))
<span class="dt">print</span>(sqrt(<span class="fl">49.0</span>))
<span class="dt">print</span>(sqrt(<span class="fl">81.0</span>))</code></pre></td></tr></table>
<p>The output is:</p>
<pre><code>5.00000000002
7.0
9.0</code></pre>
<p>See if you can improve the approximations by changing the stopping condition. Also, step through the algorithm (perhaps by hand, using your calculator) to see how many iterations were needed before it achieved this level of accuracy for <code>sqrt(25)</code>.</p>
</section>
<section id="algorithms" class="level2">
<h2>Algorithms</h2>
<p>Newton’s method is an example of an <strong>algorithm</strong>: it is a mechanical process for solving a category of problems (in this case, computing square roots).</p>
<p>Some kinds of knowledge are not algorithmic. For example, learning dates from history or your multiplication tables involves memorization of specific solutions.</p>
<p>But the techniques you learned for addition with carrying, subtraction with borrowing, and long division are all algorithms. Or if you are an avid Sudoku puzzle solver, you might have some specific set of steps that you always follow.</p>
<p>One of the characteristics of algorithms is that they do not require any intelligence to carry out. They are mechanical processes in which each step follows from the last according to a simple set of rules. And they’re designed to solve a general class or category of problems, not just a single problem.</p>
<p>Understanding that hard problems can be solved by step-by-step algorithmic processes (and having technology to execute these algorithms for us) is one of the major breakthroughs that has had enormous benefits. So while the execution of the algorithm may be boring and may require no intelligence, algorithmic or computational thinking — i.e. using algorithms and automation as the basis for approaching problems — is rapidly transforming our society. Some claim that this shift towards algorithmic thinking and processes is going to have even more impact on our society than the invention of the printing press.<br />And the process of designing algorithms is interesting, intellectually challenging, and a central part of what we call programming.</p>
<p>Some of the things that people do naturally, without difficulty or conscious thought, are the hardest to express algorithmically. Understanding natural language is a good example. We all do it, but so far no one has been able to explain <em>how</em> we do it, at least not in the form of a step-by-step mechanical algorithm.</p>
</section>
</section>
</body>
</html>
